<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>F2E 星球通訊</title>
  
  <subtitle>DO！ Or DO Not！ There is NO TRY！</subtitle>
  <link href="https://popeye-ux.github.io/atom.xml" rel="self"/>
  
  <link href="https://popeye-ux.github.io/"/>
  <updated>2023-03-11T04:18:58.017Z</updated>
  <id>https://popeye-ux.github.io/</id>
  
  <author>
    <name>POPEYE</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Vue 實作 check box 全選與取消全選</title>
    <link href="https://popeye-ux.github.io/2023/03/09/vue-allchecked/"/>
    <id>https://popeye-ux.github.io/2023/03/09/vue-allchecked/</id>
    <published>2023-03-09T14:07:52.000Z</published>
    <updated>2023-03-11T04:18:58.017Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Vue-實作-check-box-全選與取消全選"><a href="#Vue-實作-check-box-全選與取消全選" class="headerlink" title="Vue 實作 check box 全選與取消全選"></a>Vue 實作 check box 全選與取消全選</h1><p>check box 全選與取消全選有 2 種做法可以實現這個功能，可以使用 methods 來實現，也可以使用 computed 來監聽「全選的核取框」。</p><h2 id="使用-methods-方法實作"><a href="#使用-methods-方法實作" class="headerlink" title="使用 methods 方法實作"></a>使用 methods 方法實作</h2><ul><li>全選的 check box 雙向綁定到 allChecked 這個資料狀態，預設的布林值為 false。</li><li>checkList 這個資料狀態是一個陣列，存放所有的 check box 選項。</li><li>在 data 中準備一個 checkedItems 的空陣列。</li><li>使用 v-for 把 checkList 裡面的資料渲染成一個一個的 check box 選項，與 checkedItems 雙向綁定。</li><li>在 <code>methods</code> 中，準備一個 allCheckedFn 的方法，綁定change事件到「全選」的核取框，把 checkList 裡面的的選項 map 到一個 arr 空陣列，點擊全選的時候，allChecked會變成 true ，然後使用 三元運算式判斷，當 allChecked 為 true 的時候，checkedItems（與所有選項雙向綁定）會被賦值為 arr ，allChecked 為 false 的時候為空陣列：<figure><div class="code-wrapper"><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token keyword">this</span><span class="token punctuation">.</span>checkedHeros <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>allChecked <span class="token operator">?</span> arr <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure></li><li>changeFn這個方法，比對 checkedHeros 的陣列長度與 核取框原始資料陣列長度 是否一致，返回一個布林值，賦值給 全選 allChecked 這個資料狀態。</li></ul><figure><div class="code-wrapper"><pre class="line-numbers language-htmlmixed" data-language="htmlmixed"><code class="language-htmlmixed">&lt;div id&#x3D;&quot;app&quot;&gt;  &lt;p&gt;    &lt;input type&#x3D;&quot;checkbox&quot; id&#x3D;&quot;select&quot; v-model&#x3D;&quot;allChecked&quot; @change&#x3D;&quot;allCheckedFn&quot;&gt;    &lt;label for&#x3D;&quot;select&quot;&gt;全選&#x2F;反選&lt;&#x2F;label&gt;  &lt;&#x2F;p&gt;  &lt;!-- 注意下面 input 對應的都是 v-model&#x3D;&quot;checkedHeros&quot;  --&gt;  &lt;div v-for&#x3D;&quot;item in checkList&quot; :key&#x3D;&quot;item.id&quot; v-model&#x3D;&quot;checkedItems&quot;&gt;     &lt;input type&#x3D;&quot;checkbox&quot; id&#x3D;&quot;item.name&quot; :value&#x3D;&quot;item.name&quot; v-model&#x3D;&quot;checkedItems&quot; @change&#x3D;&quot;changeFn&quot;&gt;    &lt;label for&#x3D;&quot;item.name&quot;&gt;&#123;&#123;item.id + item.name&#125;&#125;&lt;&#x2F;label&gt;  &lt;&#x2F;div&gt;  &lt;br&gt;  &lt;p&gt;checkedItems: &#123;&#123; checkedItems &#125;&#125;&lt;&#x2F;p&gt;&lt;&#x2F;div&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><figure><div class="code-wrapper"><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// 因為是複選的關係，這裡的 checkedHeros 是陣列</span><span class="token keyword">const</span> vm <span class="token operator">=</span> Vue<span class="token punctuation">.</span><span class="token function">createApp</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>  <span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>      <span class="token comment">// checkedHeros和複選框雙向綁定</span>      <span class="token literal-property property">checkedItems</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>      <span class="token literal-property property">allChecked</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>      <span class="token literal-property property">checkList</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">&#123;</span>        <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'鋼鐵人'</span><span class="token punctuation">,</span>        <span class="token literal-property property">id</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span>              <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">&#123;</span>         <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'蜘蛛人'</span><span class="token punctuation">,</span>        <span class="token literal-property property">id</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">&#123;</span>         <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'蟻人'</span><span class="token punctuation">,</span>        <span class="token literal-property property">id</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">,</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">]</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token literal-property property">methods</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>    <span class="token comment">// 全選用的方法</span>    <span class="token function">allCheckedFn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>      <span class="token keyword">let</span> arr<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>      <span class="token comment">// heroList 是所有選項的清單，arr 這個陣列會裝進所有選項</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>checkList<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token operator">=></span><span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>              <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>      <span class="token comment">// allChecked 和全選框綁定，如果是true，就是裝有所有選項的 arr 陣列（全選），如果 false ，就是空陣列（全不選）</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>checkedItems <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>allChecked <span class="token operator">?</span> arr <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token function">changeFn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token comment">//       比對</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>allChecked <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>checkedItems<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token keyword">this</span><span class="token punctuation">.</span>checkList<span class="token punctuation">.</span>length<span class="token punctuation">;</span>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>allChecked<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span>vm<span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><iframe height="300" style="width: 100%;" scrolling="no" title="全選或取消選取-methods" src="https://codepen.io/popeye_ux/embed/BaOZEXE?default-tab=html%2Cresult" frameborder="no" loading="lazy" allowtransparency="true" allowfullscreen="true">  See the Pen <a href="https://codepen.io/popeye_ux/pen/BaOZEXE">  全選或取消選取-methods</a> by POPEYE (<a href="https://codepen.io/popeye_ux">@popeye_ux</a>)  on <a href="https://codepen.io">CodePen</a>.</iframe><h2 id="使用-computed-實作"><a href="#使用-computed-實作" class="headerlink" title="使用 computed 實作"></a>使用 computed 實作</h2><p><img src="https://i.imgur.com/JiJ4JJA.png"></p><p>使用 computed 監聽 allChecked 這個資料狀態，然後 allChecked 與全選框綁定。checkedItems 與所有的選項雙向綁定。</p><ul><li>get 的部分是監聽所有的選項，所有選項都打勾時，全選會被核取。<ul><li>使用三元運算子，當 checkList 的陣列長度等於 checkedItems 的陣列長度時，全選會打勾。</li></ul></li><li>set 的部分是監聽全選框，全選核取時，所有的選項都會打勾。<ul><li>設一個 selected 空陣列，當全選框勾選時，value 為 true，會把 checkList 裡的選項推到 selected，把 selected 賦值給 checkedItems，這時所有選項都會打勾。</li><li>當全選框沒有勾選時， value 為 false，selected 為空陣列，checkedItems 裏沒有選項。<figure><div class="code-wrapper"><pre class="line-numbers language-htmlmixed" data-language="htmlmixed"><code class="language-htmlmixed">&lt;div id&#x3D;&quot;app&quot;&gt;  &lt;p&gt;    &lt;input type&#x3D;&quot;checkbox&quot; id&#x3D;&quot;select&quot; v-model&#x3D;&quot;allChecked&quot;&gt;    &lt;label for&#x3D;&quot;select&quot;&gt;全選&#x2F;反選&lt;&#x2F;label&gt;  &lt;&#x2F;p&gt;  &lt;!-- 注意下面 input 對應的都是 v-model&#x3D;&quot;checkedHeros&quot;  --&gt;  &lt;div v-for&#x3D;&quot;item in checkList&quot; :key&#x3D;&quot;item.id&quot; &gt;     &lt;input type&#x3D;&quot;checkbox&quot; id&#x3D;&quot;item.name&quot; :value&#x3D;&quot;item.name&quot; v-model&#x3D;&quot;checkedItems&quot;&gt;    &lt;label for&#x3D;&quot;item.name&quot;&gt;&#123;&#123;item.id + item.name&#125;&#125;&lt;&#x2F;label&gt;  &lt;&#x2F;div&gt;  &lt;br&gt;  &lt;p&gt;Checked heros: &#123;&#123; checkedItems &#125;&#125;&lt;&#x2F;p&gt;&lt;&#x2F;div&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure></li></ul></li></ul><figure><div class="code-wrapper"><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// 因為是複選的關係，這裡的 checkedHeros 是陣列</span><span class="token keyword">const</span> vm <span class="token operator">=</span> Vue<span class="token punctuation">.</span><span class="token function">createApp</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>      <span class="token literal-property property">checkedHeros</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>      <span class="token comment">// allChecked: false,</span>      <span class="token literal-property property">heroList</span><span class="token operator">:</span> <span class="token punctuation">[</span>        <span class="token punctuation">&#123;</span>          <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"鋼鐵人"</span><span class="token punctuation">,</span>          <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>          <span class="token literal-property property">selected</span><span class="token operator">:</span> <span class="token boolean">false</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>        <span class="token punctuation">&#123;</span>          <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"蜘蛛人"</span><span class="token punctuation">,</span>          <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>          <span class="token literal-property property">selected</span><span class="token operator">:</span> <span class="token boolean">false</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>        <span class="token punctuation">&#123;</span>          <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"蟻人"</span><span class="token punctuation">,</span>          <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>          <span class="token literal-property property">selected</span><span class="token operator">:</span> <span class="token boolean">false</span>        <span class="token punctuation">&#125;</span>      <span class="token punctuation">]</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token literal-property property">computed</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token comment">//allChecked 與 全選雙向綁定</span>    <span class="token literal-property property">allChecked</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>      <span class="token comment">//當所有選項都選的時候，全選會打勾</span>      <span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>heroList          <span class="token operator">?</span> <span class="token keyword">this</span><span class="token punctuation">.</span>checkedHeros<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token keyword">this</span><span class="token punctuation">.</span>heroList<span class="token punctuation">.</span>length          <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>      <span class="token comment">//全選打勾時，所有選項都會打勾</span>      <span class="token function-variable function">set</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// value 是  在全選 checkbox 上的勾選狀態，打勾時為 true，用 v-model 雙向綁定</span>        <span class="token comment">// 暫存用陣列，用來存放被打勾的 checkbox value</span>        <span class="token keyword">let</span> selected <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token comment">// 如果全選打勾</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>          <span class="token comment">// 把可以勾的 選項 push 到暫存的 selected 陣列</span>          <span class="token keyword">this</span><span class="token punctuation">.</span>heroList<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>            <span class="token comment">// 寫入暫存陣列</span>            selected<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>selected<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// 將暫存陣列的值寫到已經勾選的容器陣列，表示全都勾（true），false 時會被清空，因為 selected 此時為空陣列</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>checkedHeros <span class="token operator">=</span> selected<span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>vm<span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">"#app"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><iframe height="300" style="width: 100%;" scrolling="no" title="全選或取消選取-computed" src="https://codepen.io/popeye_ux/embed/eYLEYwo?default-tab=html%2Cresult" frameborder="no" loading="lazy" allowtransparency="true" allowfullscreen="true">  See the Pen <a href="https://codepen.io/popeye_ux/pen/eYLEYwo">  全選或取消選取-computed</a> by POPEYE (<a href="https://codepen.io/popeye_ux">@popeye_ux</a>)  on <a href="https://codepen.io">CodePen</a>.</iframe>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;Vue-實作-check-box-全選與取消全選&quot;&gt;&lt;a href=&quot;#Vue-實作-check-box-全選與取消全選&quot; class=&quot;headerlink&quot; title=&quot;Vue 實作 check box 全選與取消全選&quot;&gt;&lt;/a&gt;Vue 實作 check b</summary>
      
    
    
    
    <category term="Vue3" scheme="https://popeye-ux.github.io/categories/Vue3/"/>
    
    
    <category term="Vue3, JavaScript, checkbox, computed,methods" scheme="https://popeye-ux.github.io/tags/Vue3-JavaScript-checkbox-computed-methods/"/>
    
  </entry>
  
  <entry>
    <title>在 Option API 使用 ref 來操控 DOM 元素</title>
    <link href="https://popeye-ux.github.io/2023/02/28/vue-option-ref-basics/"/>
    <id>https://popeye-ux.github.io/2023/02/28/vue-option-ref-basics/</id>
    <published>2023-02-28T09:04:12.000Z</published>
    <updated>2023-02-28T09:05:58.483Z</updated>
    
    <content type="html"><![CDATA[<p>在原生的 Java Script 中常常會使用 id 來取得 DOM 元素，但是開發到最後常常會用了太多的 id，搞的 id 的名稱互相衝突。在 VUE 中提供了 $refs 的方法，讓我們用 ref 代替 id 來取得 DOM 元素。</p><p>ref 的作用：</p><ul><li>用來選取與操控 DOM 元素。</li><li>用來取得元件的內容。</li><li>Bootstrap Modal 元件的封裝。</li></ul><h2 id="使用-ref-取得-DOM-元素"><a href="#使用-ref-取得-DOM-元素" class="headerlink" title="使用 ref 取得 DOM 元素"></a>使用 ref 取得 DOM 元素</h2><p>在 <code>input</code> 標籤中加入 <code>ref=&quot;inputDom&quot;</code>，就可以在 Vue 中使用 <code>this.$refs.inputDom</code>選取到 <code>input</code> 輸入框。</p><h3 id="HTML-部分"><a href="#HTML-部分" class="headerlink" title="HTML 部分"></a>HTML 部分</h3><figure><div class="code-wrapper"><pre class="line-numbers language-htmlmixed" data-language="htmlmixed"><code class="language-htmlmixed">&lt;div id&#x3D;&quot;app&quot;&gt;  &lt;h3&gt;使用 ref 定義元素&lt;&#x2F;h3&gt;   message: &lt;br&gt;  &lt;input type&#x3D;&quot;text&quot; ref&#x3D;&quot;inputDom&quot;&gt;&lt;&#x2F;div&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><h3 id="Vue-js-部分"><a href="#Vue-js-部分" class="headerlink" title="Vue.js 部分"></a>Vue.js 部分</h3><figure><div class="code-wrapper"><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token punctuation">&#123;</span>  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>         <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token literal-property property">methods</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>     <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>Vue<span class="token punctuation">.</span><span class="token function">createApp</span><span class="token punctuation">(</span>app<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><p>如圖所示，<code>console.log(this.$refs);</code>顯示取得的 DOM 元素。<br><img src="https://i.imgur.com/bdNdyca.png"></p><iframe height="300" style="width: 100%;" scrolling="no" title="refs-1" src="https://codepen.io/popeye_ux/embed/KKxaVOy?default-tab=html%2Cresult" frameborder="no" loading="lazy" allowtransparency="true" allowfullscreen="true">  See the Pen <a href="https://codepen.io/popeye_ux/pen/KKxaVOy">  refs-1</a> by POPEYE (<a href="https://codepen.io/popeye_ux">@popeye_ux</a>)  on <a href="https://codepen.io">CodePen</a>.</iframe><h3 id="讓-輸入框-一載入就-focus"><a href="#讓-輸入框-一載入就-focus" class="headerlink" title="讓 輸入框 一載入就 focus"></a>讓 輸入框 一載入就 focus</h3><p><a href="https://codepen.io/popeye_ux/pen/ExeZKKM?editors=1111">https://codepen.io/popeye_ux/pen/ExeZKKM?editors=1111</a></p><h2 id="使用-ref-來取得-DOM-元素的內容"><a href="#使用-ref-來取得-DOM-元素的內容" class="headerlink" title="使用 ref 來取得 DOM 元素的內容"></a>使用 ref 來取得 DOM 元素的內容</h2><p>我們在 Vue 的實體上註冊了一個 <code>&lt;card&gt;</code> 元件，在 HTML 中插入 <code>&lt;card ref=&quot;card&quot;&gt; &lt;/card&gt;</code>，同時可以看到在 <code>ref</code> 屬性中定義了 card 的 DOM 名稱。</p><h3 id="HTML-的部分"><a href="#HTML-的部分" class="headerlink" title="HTML 的部分"></a>HTML 的部分</h3><figure><div class="code-wrapper"><pre class="line-numbers language-htmlmixed" data-language="htmlmixed"><code class="language-htmlmixed">&lt;div id&#x3D;&quot;app&quot;&gt;  &lt;h3&gt;使用 ref 更新元件內容&lt;&#x2F;h3&gt;    &lt;card ref&#x3D;&quot;card&quot;&gt; &lt;&#x2F;card&gt;  &lt;button @click&#x3D;&quot;getComponentInfo&quot;&gt;取得元件資訊&lt;&#x2F;button&gt;&lt;&#x2F;div&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><h3 id="Vue-js-的部分"><a href="#Vue-js-的部分" class="headerlink" title="Vue.js 的部分"></a>Vue.js 的部分</h3><p>我們在 card 元件的 <code>data</code> 中定義了：</p><figure><div class="code-wrapper"><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token literal-property property">title</span><span class="token operator">:</span><span class="token string">'文件標題'</span><span class="token punctuation">,</span><span class="token literal-property property">content</span><span class="token operator">:</span><span class="token string">'文件內文'</span><span class="token punctuation">,</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></div></figure><p>然後在父元件中定義了這樣的方法：</p><figure><div class="code-wrapper"><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token function">getComponentInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>card<span class="token punctuation">)</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>card<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token string">'被更新的元件標題'</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>card<span class="token punctuation">.</span>content <span class="token operator">=</span> <span class="token string">'被更新的內文'</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><p>然後把 <code>getComponentInfo()</code> 方法綁定到 HTML 的 <code>&lt;button&gt;</code> 上面，就可以取得 <code>&lt;car&gt;</code> 元件裡的內容。</p><h3 id="Vue-js-的完整內容"><a href="#Vue-js-的完整內容" class="headerlink" title="Vue.js 的完整內容"></a>Vue.js 的完整內容</h3><figure><div class="code-wrapper"><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token keyword">const</span> app <span class="token operator">=</span> Vue<span class="token punctuation">.</span><span class="token function">createApp</span><span class="token punctuation">(</span> <span class="token punctuation">&#123;</span>  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>         <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token literal-property property">methods</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>   <span class="token function">getComponentInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>     console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>card<span class="token punctuation">)</span>     <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>card<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token string">'被更新的元件標題'</span>     <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>card<span class="token punctuation">.</span>content <span class="token operator">=</span> <span class="token string">'被更新的內文'</span>   <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span>app<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">'card'</span><span class="token punctuation">,</span><span class="token punctuation">&#123;</span>  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">return</span><span class="token punctuation">&#123;</span>      <span class="token literal-property property">title</span><span class="token operator">:</span><span class="token string">'文件標題'</span><span class="token punctuation">,</span>      <span class="token literal-property property">content</span><span class="token operator">:</span><span class="token string">'文件內文'</span><span class="token punctuation">,</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">  &lt;div class="card" width="18rem">  &lt;h3>&#123;&#123;title&#125;&#125;&lt;/h3>  &lt;p>&#123;&#123;content&#125;&#125;&lt;/p>  &lt;/div>  </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span>app<span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><p>在 CodePen 上看看如何實作：</p><iframe height="300" style="width: 100%;" scrolling="no" title="refs-card" src="https://codepen.io/popeye_ux/embed/jOvyqVZ?default-tab=html%2Cresult" frameborder="no" loading="lazy" allowtransparency="true" allowfullscreen="true">  See the Pen <a href="https://codepen.io/popeye_ux/pen/jOvyqVZ">  refs-card</a> by POPEYE (<a href="https://codepen.io/popeye_ux">@popeye_ux</a>)  on <a href="https://codepen.io">CodePen</a>.</iframe><h2 id="Bootstrap-Modal-封裝"><a href="#Bootstrap-Modal-封裝" class="headerlink" title="Bootstrap Modal 封裝"></a>Bootstrap Modal 封裝</h2><p>我們也可以利用 ref 來操作 Bootstrap Modal 的開關。</p><p>首先到 Bootstrap 官網把 Modal 的 HTML 碼 COPY 過來。</p><figure><div class="code-wrapper"><pre class="line-numbers language-htmlembedded" data-language="htmlembedded"><code class="language-htmlembedded">&lt;div id&#x3D;&quot;app&quot;&gt;&lt;div class&#x3D;&quot;btn btn-primary&quot; @click&#x3D;&quot;openModal&quot;&gt; 開啟 Modal &lt;&#x2F;div&gt;    &lt;-- Modal --&gt;  &lt;div class&#x3D;&quot;modal&quot; tabindex&#x3D;&quot;-1&quot; ref&#x3D;&quot;modal&quot;&gt;  &lt;div class&#x3D;&quot;modal-dialog&quot;&gt;    &lt;div class&#x3D;&quot;modal-content&quot;&gt;      &lt;div class&#x3D;&quot;modal-header&quot;&gt;        &lt;h5 class&#x3D;&quot;modal-title&quot;&gt;Modal title&lt;&#x2F;h5&gt;        &lt;button type&#x3D;&quot;button&quot; class&#x3D;&quot;btn-close&quot; data-bs-dismiss&#x3D;&quot;modal&quot; aria-label&#x3D;&quot;Close&quot;&gt;&lt;&#x2F;button&gt;      &lt;&#x2F;div&gt;      &lt;div class&#x3D;&quot;modal-body&quot;&gt;        &lt;p&gt;Modal body text goes here.&lt;&#x2F;p&gt;      &lt;&#x2F;div&gt;      &lt;div class&#x3D;&quot;modal-footer&quot;&gt;        &lt;button type&#x3D;&quot;button&quot; class&#x3D;&quot;btn btn-secondary&quot; data-bs-dismiss&#x3D;&quot;modal&quot;&gt;Close&lt;&#x2F;button&gt;        &lt;button type&#x3D;&quot;button&quot; class&#x3D;&quot;btn btn-primary&quot;&gt;Save changes&lt;&#x2F;button&gt;      &lt;&#x2F;div&gt;    &lt;&#x2F;div&gt;  &lt;&#x2F;div&gt;&lt;&#x2F;div&gt;&lt;&#x2F;div&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><p><img src="https://i.imgur.com/iBjTtxL.png"><br>其次把 Bootstrap 使用 JavaScript 操控 Modal 的方法 COPY 到 <code>Mounted()</code> 中：</p><figure><div class="code-wrapper"><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token keyword">var</span> myModal <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">bootstrap<span class="token punctuation">.</span>Modal</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'myModal'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> options<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure><p>接著改成下面這樣，<code>new bootstrap.Modal</code> 是用來建立一個 Modal 實體，<code>this.bsModal</code> 要在 data 中定義：</p><figure><div class="code-wrapper"><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token keyword">this</span><span class="token punctuation">.</span>bsModal <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">bootstrap<span class="token punctuation">.</span>Modal</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>modal<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure><p>在 <code>methods</code> 中定義打開 Modal 的方法，然後綁定到按鈕上面，(<code>.show()</code> 是 Bootstrap Modal 所提供的方法)：</p><figure><div class="code-wrapper"><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token function">openModal</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>bsModal<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></div></figure><figure><div class="code-wrapper"><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token keyword">const</span> app <span class="token operator">=</span> Vue<span class="token punctuation">.</span><span class="token function">createApp</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>      <span class="token literal-property property">bsModal</span><span class="token operator">:</span> <span class="token string">""</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token function">openModal</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>bsModal<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// var myModal = new bootstrap.Modal(document.getElementById('myModal'), options)</span>    <span class="token comment">// 建立實體</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>bsModal <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">bootstrap<span class="token punctuation">.</span>Modal</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>modal<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>app<span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">"#app"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><iframe height="300" style="width: 100%;" scrolling="no" title="refs-card" src="https://codepen.io/popeye_ux/embed/BaOpKMY?default-tab=html%2Cresult" frameborder="no" loading="lazy" allowtransparency="true" allowfullscreen="true">  See the Pen <a href="https://codepen.io/popeye_ux/pen/BaOpKMY">  refs-card</a> by POPEYE (<a href="https://codepen.io/popeye_ux">@popeye_ux</a>)  on <a href="https://codepen.io">CodePen</a>.</iframe>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;在原生的 Java Script 中常常會使用 id 來取得 DOM 元素，但是開發到最後常常會用了太多的 id，搞的 id 的名稱互相衝突。在 VUE 中提供了 $refs 的方法，讓我們用 ref 代替 id 來取得 DOM 元素。&lt;/p&gt;
&lt;p&gt;ref 的作用：&lt;/p</summary>
      
    
    
    
    <category term="Vue3" scheme="https://popeye-ux.github.io/categories/Vue3/"/>
    
    
    <category term="Vue3, JavaScript, ref, Modal" scheme="https://popeye-ux.github.io/tags/Vue3-JavaScript-ref-Modal/"/>
    
  </entry>
  
  <entry>
    <title>VUE 直播班上課心得</title>
    <link href="https://popeye-ux.github.io/2023/02/28/wall/"/>
    <id>https://popeye-ux.github.io/2023/02/28/wall/</id>
    <published>2023-02-28T02:52:09.000Z</published>
    <updated>2023-02-28T04:39:31.555Z</updated>
    
    <content type="html"><![CDATA[<h2 id="當初為什麼報名這堂課？"><a href="#當初為什麼報名這堂課？" class="headerlink" title="當初為什麼報名這堂課？"></a>當初為什麼報名這堂課？</h2><p>我曾經參加過 2022 春季 VUE 直播班，後來去當了一陣子的 PM。本以為沒機會當工程師了，因緣際會，拿了直播班的作品去參加了一場面試，結果順利拿到了工作機會。因為有半年時間沒有接觸程式，所以想要重新複習一下 VUE 的語法與使用。</p><h2 id="第一週-第八週的學習過程"><a href="#第一週-第八週的學習過程" class="headerlink" title="第一週~第八週的學習過程"></a>第一週~第八週的學習過程</h2><p>雖然每周五下班都累得像條狗，上課也是偶而會打瞌睡，還是撐著上完了，連假日直播也都沒有錯過。第八周課程的那一天剛好也是我通過試用期的日子，覺得努力沒有白費。</p><h2 id="最大的收獲是？"><a href="#最大的收獲是？" class="headerlink" title="最大的收獲是？"></a>最大的收獲是？</h2><p>重新在學一次 VUE 的語法，發覺自己之前雖然懂了，但是不知道該怎麼用。有許多語法的使用場景在上一次課之後已經可以想像與觸類旁通，許多都已經用在工作實戰的任務中了。</p><h2 id="最喜歡直播班的哪些活動？"><a href="#最喜歡直播班的哪些活動？" class="headerlink" title="最喜歡直播班的哪些活動？"></a>最喜歡直播班的哪些活動？</h2><p>最喜歡的活動是每日任務。</p><h2 id="如果時光能倒流，會希望自己再次注意哪些細節？"><a href="#如果時光能倒流，會希望自己再次注意哪些細節？" class="headerlink" title="如果時光能倒流，會希望自己再次注意哪些細節？"></a>如果時光能倒流，會希望自己再次注意哪些細節？</h2><p>一邊適應新工作，一邊上課，沒有時間可以參與最終作業的考驗，覺得很對不起老師，之後還是會把最終作業做完的。</p><h2 id="對課程的建議或鼓勵？"><a href="#對課程的建議或鼓勵？" class="headerlink" title="對課程的建議或鼓勵？"></a>對課程的建議或鼓勵？</h2><p>我覺得今年老師的功力又進步了，對於同學的學習狀況也更能掌握。今年少了 Ray 助教，覺得有點寂寞。</p><h2 id="身為學長姐，分享些想入坑的新同學一些勉勵的話"><a href="#身為學長姐，分享些想入坑的新同學一些勉勵的話" class="headerlink" title="身為學長姐，分享些想入坑的新同學一些勉勵的話"></a>身為學長姐，分享些想入坑的新同學一些勉勵的話</h2><p>每日任務一定要做，小小的練習卻能把基礎穩穩地札好。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;當初為什麼報名這堂課？&quot;&gt;&lt;a href=&quot;#當初為什麼報名這堂課？&quot; class=&quot;headerlink&quot; title=&quot;當初為什麼報名這堂課？&quot;&gt;&lt;/a&gt;當初為什麼報名這堂課？&lt;/h2&gt;&lt;p&gt;我曾經參加過 2022 春季 VUE 直播班，後來去當了一陣子的 P</summary>
      
    
    
    
    <category term="雜記" scheme="https://popeye-ux.github.io/categories/%E9%9B%9C%E8%A8%98/"/>
    
    
    <category term="雜記" scheme="https://popeye-ux.github.io/tags/%E9%9B%9C%E8%A8%98/"/>
    
  </entry>
  
  <entry>
    <title>Vee-Validate 4 表單驗證簡單上手</title>
    <link href="https://popeye-ux.github.io/2023/02/18/vue-vee-validate4/"/>
    <id>https://popeye-ux.github.io/2023/02/18/vue-vee-validate4/</id>
    <published>2023-02-17T16:27:46.000Z</published>
    <updated>2023-02-17T16:34:32.436Z</updated>
    
    <content type="html"><![CDATA[<p>在開發中驗證表單欄位是一件前後端都必須處理的事情，不僅前端要驗證使用者輸入的欄位資訊，後端也要驗證送往伺服器的資料。</p><p>而前端的驗證如果要自己寫，會牽扯到正則，而且也會容易掛一漏萬，所以如果要在 Vue 裡面進行表單驗證，通常會引用套件，但是並不是所有的套件都支援中文語系。</p><p>Vee-Validate 是目前比較完整而且支援繁體中文語系的驗證套件。雖然說是套件，如果你去看 Vee-Validate 的官網，保證看完了，還是一頭霧水。所以我整理了 Vee-Validate 的使用方法，以防自己下次要用又失憶了。</p><p>Vee-Validate 官網：<a href="https://vee-validate.logaretm.com/v4/">https://vee-validate.logaretm.com/v4/</a></p><p>因為目前我所使用的是 Vue 3 的版本，所以要搭配 Vee-Validate 4.0 以上版本，在安裝的時候要注意版本相匹配的問題。</p><h2 id="安裝-Vee-Validate"><a href="#安裝-Vee-Validate" class="headerlink" title="安裝 Vee-Validate"></a>安裝 Vee-Validate</h2><p>安裝時除了 Vee-Validate 主程式之外，還要安裝驗證規則（rules）及多國語系（i18n）。</p><figure><div class="code-wrapper"><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx">npm i vee<span class="token operator">-</span>validate @vee<span class="token operator">-</span>validate<span class="token operator">/</span>i18n @vee<span class="token operator">-</span>validate<span class="token operator">/</span>rules @vee<span class="token operator">-</span>validate<span class="token operator">/</span>i18n <span class="token operator">--</span>save<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure><p>只要在 main.js 中設定，多國語系（i18n）就會把驗證的錯誤訊息轉成繁體中文。</p><p>例如： “email”: “{field} 須為有效的電子信箱”, {field} 的部分會填入對應的欄位名稱。</p><p><a href="https://github.com/logaretm/vee-validate/blob/vee-validate%404.1.16/packages/i18n/src/locale/zh_TW.json">繁體中文驗證顯示內容</a>。</p><h2 id="main-js-設定"><a href="#main-js-設定" class="headerlink" title="main.js 設定"></a>main.js 設定</h2><p>在 main.js 中引入套件之外，同時把相關的規則及元件做全域註冊，就不用在每個需要做驗證的 vue 檔案中一一匯入。</p><figure><div class="code-wrapper"><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> createApp <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"vue"</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> createPinia <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"pinia"</span><span class="token punctuation">;</span><span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">"./App.vue"</span><span class="token punctuation">;</span><span class="token keyword">import</span> router <span class="token keyword">from</span> <span class="token string">"./router"</span><span class="token punctuation">;</span><span class="token comment">// 匯入 vee-validate 主套件</span><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> Field<span class="token punctuation">,</span> Form<span class="token punctuation">,</span> ErrorMessage<span class="token punctuation">,</span> defineRule<span class="token punctuation">,</span> configure <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"vee-validate"</span><span class="token punctuation">;</span><span class="token comment">// 匯入 vee-validate 相關規則</span><span class="token keyword">import</span> <span class="token punctuation">&#123;</span>  required<span class="token punctuation">,</span>  email<span class="token punctuation">,</span>  min<span class="token punctuation">,</span>  numeric<span class="token punctuation">,</span>  max_value<span class="token punctuation">,</span>  min_value<span class="token punctuation">,</span>  between<span class="token punctuation">,</span>  digits<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"@vee-validate/rules"</span><span class="token punctuation">;</span><span class="token comment">// import * as rules from '@vee-validate/rules';</span><span class="token comment">// 匯入多國語系的功能</span><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> localize<span class="token punctuation">,</span> setLocale <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"@vee-validate/i18n"</span><span class="token punctuation">;</span><span class="token comment">// 匯入繁體中文語系檔案</span><span class="token keyword">import</span> zhTW <span class="token keyword">from</span> <span class="token string">"@vee-validate/i18n/dist/locale/zh_TW.json"</span><span class="token punctuation">;</span><span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 定義驗證規則</span><span class="token function">defineRule</span><span class="token punctuation">(</span><span class="token string">"required"</span><span class="token punctuation">,</span> required<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">defineRule</span><span class="token punctuation">(</span><span class="token string">"email"</span><span class="token punctuation">,</span> email<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">defineRule</span><span class="token punctuation">(</span><span class="token string">"min"</span><span class="token punctuation">,</span> min<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//  數字，但是小數點會認為是非數字</span><span class="token function">defineRule</span><span class="token punctuation">(</span><span class="token string">"numeric"</span><span class="token punctuation">,</span> numeric<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">defineRule</span><span class="token punctuation">(</span><span class="token string">"max_value"</span><span class="token punctuation">,</span> max_value<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">defineRule</span><span class="token punctuation">(</span><span class="token string">"min_value"</span><span class="token punctuation">,</span> min_value<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// between 可以驗證 某個區間的數字，例如 5~10</span><span class="token function">defineRule</span><span class="token punctuation">(</span><span class="token string">"between"</span><span class="token punctuation">,</span> between<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// digits 限制小數點後幾位數</span><span class="token function">defineRule</span><span class="token punctuation">(</span><span class="token string">"digits"</span><span class="token punctuation">,</span> digits<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 設定 vee-validate 全域規則</span><span class="token function">configure</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>  <span class="token literal-property property">generateMessage</span><span class="token operator">:</span> <span class="token function">localize</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> <span class="token literal-property property">zh_TW</span><span class="token operator">:</span> zhTW <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 載入繁體中文語系</span>  <span class="token literal-property property">validateOnInput</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 當輸入任何內容直接進行驗證</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 設定預設語系</span><span class="token function">setLocale</span><span class="token punctuation">(</span><span class="token string">"zh_TW"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 註冊 vee-validate 三個全域元件</span>app<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">"Form"</span><span class="token punctuation">,</span> Form<span class="token punctuation">)</span><span class="token punctuation">;</span>app<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">"Field"</span><span class="token punctuation">,</span> Field<span class="token punctuation">)</span><span class="token punctuation">;</span>app<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">"ErrorMessage"</span><span class="token punctuation">,</span> ErrorMessage<span class="token punctuation">)</span><span class="token punctuation">;</span>app<span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">"#app"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><p>也可以使用這種方法把全部的規則都引入，就不用像上面一樣一一定義驗證規則。</p><figure><div class="code-wrapper"><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> defineRule <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'vee-validate'</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> rules <span class="token keyword">from</span> <span class="token string">'@vee-validate/rules'</span><span class="token punctuation">;</span>Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>rules<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">rule</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>  <span class="token function">defineRule</span><span class="token punctuation">(</span>rule<span class="token punctuation">,</span> rules<span class="token punctuation">[</span>rule<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><h2 id="表單欄位的設定"><a href="#表單欄位的設定" class="headerlink" title="表單欄位的設定"></a>表單欄位的設定</h2><p>表單的頭尾要用大寫 F 開頭的 <code>&lt;Form&gt;</code> 包住， <code>v-slot=”&#123; errors &#125;”</code> 則對應到錯誤訊息欄位。</p><figure><div class="code-wrapper"><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Form</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form<span class="token punctuation">"</span></span> <span class="token attr-name">@submit</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>submitOrders<span class="token punctuation">"</span></span> <span class="token attr-name">v-slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123; errors &#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Form</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></div></figure><p>原本的 <code>&lt;input&gt;</code>Z標籤用 <Field> 標籤取代， 其中 <code>name</code> 會對應到 <ErrorMessage> 的 <code>name</code>，如果欄位輸入錯誤，以 email 欄位為例，就會出現：「email 為必填」。</p><p><code>rules=&quot;email|required&quot;</code> 則會去抓 main.js 中定義的表單規則。</p><p><code>:class=&quot;&#123; &#39;is-invalid&#39;: errors[&#39;email&#39;] &#125;&quot;</code> 輸入驗證錯誤則會綁定 Bootstrap 中 is-invalid 樣式，讓輸入框的 border 變成紅色的。</p><figure><div class="code-wrapper"><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Field</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>email<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>email<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>email<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-control<span class="token punctuation">"</span></span> <span class="token attr-name">rules</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>email|required<span class="token punctuation">"</span></span> <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123; 'is-invalid': errors['email'] &#125;<span class="token punctuation">"</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>請輸入 Email<span class="token punctuation">"</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form.user.email<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Field</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ErrorMessage</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>email<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>invalid-feedback<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ErrorMessage</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></div></figure><p><code>&lt;button&gt;</code> 的 <code>disabled</code> 有綁訂到 Vee-Validate 的 <code>errors</code> 物件，如果陣列長度大於 0，按鈕就不能按。</p><figure><div class="code-wrapper"><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>btn btn-lg w-100 add-btn<span class="token punctuation">"</span></span> <span class="token attr-name">@submit</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>submitOrders<span class="token punctuation">"</span></span> <span class="token attr-name">:disabled</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Object.keys(errors).length > 0<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>      送出訂單<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></div></figure><figure><div class="code-wrapper"><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Form</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form<span class="token punctuation">"</span></span> <span class="token attr-name">@submit</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>submitOrders<span class="token punctuation">"</span></span> <span class="token attr-name">v-slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123; errors &#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>mb-3<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>email<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-label<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Email<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-note<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>*<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Field</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>email<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>email<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>email<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-control<span class="token punctuation">"</span></span> <span class="token attr-name">rules</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>email|required<span class="token punctuation">"</span></span> <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123; 'is-invalid': errors['email'] &#125;<span class="token punctuation">"</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>請輸入 Email<span class="token punctuation">"</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form.user.email<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Field</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ErrorMessage</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>email<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>invalid-feedback<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ErrorMessage</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>mb-3<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-label<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>收件人姓名<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-note<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>*<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Field</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>姓名<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-control<span class="token punctuation">"</span></span> <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123; 'is-invalid': errors['姓名'] &#125;<span class="token punctuation">"</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>請輸入姓名<span class="token punctuation">"</span></span> <span class="token attr-name">rules</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>required<span class="token punctuation">"</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form.user.name<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Field</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ErrorMessage</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>姓名<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>invalid-feedback<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ErrorMessage</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>mb-3<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tel<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-label<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>收件人電話<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-note<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>*<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Field</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tel<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>電話<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-control<span class="token punctuation">"</span></span> <span class="token attr-name">:rules</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>isPhone<span class="token punctuation">"</span></span> <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123; 'is-invalid': errors['電話'] &#125;<span class="token punctuation">"</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>請輸入電話<span class="token punctuation">"</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form.user.tel<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Field</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ErrorMessage</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>電話<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>invalid-feedback<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ErrorMessage</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>mb-3<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>address<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-label<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>收件人地址<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-note<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>*<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Field</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>address<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>地址<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-control<span class="token punctuation">"</span></span> <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123; 'is-invalid': errors['地址'] &#125;<span class="token punctuation">"</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>請輸入地址<span class="token punctuation">"</span></span> <span class="token attr-name">rules</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>required<span class="token punctuation">"</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form.user.address<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Field</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ErrorMessage</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>地址<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>invalid-feedback<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ErrorMessage</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>mb-3<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>message<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-label<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>留言<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>textarea</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>message<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-control<span class="token punctuation">"</span></span> <span class="token attr-name">cols</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>30<span class="token punctuation">"</span></span> <span class="token attr-name">rows</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>10<span class="token punctuation">"</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form.message<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>textarea</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text-end<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>btn btn-lg w-100 add-btn<span class="token punctuation">"</span></span> <span class="token attr-name">@submit</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>submitOrders<span class="token punctuation">"</span></span> <span class="token attr-name">:disabled</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Object.keys(errors).length > 0<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>      送出訂單    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Form</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><h2 id="Script-中的設定"><a href="#Script-中的設定" class="headerlink" title="Script 中的設定"></a>Script 中的設定</h2><p>表單的 <code>v-model </code> 有綁訂到 data 的 form 物件。 button 綁定的 submitOrders 方法是打 API 把訂單送去後端。</p><figure><div class="code-wrapper"><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>            <span class="token literal-property property">form</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>        <span class="token literal-property property">user</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>          <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>          <span class="token literal-property property">email</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>          <span class="token literal-property property">tel</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>          <span class="token literal-property property">address</span><span class="token operator">:</span> <span class="token string">''</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>        <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">''</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>         <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><p>其中手機號碼的驗證規則，也寫在 methods 裡面：</p><figure><div class="code-wrapper"><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// validate</span>    <span class="token function">isPhone</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">const</span> phoneNumber <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^(09)[0-9]&#123;8&#125;$</span><span class="token regex-delimiter">/</span></span>      <span class="token keyword">return</span> phoneNumber<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token string">'需要正確的電話號碼'</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>      <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><p>久久寫一次驗證，發覺自己有點失意，寫個筆記，希望下次可以不用花那麼久的時間重新探索。</p><p>參考：</p><ul><li><a href="https://stackblitz.com/edit/vue-3-veevalidate-form-validation-example?file=src/App.vue">https://stackblitz.com/edit/vue-3-veevalidate-form-validation-example?file=src%2FApp.vue</a></li><li><a href="https://www.npmjs.com/package/@vee-validate/rules">https:&#x2F;&#x2F;www.npmjs.com&#x2F;package&#x2F;@vee-validate&#x2F;rules</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;在開發中驗證表單欄位是一件前後端都必須處理的事情，不僅前端要驗證使用者輸入的欄位資訊，後端也要驗證送往伺服器的資料。&lt;/p&gt;
&lt;p&gt;而前端的驗證如果要自己寫，會牽扯到正則，而且也會容易掛一漏萬，所以如果要在 Vue 裡面進行表單驗證，通常會引用套件，但是並不是所有的套件都支</summary>
      
    
    
    
    <category term="Vue3" scheme="https://popeye-ux.github.io/categories/Vue3/"/>
    
    
    <category term="Vue3, JavaScript, Vee-Valdate, Validate" scheme="https://popeye-ux.github.io/tags/Vue3-JavaScript-Vee-Valdate-Validate/"/>
    
  </entry>
  
  <entry>
    <title>Vite 設定開發環境與正式環境使用不同的 G-tag</title>
    <link href="https://popeye-ux.github.io/2023/02/12/vue-env-gtag/"/>
    <id>https://popeye-ux.github.io/2023/02/12/vue-env-gtag/</id>
    <published>2023-02-11T17:29:27.000Z</published>
    <updated>2023-02-11T17:31:09.410Z</updated>
    
    <content type="html"><![CDATA[<p>PM 開了一項需求，希望在開發環境與正式部屬環境使用不同的 Google-Analytics 的評估碼 g-tag，之前在開發的時候都是寫死的，剛聽到這個需求，我有點不明所以。</p><p>請教了有處理過這個 issue 的前輩，才明白是使用了 vite-plugin-html 這個插件，分別在不同環境的env 檔案寫入對應的 g-tag，然後動態依據不同環境替換不同的 g-tag。</p><p>首先安裝 vite-plugin-html ：</p><figure><div class="code-wrapper"><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx">npm i vite<span class="token operator">-</span>plugin<span class="token operator">-</span>html <span class="token operator">-</span><span class="token constant">D</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure><p>然後 vite 的根目錄，建立 .env 、.env.development 及 .env.production 三個檔案。 </p><ul><li>.env 通用的環境變數</li><li>.env.development 開發中的環境變數</li><li>.env.production 產品完成布署的環境</li></ul><p><img src="https://i.imgur.com/GYSY1XB.jpg"></p><p>.env 裡面寫入：</p><figure><div class="code-wrapper"><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token constant">VITE_BASE_URL</span><span class="token operator">=</span><span class="token operator">/</span><span class="token constant">VITE_GATAG</span><span class="token operator">=</span><span class="token constant">G</span><span class="token operator">-</span><span class="token constant">AAAAAAAAAA</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></div></figure><p>.env.development 裡面寫入：</p><figure><div class="code-wrapper"><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token constant">VITE_GATAG</span><span class="token operator">-</span><span class="token constant">AAAAAAAAAA</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure><p>.env.production 裡面寫入：</p><figure><div class="code-wrapper"><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token constant">VITE_GATAG</span><span class="token operator">=</span><span class="token constant">G</span><span class="token operator">-</span><span class="token constant">BBBBBBBBBB</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure><p>原本的 vite.config.js 長這樣：</p><figure><div class="code-wrapper"><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> fileURLToPath<span class="token punctuation">,</span> <span class="token constant">URL</span> <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"node:url"</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> defineConfig <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"vite"</span><span class="token punctuation">;</span><span class="token keyword">import</span> vue <span class="token keyword">from</span> <span class="token string">"@vitejs/plugin-vue"</span><span class="token punctuation">;</span><span class="token comment">// https://vitejs.dev/config/</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">vue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token literal-property property">resolve</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token literal-property property">alias</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>      <span class="token string-property property">"@"</span><span class="token operator">:</span> <span class="token function">fileURLToPath</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span><span class="token string">"./src"</span><span class="token punctuation">,</span> <span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token comment">// 解決 Network: use --host to expose</span>  <span class="token literal-property property">server</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token literal-property property">host</span><span class="token operator">:</span> <span class="token string">"0.0.0.0"</span><span class="token punctuation">,</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><p>然後現在把 vite.config.js 改成：</p><figure><div class="code-wrapper"><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> fileURLToPath<span class="token punctuation">,</span> <span class="token constant">URL</span> <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"node:url"</span><span class="token punctuation">;</span><span class="token comment">// import path from "path";</span><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> defineConfig<span class="token punctuation">,</span> loadEnv <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"vite"</span><span class="token punctuation">;</span><span class="token keyword">import</span> vue <span class="token keyword">from</span> <span class="token string">"@vitejs/plugin-vue"</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> createHtmlPlugin <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"vite-plugin-html"</span><span class="token punctuation">;</span><span class="token comment">// https://vitejs.dev/config/</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">&#123;</span> mode <span class="token punctuation">&#125;</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>  process<span class="token punctuation">.</span>env <span class="token operator">=</span> <span class="token punctuation">&#123;</span> <span class="token operator">...</span>process<span class="token punctuation">.</span>env<span class="token punctuation">,</span> <span class="token operator">...</span><span class="token function">loadEnv</span><span class="token punctuation">(</span>mode<span class="token punctuation">,</span> process<span class="token punctuation">.</span><span class="token function">cwd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>    <span class="token literal-property property">base</span><span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">VITE_BASE_URL</span><span class="token punctuation">,</span>    <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>      <span class="token function">vue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>      <span class="token function">createHtmlPlugin</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>        <span class="token literal-property property">minify</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>        <span class="token literal-property property">inject</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>          <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>            <span class="token constant">GA4</span><span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">VITE_GATAG</span><span class="token punctuation">,</span>            <span class="token comment">// injectScript: `&lt;script src="./inject.js">&lt;/script>`,</span>          <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token literal-property property">resolve</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>      <span class="token literal-property property">alias</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>        <span class="token string-property property">"@"</span><span class="token operator">:</span> <span class="token function">fileURLToPath</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span><span class="token string">"./src"</span><span class="token punctuation">,</span> <span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><p>然後修改根目錄的 index.html，把原本放 g-tag 的地方替換成 &lt;%- GATAG %&gt;：</p><figure><div class="code-wrapper"><pre class="line-numbers language-htmlmixed" data-language="htmlmixed"><code class="language-htmlmixed">  &lt;!DOCTYPE html&gt;&lt;html lang&#x3D;&quot;en&quot;&gt;  &lt;head&gt;    &lt;meta charset&#x3D;&quot;UTF-8&quot; &#x2F;&gt;    &lt;link rel&#x3D;&quot;icon&quot; href&#x3D;&quot;&#x2F;favicon.ico&quot; &#x2F;&gt;    &lt;meta name&#x3D;&quot;viewport&quot; content&#x3D;&quot;width&#x3D;device-width, initial-scale&#x3D;1.0&quot; &#x2F;&gt;    &lt;title&gt;標題&lt;&#x2F;title&gt;    &lt;!-- Global site tag (gtag.js) - Google Analytics --&gt;    &lt;script      async      src&#x3D;&quot;https:&#x2F;&#x2F;www.googletagmanager.com&#x2F;gtag&#x2F;js?id&#x3D;&lt;%- GATAG %&gt;&quot;    &gt;&lt;&#x2F;script&gt;    &lt;script&gt;      window.dataLayer &#x3D; window.dataLayer || [];      function gtag() &#123;        dataLayer.push(arguments);      &#125;      gtag(&quot;js&quot;, new Date());      gtag(&quot;config&quot;, &quot;&lt;%- GATAG %&gt;&quot;);    &lt;&#x2F;script&gt;  &lt;&#x2F;head&gt;  &lt;body&gt;    &lt;div id&#x3D;&quot;app&quot;&gt;&lt;&#x2F;div&gt;    &lt;script type&#x3D;&quot;module&quot; src&#x3D;&quot;&#x2F;src&#x2F;main.js&quot;&gt;&lt;&#x2F;script&gt;  &lt;&#x2F;body&gt;&lt;&#x2F;html&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;PM 開了一項需求，希望在開發環境與正式部屬環境使用不同的 Google-Analytics 的評估碼 g-tag，之前在開發的時候都是寫死的，剛聽到這個需求，我有點不明所以。&lt;/p&gt;
&lt;p&gt;請教了有處理過這個 issue 的前輩，才明白是使用了 vite-plugin-h</summary>
      
    
    
    
    <category term="Vue3" scheme="https://popeye-ux.github.io/categories/Vue3/"/>
    
    
    <category term="Vue3, Javascript, env, g-tag" scheme="https://popeye-ux.github.io/tags/Vue3-Javascript-env-g-tag/"/>
    
  </entry>
  
  <entry>
    <title>Vue router 有沒有 hash 有差別</title>
    <link href="https://popeye-ux.github.io/2023/02/12/vue-router-historymode/"/>
    <id>https://popeye-ux.github.io/2023/02/12/vue-router-historymode/</id>
    <published>2023-02-11T17:10:36.000Z</published>
    <updated>2023-02-11T17:19:33.697Z</updated>
    
    <content type="html"><![CDATA[<p>Vue 3 主要有 2 種處理路由的方式，分別是 Hash Mode 以及 HTML5 (History API) Mode 兩種。(其實還有一種 abstract 模式)</p><h2 id="createWebHashHistory-模式"><a href="#createWebHashHistory-模式" class="headerlink" title="createWebHashHistory 模式"></a>createWebHashHistory 模式</h2><p><img src="https://i.imgur.com/7Hp9899.png"><br>網址列多了一個 <code>#</code> 字號。</p><p>Hash 也就是 我們用來設定連結錨點的那個 <code>#</code> 字號。</p><figure><div class="code-wrapper"><pre class="line-numbers language-htmlmixed" data-language="htmlmixed"><code class="language-htmlmixed">&lt;a hhref&#x3D;&quot;https:&#x2F;&#x2F;xxx.com&#x2F;#hashmark&quot;&gt;&lt;&#x2F;a&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure><p>利用改變<code>#</code>後面對應到 HTML 檔案 <code>id</code> 的文字，就可以不用換頁，又可以在瀏覽器中留下「上一頁」與「下一頁」的歷史紀錄，而且切換時不會刷新頁面。</p><p>createWebHashHistory 模式預設的路徑為 location.pathname 或 &#x2F; 根目錄，也可以改變預設路徑，使用 createWebHashHistory(‘&#x2F;folder&#x2F;‘)，就可以對應到 <a href="https://xxxx.com/folder/#">https://xxxx.com/folder/#</a> 。</p><p>Hash 模式完全是前端模式，只在瀏覽器中動作，不牽扯後端，缺點是對 SEO 不利，因為搜尋引擎會自動忽略 URL 有 <code>#</code> 的部分。</p><p>router.js</p><figure><div class="code-wrapper"><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> createRouter<span class="token punctuation">,</span> createWebHashHistory <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'vue-router'</span><span class="token keyword">import</span> HomeView <span class="token keyword">from</span> <span class="token string">'../views/HomeView.vue'</span><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createRouter</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>  <span class="token literal-property property">history</span><span class="token operator">:</span> <span class="token function">createWebHashHistory</span><span class="token punctuation">(</span><span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">BASE_URL</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token literal-property property">routes</span><span class="token operator">:</span> <span class="token punctuation">[</span>    <span class="token punctuation">&#123;</span>      <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'home'</span><span class="token punctuation">,</span>      <span class="token literal-property property">component</span><span class="token operator">:</span> HomeView    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token punctuation">&#123;</span>      <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/about'</span><span class="token punctuation">,</span>      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'about'</span><span class="token punctuation">,</span>      <span class="token comment">// route level code-splitting</span>      <span class="token comment">// this generates a separate chunk (About.[hash].js) for this route</span>      <span class="token comment">// which is lazy-loaded when the route is visited.</span>      <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../views/AboutView.vue'</span><span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">]</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token keyword">export</span> <span class="token keyword">default</span> router<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><h2 id="createWebHistory-模式"><a href="#createWebHistory-模式" class="headerlink" title="createWebHistory 模式"></a>createWebHistory 模式</h2><p><img src="https://i.imgur.com/VmULArB.png"><br>如果是 <code>createWebHistory</code> 就是採用 HTML5 的 History API，可以使用 <code>pushState()</code>、<code>replaceState()</code> 等方法更新 URL，搭配原有的 history.go()、history.back()來指定頁面路徑切換，如，也提供了 state 物件讓開發這可以暫時存取網頁的狀態。</p><figure><div class="code-wrapper"><pre class="line-numbers language-htmlmixed" data-language="htmlmixed"><code class="language-htmlmixed">&lt;a hhref&#x3D;&quot;https:&#x2F;&#x2F;xxx.com&#x2F;path&quot;&gt;&lt;&#x2F;a&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure><p>需要搭配後端路由，如果沒有後端的配置，使用者直接輸入網址，或瀏覽器重整網頁的時候會找不到網頁，跳 404 頁面。</p><p>router.js</p><figure><div class="code-wrapper"><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> createRouter<span class="token punctuation">,</span> createWebHistory <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'vue-router'</span><span class="token keyword">import</span> HomeView <span class="token keyword">from</span> <span class="token string">'../views/HomeView.vue'</span><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createRouter</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>  <span class="token literal-property property">history</span><span class="token operator">:</span> <span class="token function">createWebHistory</span><span class="token punctuation">(</span><span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">BASE_URL</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token literal-property property">routes</span><span class="token operator">:</span> <span class="token punctuation">[</span>    <span class="token punctuation">&#123;</span>      <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'home'</span><span class="token punctuation">,</span>      <span class="token literal-property property">component</span><span class="token operator">:</span> HomeView    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token punctuation">&#123;</span>      <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/about'</span><span class="token punctuation">,</span>      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'about'</span><span class="token punctuation">,</span>      <span class="token comment">// route level code-splitting</span>      <span class="token comment">// this generates a separate chunk (About.[hash].js) for this route</span>      <span class="token comment">// which is lazy-loaded when the route is visited.</span>      <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../views/AboutView.vue'</span><span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">]</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token keyword">export</span> <span class="token keyword">default</span> router<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;Vue 3 主要有 2 種處理路由的方式，分別是 Hash Mode 以及 HTML5 (History API) Mode 兩種。(其實還有一種 abstract 模式)&lt;/p&gt;
&lt;h2 id=&quot;createWebHashHistory-模式&quot;&gt;&lt;a href=&quot;#cre</summary>
      
    
    
    
    <category term="Vue3" scheme="https://popeye-ux.github.io/categories/Vue3/"/>
    
    
    <category term="Vue3, JavaScript, createWebHashHistory, createWebHistory" scheme="https://popeye-ux.github.io/tags/Vue3-JavaScript-createWebHashHistory-createWebHistory/"/>
    
  </entry>
  
  <entry>
    <title>在 Vue 裡面使用 pinia 管理狀態</title>
    <link href="https://popeye-ux.github.io/2023/02/06/piniabeginner/"/>
    <id>https://popeye-ux.github.io/2023/02/06/piniabeginner/</id>
    <published>2023-02-05T16:28:02.000Z</published>
    <updated>2023-02-11T17:14:12.137Z</updated>
    
    <content type="html"><![CDATA[<p>pinia 是 Vue 官方推薦的狀態管理工具，可以解決跨元件之間資料傳遞要反覆的 props 及 emit 的問題，只要把資料跟方法放在 store 裡面，就可以讓所有的元件取用，不但傳遞變簡單了，在管理資料上面也變得更清楚。</p><p>首先安裝 pinia</p><figure><div class="code-wrapper"><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx">npm install pinia<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure><p>main.js 中初始化</p><figure><div class="code-wrapper"><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> createApp <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"vue"</span><span class="token punctuation">;</span><span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">"./App.vue"</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> createPinia <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"pinia"</span><span class="token punctuation">;</span><span class="token keyword">const</span> pinia <span class="token operator">=</span> <span class="token function">createPinia</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span><span class="token punctuation">;</span>app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>pinia<span class="token punctuation">)</span><span class="token punctuation">;</span>app<span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">"#app"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><p>在 src 下面建立 stores 資料夾，然後在 stores 裡面建立 user.js。</p><figure><div class="code-wrapper"><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> defineStore <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"pinia"</span><span class="token punctuation">;</span><span class="token comment">// userStore 為自定義名稱</span><span class="token comment">// &#123;屬性參數&#125;</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineStore</span><span class="token punctuation">(</span><span class="token string">"userStore"</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>  <span class="token comment">// data</span>  <span class="token function-variable function">state</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">&#123;</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"鋼鐵人"</span><span class="token punctuation">,</span> <span class="token literal-property property">friend</span><span class="token operator">:</span> <span class="token string">"蜘蛛人"</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment">// computed</span>  <span class="token literal-property property">getters</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token function">getUserName</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>state<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string"> 和 </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>state<span class="token punctuation">.</span>friend<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">是好朋友</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token comment">// methods</span>  <span class="token literal-property property">actions</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// 可以使用 this，所以不用箭頭函式</span>    <span class="token function">updateFriend</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>friend <span class="token operator">=</span> <span class="token string">"美國隊長"</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><p><img src="https://i.imgur.com/Et55AcC.png"></p><p>HelloWorld.vue</p><figure><div class="code-wrapper"><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span><span class="token plain-text">  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>hello<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token plain-text">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span><span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> msg <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span><span class="token plain-text">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">></span></span><span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> name <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token plain-text">,</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> friend <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span><span class="token plain-text">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">></span></span><span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> getUserName <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span><span class="token plain-text">    &lt;button type="button" @click="updateFriend">更新復仇者好友</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><span class="token plain-text">  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token plain-text"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token plain-text">import &#123; mapState, mapActions &#125; from "pinia";import userStore from "@/stores/user";export default &#123;  name: "HelloWorld",  props: &#123;    msg: String,  &#125;,  computed: &#123;    ...mapState(userStore, ["name", "friend", "getUserName"]),  &#125;,  methods: &#123;    ...mapActions(userStore, ["updateFriend"]),  &#125;,&#125;;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><iframe src="https://codesandbox.io/embed/pinia-option-api-t0z4n8?fontsize=14&hidenavigation=1&theme=dark"     style="width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;"     title="pinia-option-api"     allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking"     sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"   ></iframe><h1 id="在-Composition-中使用-pinia"><a href="#在-Composition-中使用-pinia" class="headerlink" title="在 Composition 中使用 pinia"></a>在 Composition 中使用 pinia</h1><p>簡單初始化，首先</p><figure><div class="code-wrapper"><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token keyword">import</span> userStore <span class="token keyword">from</span> <span class="token string">"@/stores/user"</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure><h3 id="使用-reactive-格式"><a href="#使用-reactive-格式" class="headerlink" title="使用 reactive 格式"></a>使用 reactive 格式</h3><p>然後在 <code>setup()</code> 把 <code>userStore</code> 賦值給一個常數 <code>user</code>，記得要 把 <code>user</code> 給 <code>return</code> 出去。</p><p>然後在 HTML 中使用 <code>&#123;&#123; user.變數名稱或方法 &#125;&#125;</code> ， 就可以綁定 <code>user.js</code> 裡面 <code>state</code> 定義的資料、 <code>getters</code> 及 <code>actions</code> 中的方法，而且這樣的情形下，資料及方法都是 <code>reactive</code> 格式的，所以可以做到雙向綁定。</p><p>HelloWorld.vue</p><figure><div class="code-wrapper"><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span><span class="token plain-text">  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>hello<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token plain-text">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span><span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> msg <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span><span class="token plain-text">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">></span></span><span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> user<span class="token punctuation">.</span>name <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token plain-text">,</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> user<span class="token punctuation">.</span>friend <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span><span class="token plain-text">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">></span></span><span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> user<span class="token punctuation">.</span>getFriendName <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span><span class="token plain-text">    &lt;button type="button" @click="user.updateFriend">更新復仇者好友</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><span class="token plain-text">  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token plain-text"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token plain-text">import userStore from "@/stores/user";export default &#123;  name: "HelloWorld",  props: &#123;    msg: String,  &#125;,  setup() &#123;    const user = userStore();//state 中的資料為 reactive 格式    return &#123;      user,    &#125;;  &#125;,&#125;;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><iframe src="https://codesandbox.io/embed/pinia-composition-api-reactive-owzg04?fontsize=14&hidenavigation=1&theme=dark"     style="width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;"     title="pinia-composition-api-reactive"     allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking"     sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"   ></iframe><h3 id="使用-ref-格式"><a href="#使用-ref-格式" class="headerlink" title="使用 ref 格式"></a>使用 ref 格式</h3><p>要使用 <code>ref</code> 格式，除了 <code>import userStore from &quot;@/stores/user&quot;;</code>之外，還必須匯入一個 <code>pinia</code> 提供的 <code>&#123; storeToRefs &#125;</code> 方法，把 <code>store</code> 中定義的方法跟資料轉為 <code>ref</code> 格式：</p><figure><div class="code-wrapper"><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> storeToRefs <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"pinia"</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure><p>然後在 setup() 中，取出 store 中的變數及方法：</p><figure><div class="code-wrapper"><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token keyword">const</span> <span class="token punctuation">&#123;</span> name<span class="token punctuation">,</span> friend<span class="token punctuation">,</span> getFriendName <span class="token punctuation">&#125;</span> <span class="token operator">=</span> <span class="token function">storeToRefs</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 如果要改變 變數的值，記得加上 .value</span>name<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">'雷神'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></div></figure><p><code>return</code> 的時候除了 <code>user</code> 之外， <code>name</code> 、 <code>friend</code> 及 <code>getFriendName</code> 也要記得 <code>return</code> 出去。</p><p>這時 HTML 中的 <code>&#123;&#123; user.xxxx &#125;&#125;</code> 就可以拿掉了。但是如果要在 <code>setup()</code> 中更改 變數的值，就要像使用 <code>ref</code> 一樣，加上  <code>xxxx.value</code> 。</p><p>如果在 state 中不用作到雙向綁定的，就直接取出</p><figure><div class="code-wrapper"><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token comment">// 不用雙向綁定 直接取出</span><span class="token keyword">const</span>  <span class="token punctuation">&#123;</span> updateFriend <span class="token punctuation">&#125;</span> <span class="token operator">=</span> user<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></div></figure><p>HelloWorld.vue</p><figure><div class="code-wrapper"><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span><span class="token plain-text">  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>hello<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token plain-text">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span><span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> msg <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span><span class="token plain-text">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">></span></span><span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> user<span class="token punctuation">.</span>name <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token plain-text">,</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> user<span class="token punctuation">.</span>friend <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span><span class="token plain-text">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">></span></span><span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> user<span class="token punctuation">.</span>getFriendName <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span><span class="token plain-text">    &lt;!-- user 可以拿掉 -->    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">></span></span><span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> name <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token plain-text">,</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> friend <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span><span class="token plain-text">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">></span></span><span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> getFriendName <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span><span class="token plain-text">    &lt;!-- 雙向綁定也可以 -->    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>user.name<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">    &lt;button type="button" @click="user.updateFriend">更新復仇者好友</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><span class="token plain-text">  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token plain-text"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token plain-text">import &#123; storeToRefs &#125; from "pinia";import userStore from "@/stores/user";export default &#123;  name: "HelloWorld",  props: &#123;    msg: String,  &#125;,  setup() &#123;    const user = userStore();    // 轉成 ref 格式    const &#123; name, friend, getFriendName &#125; = storeToRefs(user);    // ref 格式，state 中的變數須加上 .value    name.value = "雷神";// 不用雙向綁定 直接取出    const  &#123; updateFriend &#125; = user;    return &#123;      user,      name,      friend,      getFriendName,    &#125;;  &#125;,&#125;;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><p>使用 pinia 提供的 patch 方法修改資料：</p><figure><div class="code-wrapper"><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">updateData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      user<span class="token punctuation">.</span><span class="token function">$patch</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"浩克"</span><span class="token punctuation">,</span>        <span class="token literal-property property">friend</span><span class="token operator">:</span> <span class="token string">"薩諾斯"</span><span class="token punctuation">,</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><p>使用 pinia 提供的 reset 方法重置資料：</p><figure><div class="code-wrapper"><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      user<span class="token punctuation">.</span><span class="token function">$reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></div></figure><iframe src="https://codesandbox.io/embed/pinia-composition-api-ref-qkq8gp?fontsize=14&hidenavigation=1&theme=dark"     style="width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;"     title="pinia-composition-api-ref"     allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking"     sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"   ></iframe>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;pinia 是 Vue 官方推薦的狀態管理工具，可以解決跨元件之間資料傳遞要反覆的 props 及 emit 的問題，只要把資料跟方法放在 store 裡面，就可以讓所有的元件取用，不但傳遞變簡單了，在管理資料上面也變得更清楚。&lt;/p&gt;
&lt;p&gt;首先安裝 pinia&lt;/p&gt;
</summary>
      
    
    
    
    <category term="Vue3" scheme="https://popeye-ux.github.io/categories/Vue3/"/>
    
    
    <category term="Vue, pinia, compositionAPI, optionAPI" scheme="https://popeye-ux.github.io/tags/Vue-pinia-compositionAPI-optionAPI/"/>
    
  </entry>
  
  <entry>
    <title>在 Composition API 中使用 pinia 操控 modal</title>
    <link href="https://popeye-ux.github.io/2023/01/29/modal-pinia/"/>
    <id>https://popeye-ux.github.io/2023/01/29/modal-pinia/</id>
    <published>2023-01-29T15:18:09.000Z</published>
    <updated>2023-02-11T17:13:55.118Z</updated>
    
    <content type="html"><![CDATA[<p>之前寫過一篇在 《<a href="https://popeye-ux.github.io/2023/01/27/modal-props-emit/">在 Composition API 中使用 props 與 emit 操控 modal</a>》的筆記，那時是使用 props 跟 emit 處理外部元件與內部元件之間資料傳遞的問題。</p><p>但是當有兩個以上的 modal&#x2F;彈跳視窗 的時候，第一個 modal 是開啟狀態，這時觸發第二個 modal 開啟，同時第一個 modal 要關閉。這種情形下，兩個內部元件彼此要傳遞訊息變得十分複雜，這次我試著用 pinia 來管理兩個 modal 的狀態，狀態就不再儲存在兩個 modal 元件內部。</p><h2 id="任務說明"><a href="#任務說明" class="headerlink" title="任務說明"></a>任務說明</h2><p>在 pinia 中有 <code>isFirstOpen</code> 跟 <code>isSecondOpen</code> 兩個變數，用來管理 2 個元件的開啟與關閉，預設都是 <code>false</code>， 內部元件則用 v-if 控制元件的顯示與否，在 <code>false</code> 狀態，兩個元件皆為關閉，當有一個元件被開啟，則另外一個元件的狀態則會轉為 false(預設也是 false)。</p><p>假設第一個元件是開啟狀態，<code>isFirstOpen</code> 的狀態為 <code>true</code>，第二個元件的狀態<code>isSecondOpen</code> 為 <code>false</code> 。這時去開啟第二個元件，<code>isSecondOpen</code> 轉為 <code>true</code>，則<code>isFirstOpen</code> 轉為 false，第一個元件就會關閉，反之亦然。這樣就可以達到切換2個 modal 的目的。 </p><p><img src="https://i.imgur.com/6utwNJe.jpg"></p><p>檔案結構如下：<br><img src="https://i.imgur.com/ijzwq3G.jpg"></p><h2 id="main-js-引入-pinia"><a href="#main-js-引入-pinia" class="headerlink" title="main.js 引入 pinia"></a>main.js 引入 pinia</h2><figure><div class="code-wrapper"><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> createApp <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"vue"</span><span class="token punctuation">;</span><span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">"./App.vue"</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> createPinia <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"pinia"</span><span class="token punctuation">;</span><span class="token keyword">const</span> pinia <span class="token operator">=</span> <span class="token function">createPinia</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span><span class="token punctuation">;</span>app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>pinia<span class="token punctuation">)</span><span class="token punctuation">;</span>app<span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">"#app"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><h2 id="pinia-中-modalControl-js-的設定"><a href="#pinia-中-modalControl-js-的設定" class="headerlink" title="pinia 中 modalControl.js 的設定"></a>pinia 中 modalControl.js 的設定</h2><p>stores&#x2F;modalControl.js</p><figure><div class="code-wrapper"><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> defineStore <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"pinia"</span><span class="token punctuation">;</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineStore</span><span class="token punctuation">(</span><span class="token string">"modalControl"</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>  <span class="token function-variable function">state</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">&#123;</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"胖胖"</span><span class="token punctuation">,</span> <span class="token literal-property property">isFirstOpen</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token literal-property property">isSecondOpen</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><h2 id="app-vue-中的設定"><a href="#app-vue-中的設定" class="headerlink" title="app.vue 中的設定"></a>app.vue 中的設定</h2><ul><li><p>把兩個元件 import 進來，當成子元件。</p></li><li><p>把 pinia 中的狀態及方法匯入。<br><code>import &#123; storeToRefs &#125; from &quot;pinia&quot;</code><br><code>import modalControl from &quot;@/stores/modalControl.js&quot;;</code></p></li><li><p>設定開啟及切換 modal 的方法</p></li></ul><figure><div class="code-wrapper"><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token keyword">const</span> <span class="token function-variable function">openModal</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      isFirstOpen<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>      isSecondOpen<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    <span class="token comment">// 開啟第二個 modal，關閉第一個 modal</span>    <span class="token keyword">const</span> <span class="token function-variable function">openSecond</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      isSecondOpen<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>      isFirstOpen<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><ul><li>將兩個按鈕綁上開啟 modal 的方法。</li></ul><figure><div class="code-wrapper"><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token operator">&lt;</span>button type<span class="token operator">=</span><span class="token string">"button"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"btn"</span> @click<span class="token operator">=</span><span class="token string">"openModal"</span><span class="token operator">></span>showModal<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><span class="token operator">&lt;</span>button type<span class="token operator">=</span><span class="token string">"button"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"btn"</span> @click<span class="token operator">=</span><span class="token string">"openSecond"</span><span class="token operator">></span>showModal2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></div></figure><p>app.vue</p><figure><div class="code-wrapper"><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span><span class="token plain-text">  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>up<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token plain-text">    &lt;button type="button" class="btn" @click="openModal">showModal</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><span class="token plain-text">    &lt;button type="button" class="btn" @click="openSecond">showModal2</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><span class="token plain-text">  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">  &lt;!-- &lt;Modal :open="isOpen" @close="isOpen = !isOpen"> -->  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Modal</span></span><span class="token punctuation">></span></span><span class="token plain-text">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token plain-text">      </span><span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> name <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token plain-text">      Lorem ipsum dolor, sit amet consectetur adipisicing elit. Quo molestiae      consectetur blanditiis aspernatur velit autem labore amet    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span class="token plain-text">  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Modal</span></span><span class="token punctuation">></span></span><span class="token plain-text">  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">SecondModal</span></span><span class="token punctuation">></span></span><span class="token plain-text">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token plain-text">      </span><span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> name <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token plain-text">      Lorem ipsum dolor, sit amet consectetur adipisicing elit. Quo molestiae      consectetur blanditiis aspernatur velit autem labore amet    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span class="token plain-text">  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">SecondModal</span></span><span class="token punctuation">></span></span><span class="token plain-text"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token plain-text">import &#123; ref &#125; from "vue";// 第一個元件import Modal from "./components/ModalView.vue";// 第二個元件import SecondModal from "./components/SecondModal.vue";// pinia 中共用的狀態import modalControl from "@/stores/modalControl.js";// 使用 pinia 中資料的方法import &#123; storeToRefs &#125; from "pinia";// import HelloWorldVue from "./components/HelloWorld.vue";export default &#123;  components: &#123; Modal, SecondModal &#125;,  setup() &#123;    // 把 pinia 中元件共用的狀態，賦值給 modaltest 這個變數    const modaltest = modalControl();    // 解構    const &#123; name, isFirstOpen, isSecondOpen &#125; = storeToRefs(modaltest);    // const isOpen = ref(false);    // 開啟第一個 modal，關閉第二個 modal    const openModal = function () &#123;      isFirstOpen.value = true;      isSecondOpen.value = false;    &#125;;    // 開啟第二個 modal，關閉第一個 modal    const openSecond = function () &#123;      isSecondOpen.value = true;      isFirstOpen.value = false;    &#125;;    return &#123;      isFirstOpen,      modalControl,      name,      isSecondOpen,      openModal,      openSecond,    &#125;;  &#125;,&#125;;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token plain-text">.up &#123;  z-index: 500;  cursor: pointer;&#125;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><h2 id="2-個-modal-元件的設定"><a href="#2-個-modal-元件的設定" class="headerlink" title="2 個 modal 元件的設定"></a>2 個 modal 元件的設定</h2><p>ModalView.vue</p><figure><div class="code-wrapper"><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span><span class="token plain-text">  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transition</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fade<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token plain-text">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vue-modal<span class="token punctuation">"</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>isFirstOpen<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transition</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>drop-in<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token plain-text">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vue-modal-inner<span class="token punctuation">"</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>isFirstOpen<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token plain-text">          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vue-modal-content<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token plain-text">            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token punctuation">/></span></span><span class="token plain-text">            </span><span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> name <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token plain-text"> </span><span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> isOpen <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token plain-text">            &lt;button type="button" @click="isFirstOpen = false">close</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><span class="token plain-text">          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>transition</span><span class="token punctuation">></span></span><span class="token plain-text">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>transition</span><span class="token punctuation">></span></span><span class="token plain-text"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token plain-text">import &#123; onMounted, onUnmounted &#125; from "vue";import modalControl from "@/stores/modalControl.js";import &#123; storeToRefs &#125; from "pinia";export default &#123;  setup() &#123;    const modaltest = modalControl();    const &#123; name, isFirstOpen &#125; = storeToRefs(modaltest);    return &#123;      modaltest,      name,      isFirstOpen,    &#125;;  &#125;,&#125;;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><p>SecondModal.vue</p><figure><div class="code-wrapper"><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span><span class="token plain-text">  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transition</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fade<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token plain-text">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vue-modal<span class="token punctuation">"</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>isSecondOpen<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transition</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>drop-in<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token plain-text">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vue-modal-inner<span class="token punctuation">"</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>isSecondOpen<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token plain-text">          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vue-modal-content<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token plain-text">            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token punctuation">/></span></span><span class="token plain-text">            </span><span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> name <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token plain-text"> </span><span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> isOpen <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token plain-text">            &lt;button type="button" @click="isSecondOpen = false">close</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><span class="token plain-text">          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>transition</span><span class="token punctuation">></span></span><span class="token plain-text">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>transition</span><span class="token punctuation">></span></span><span class="token plain-text"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token plain-text">import modalControl from "@/stores/modalControl.js";import &#123; storeToRefs &#125; from "pinia";export default &#123;  setup(props, &#123; emit &#125;) &#123;    const modaltest = modalControl();    const &#123; name, isSecondOpen &#125; = storeToRefs(modaltest);    return &#123;      modaltest,      name,      isSecondOpen,    &#125;;  &#125;,&#125;;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><iframe src="https://codesandbox.io/embed/vue-2modal-pinia-5zqp9q?fontsize=14&hidenavigation=1&theme=dark"     style="width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;"     title="Vue-2Modal-pinia"     allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking"     sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"   ></iframe>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;之前寫過一篇在 《&lt;a href=&quot;https://popeye-ux.github.io/2023/01/27/modal-props-emit/&quot;&gt;在 Composition API 中使用 props 與 emit 操控 modal&lt;/a&gt;》的筆記，那時是使用 pro</summary>
      
    
    
    
    <category term="Vue3" scheme="https://popeye-ux.github.io/categories/Vue3/"/>
    
    
    <category term="Vue, modal, pinia" scheme="https://popeye-ux.github.io/tags/Vue-modal-pinia/"/>
    
  </entry>
  
  <entry>
    <title>在 Composition API 中使用 props 與 emit 操控 modal</title>
    <link href="https://popeye-ux.github.io/2023/01/27/modal-props-emit/"/>
    <id>https://popeye-ux.github.io/2023/01/27/modal-props-emit/</id>
    <published>2023-01-26T17:14:43.000Z</published>
    <updated>2023-02-11T17:14:25.558Z</updated>
    
    <content type="html"><![CDATA[<p>在前端工程師的日常中，modal&#x2F; 彈出視窗 是常常會遇到的工作情境。畫面大概就是外部元件有一個按鈕，按下去會有一個對話框（內部元件）彈出來，對話框上有個按鈕，點擊後對話框就會關閉。</p><p>如果前端框架是 Vue 的話，一般我們會在外部元件定義一個布林值，預設為 <code>false</code> ，按下外部的按鈕後，布林值會變為 <code>true</code>。</p><ul><li><p>開啟：在內部元件 modal 用 props 接收外部元件的布林值，綁上 <code>v-if= props 接收到的布林值</code>。這樣就可以由外部元件控制內部元件的開啟。</p></li><li><p>關閉：內元件 modal 可以由元件內部的按鈕關閉，按下按鈕後以 emit 傳送一個事件去觸發外部元件反轉布林值，達成元件的關閉。</p></li></ul><p><img src="https://i.imgur.com/bazrYl9.jpg"></p><p>App.vue(外部元件)</p><figure><div class="code-wrapper"><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>template<span class="token operator">></span>  <span class="token operator">&lt;</span>button @click<span class="token operator">=</span><span class="token string">"isOpen = true"</span><span class="token operator">></span>showModal<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>  <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 外部元件中插入內部元件 modal <span class="token operator">--</span><span class="token operator">></span>  <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> props 口訣：先內後外 <span class="token operator">:</span>open<span class="token operator">=</span><span class="token string">"isOpen"</span><span class="token operator">--</span><span class="token operator">></span>  <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> emit 口訣：先內後外  @close<span class="token operator">=</span><span class="token string">"isOpen = !isOpen"</span><span class="token operator">--</span><span class="token operator">></span>  <span class="token operator">&lt;</span>Modal <span class="token operator">:</span>open<span class="token operator">=</span><span class="token string">"isOpen"</span> @close<span class="token operator">=</span><span class="token string">"isOpen = !isOpen"</span><span class="token operator">></span>    <span class="token operator">&lt;</span>p<span class="token operator">></span>      Lorem ipsum dolor<span class="token punctuation">,</span> sit amet consectetur adipisicing elit<span class="token punctuation">.</span> Quo molestiae      consectetur blanditiis aspernatur velit autem labore amet    <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span>  <span class="token operator">&lt;</span><span class="token operator">/</span>Modal<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span><span class="token operator">&lt;</span>script<span class="token operator">></span><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> ref <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"vue"</span><span class="token punctuation">;</span><span class="token keyword">import</span> Modal <span class="token keyword">from</span> <span class="token string">"./components/ModalView.vue"</span><span class="token punctuation">;</span><span class="token comment">// import HelloWorldVue from "./components/HelloWorld.vue";</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span> Modal <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// 由 isOpen 的 true 或 false 控制 modal 的開關</span>    <span class="token keyword">const</span> isOpen <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>      isOpen<span class="token punctuation">,</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><span class="token operator">&lt;</span>style<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><p>&#x2F;components&#x2F;ModalView.vue(內部元件)</p><figure><div class="code-wrapper"><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>template<span class="token operator">></span>  <span class="token operator">&lt;</span>transition name<span class="token operator">=</span><span class="token string">"fade"</span><span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 控制背景 <span class="token operator">--</span><span class="token operator">></span>    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"vue-modal"</span> v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">"open"</span><span class="token operator">></span>      <span class="token operator">&lt;</span>transition name<span class="token operator">=</span><span class="token string">"drop-in"</span><span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 彈跳視窗本體 props 為 open，所以 v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">"open"</span> <span class="token operator">--</span><span class="token operator">></span>        <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"vue-modal-inner"</span> v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">"open"</span><span class="token operator">></span>          <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"vue-modal-content"</span><span class="token operator">></span>            <span class="token operator">&lt;</span>slot <span class="token operator">/</span><span class="token operator">></span>            <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> @click<span class="token operator">=</span><span class="token string">"close"</span> 觸發 emit 事件，傳送至外層切換 isOpen <span class="token operator">--</span><span class="token operator">></span>            <span class="token operator">&lt;</span>button type<span class="token operator">=</span><span class="token string">"button"</span> @click<span class="token operator">=</span><span class="token string">"close"</span><span class="token operator">></span>close<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>          <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>      <span class="token operator">&lt;</span><span class="token operator">/</span>transition<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>  <span class="token operator">&lt;</span><span class="token operator">/</span>transition<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span><span class="token operator">&lt;</span>script<span class="token operator">></span><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> onMounted<span class="token punctuation">,</span> onUnmounted <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"vue"</span><span class="token punctuation">;</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token literal-property property">open</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>      <span class="token literal-property property">type</span><span class="token operator">:</span> Boolean<span class="token punctuation">,</span>      <span class="token literal-property property">requires</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token comment">// peops 這個參數一定要帶到，才能使用 &#123;emit&#125;</span>  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span> emit <span class="token punctuation">&#125;</span></span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">const</span> <span class="token function-variable function">close</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>      <span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">"close"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    <span class="token keyword">const</span> <span class="token function-variable function">handleKeyup</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>      <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    <span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"keyup"</span><span class="token punctuation">,</span> handleKeyup<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">onUnmounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> document<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">"keyup"</span><span class="token punctuation">,</span> handleKeyup<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token punctuation">&#123;</span> close <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><span class="token operator">&lt;</span>style scoped<span class="token operator">></span><span class="token operator">*</span><span class="token punctuation">,</span><span class="token operator">:</span><span class="token operator">:</span>before<span class="token punctuation">,</span><span class="token operator">:</span><span class="token operator">:</span>after <span class="token punctuation">&#123;</span>  <span class="token literal-property property">margin</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>  <span class="token literal-property property">padding</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>  box<span class="token operator">-</span>sizing<span class="token operator">:</span> border<span class="token operator">-</span>box<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">.</span>vue<span class="token operator">-</span>modal <span class="token punctuation">&#123;</span>  <span class="token literal-property property">position</span><span class="token operator">:</span> fixed<span class="token punctuation">;</span>  <span class="token literal-property property">top</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>  <span class="token literal-property property">left</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>  <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">100</span><span class="token operator">%</span><span class="token punctuation">;</span>  <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">100</span><span class="token operator">%</span><span class="token punctuation">;</span>  overflow<span class="token operator">-</span>x<span class="token operator">:</span> hidden<span class="token punctuation">;</span>  overflow<span class="token operator">-</span>y<span class="token operator">:</span> auto<span class="token punctuation">;</span>  background<span class="token operator">-</span>color<span class="token operator">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0.04</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  z<span class="token operator">-</span>index<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">.</span>vue<span class="token operator">-</span>modal<span class="token operator">-</span>inner <span class="token punctuation">&#123;</span>  max<span class="token operator">-</span>width<span class="token operator">:</span> 500px<span class="token punctuation">;</span>  <span class="token literal-property property">margin</span><span class="token operator">:</span> 2rem auto<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">.</span>vue<span class="token operator">-</span>modal<span class="token operator">-</span>content <span class="token punctuation">&#123;</span>  <span class="token literal-property property">position</span><span class="token operator">:</span> relative<span class="token punctuation">;</span>  background<span class="token operator">-</span>color<span class="token operator">:</span> #fff<span class="token punctuation">;</span>  <span class="token literal-property property">border</span><span class="token operator">:</span> 1px solid <span class="token function">rgba</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0.3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  background<span class="token operator">-</span>clip<span class="token operator">:</span> padding<span class="token operator">-</span>box<span class="token punctuation">;</span>  border<span class="token operator">-</span>radius<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">.</span>3rem<span class="token punctuation">;</span>  <span class="token literal-property property">padding</span><span class="token operator">:</span> 1rem<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">.</span>fade<span class="token operator">-</span>enter<span class="token operator">-</span>active<span class="token punctuation">,</span><span class="token punctuation">.</span>fade<span class="token operator">-</span>leave<span class="token operator">-</span>active <span class="token punctuation">&#123;</span>  <span class="token literal-property property">transition</span><span class="token operator">:</span> opacity <span class="token number">0</span><span class="token punctuation">.</span>5s<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">.</span>fade<span class="token operator">-</span>enter<span class="token operator">-</span>from<span class="token punctuation">,</span><span class="token punctuation">.</span>fade<span class="token operator">-</span>leave<span class="token operator">-</span>to <span class="token punctuation">&#123;</span>  <span class="token literal-property property">opacity</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">.</span>drop<span class="token operator">-</span><span class="token keyword">in</span><span class="token operator">-</span>enter<span class="token operator">-</span>active<span class="token punctuation">,</span><span class="token punctuation">.</span>drop<span class="token operator">-</span><span class="token keyword">in</span><span class="token operator">-</span>leave<span class="token operator">-</span>active <span class="token punctuation">&#123;</span>  <span class="token literal-property property">transition</span><span class="token operator">:</span> all <span class="token number">0</span><span class="token punctuation">.</span>3s easeout<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">.</span>drop<span class="token operator">-</span><span class="token keyword">in</span><span class="token operator">-</span>enter<span class="token operator">-</span>from<span class="token punctuation">,</span><span class="token punctuation">.</span>drop<span class="token operator">-</span><span class="token keyword">in</span><span class="token operator">-</span>leave<span class="token operator">-</span>to <span class="token punctuation">&#123;</span>  <span class="token literal-property property">opacity</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>  <span class="token literal-property property">transform</span><span class="token operator">:</span> <span class="token function">translateY</span><span class="token punctuation">(</span><span class="token operator">-</span>50px<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><iframe src="https://codesandbox.io/embed/vue-modal-shi-yong-9qbw7f?fontsize=14&hidenavigation=1&theme=dark"     style="width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;"     title="Vue-Modal 使用"     allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking"     sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"   ></iframe>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;在前端工程師的日常中，modal&amp;#x2F; 彈出視窗 是常常會遇到的工作情境。畫面大概就是外部元件有一個按鈕，按下去會有一個對話框（內部元件）彈出來，對話框上有個按鈕，點擊後對話框就會關閉。&lt;/p&gt;
&lt;p&gt;如果前端框架是 Vue 的話，一般我們會在外部元件定義一個布林值，</summary>
      
    
    
    
    <category term="Vue3" scheme="https://popeye-ux.github.io/categories/Vue3/"/>
    
    
    <category term="Vue, modal, props, emit" scheme="https://popeye-ux.github.io/tags/Vue-modal-props-emit/"/>
    
  </entry>
  
  <entry>
    <title>hover 基本應用</title>
    <link href="https://popeye-ux.github.io/2023/01/21/hoverBasic/"/>
    <id>https://popeye-ux.github.io/2023/01/21/hoverBasic/</id>
    <published>2023-01-20T17:05:30.000Z</published>
    <updated>2023-02-11T17:14:29.778Z</updated>
    
    <content type="html"><![CDATA[<p>hover 是一種常見的網頁滑鼠互動，用法十分簡單，但是卻可以變化出各種形式。以下筆記幾種常見的用法：</p><h2 id="基本用法"><a href="#基本用法" class="headerlink" title="基本用法"></a>基本用法</h2><p>HTML元素先設定基本的樣式，再用 <code>選取器:hover&#123;...&#125;</code> 設定滑鼠滑上元素後變化的樣式。</p><figure><div class="code-wrapper"><pre class="line-numbers language-htmlmixed" data-language="htmlmixed"><code class="language-htmlmixed">&lt;div class&#x3D;&quot;box&quot;&gt;&lt;&#x2F;div&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure><figure><div class="code-wrapper"><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token selector">.box</span> <span class="token punctuation">&#123;</span>  <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>  <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>  <span class="token property">margin</span><span class="token punctuation">:</span> 100px auto<span class="token punctuation">;</span>  <span class="token property">transition</span><span class="token punctuation">:</span> 0.5s<span class="token punctuation">;</span>  <span class="token property">background</span><span class="token punctuation">:</span> #ffa7de<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.box:hover</span> <span class="token punctuation">&#123;</span>  <span class="token property">background</span><span class="token punctuation">:</span> #ffd592<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><iframe height="300" style="width: 100%;" scrolling="no" title="Untitled" src="https://codepen.io/popeye_ux/embed/qByprwM?default-tab=html%2Cresult" frameborder="no" loading="lazy" allowtransparency="true" allowfullscreen="true">  See the Pen <a href="https://codepen.io/popeye_ux/pen/qByprwM">  Untitled</a> by POPEYE (<a href="https://codepen.io/popeye_ux">@popeye_ux</a>)  on <a href="https://codepen.io">CodePen</a>.</iframe><p>樣式的變換可以是：</p><ul><li>opacity:透明度的變化。</li><li>border-radius：如果要讓正方形的 div 變成圓的，只要設定<code>:hover&#123;border-radius: 50%&#125;</code> 即可做到。</li><li>transform: 可以讓 HTML 元素放大、縮小、旋轉，範例如下：</li></ul><figure><div class="code-wrapper"><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token selector">.box</span> <span class="token punctuation">&#123;</span>  <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>  <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>  <span class="token property">margin</span><span class="token punctuation">:</span> 100px auto<span class="token punctuation">;</span>  <span class="token property">transition</span><span class="token punctuation">:</span> 0.5s<span class="token punctuation">;</span>  <span class="token property">background</span><span class="token punctuation">:</span> #ffa7de<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">/* transform 設定 放大1.2倍,旋轉 45 度*/</span><span class="token selector">.box:hover</span> <span class="token punctuation">&#123;</span>  <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">scale</span><span class="token punctuation">(</span>1.2<span class="token punctuation">)</span> <span class="token function">rotate</span><span class="token punctuation">(</span>45deg<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><iframe height="300" style="width: 100%;" scrolling="no" title="hover:basic" src="https://codepen.io/popeye_ux/embed/yLqpbYo?default-tab=html%2Cresult" frameborder="no" loading="lazy" allowtransparency="true" allowfullscreen="true">  See the Pen <a href="https://codepen.io/popeye_ux/pen/yLqpbYo">  hover:basic</a> by POPEYE (<a href="https://codepen.io/popeye_ux">@popeye_ux</a>)  on <a href="https://codepen.io">CodePen</a>.</iframe><h2 id="hover-結合-keyframes-與-animation"><a href="#hover-結合-keyframes-與-animation" class="headerlink" title="hover 結合 keyframes 與 animation"></a>hover 結合 keyframes 與 animation</h2><p>我們來做一個滑鼠移到方塊上，方塊就會搖擺的效果。</p><figure><div class="code-wrapper"><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token selector">.box</span> <span class="token punctuation">&#123;</span>  <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>  <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>  <span class="token property">margin</span><span class="token punctuation">:</span> 50px auto<span class="token punctuation">;</span>  <span class="token property">transition</span><span class="token punctuation">:</span> 0.5s<span class="token punctuation">;</span>  <span class="token property">background</span><span class="token punctuation">:</span> #ffa7de<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">/* 設定搖擺的過程*/</span><span class="token atrule"><span class="token rule">@keyframes</span> swing</span> <span class="token punctuation">&#123;</span>  <span class="token selector">15%</span> <span class="token punctuation">&#123;</span><span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateX</span><span class="token punctuation">(</span>5px<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>  <span class="token selector">40%</span> <span class="token punctuation">&#123;</span><span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateX</span><span class="token punctuation">(</span>-5px<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>  <span class="token selector">65%</span> <span class="token punctuation">&#123;</span><span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateX</span><span class="token punctuation">(</span>2px<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>  <span class="token selector">85%</span> <span class="token punctuation">&#123;</span><span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateX</span><span class="token punctuation">(</span>-2px<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>  <span class="token selector">100%</span> <span class="token punctuation">&#123;</span><span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateX</span><span class="token punctuation">(</span>0px<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token comment">/* 把搖擺的過程用 animation 加到 hover 上*/</span><span class="token selector">.box:hover</span> <span class="token punctuation">&#123;</span>  <span class="token property">animation</span><span class="token punctuation">:</span> swing 1s 1<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><iframe height="300" style="width: 100%;" scrolling="no" title="hover:transform" src="https://codepen.io/popeye_ux/embed/yLqpbXp?default-tab=html%2Cresult" frameborder="no" loading="lazy" allowtransparency="true" allowfullscreen="true">  See the Pen <a href="https://codepen.io/popeye_ux/pen/yLqpbXp">  hover:transform</a> by POPEYE (<a href="https://codepen.io/popeye_ux">@popeye_ux</a>)  on <a href="https://codepen.io">CodePen</a>.</iframe><h2 id="hover-結合偽元素的應用"><a href="#hover-結合偽元素的應用" class="headerlink" title="hover 結合偽元素的應用"></a>hover 結合偽元素的應用</h2><p>一般我們常常看到 navbar 的選項在滑鼠移上去之後，下方會有一條線跑出來。這是利用 <code>::before</code> 與 <code>::after</code> 偽元素加上hover所做出來的效果。</p><p><code>div</code> 方塊 <code>position</code> 要設定為 <code>relative</code>，而 <code>before</code> 與 <code>after</code> 偽元素 position 要設定為 absolute，width 要設定為 0，hover 之後設定為 100%，這樣就會有互動效果產生。</p><figure><div class="code-wrapper"><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token comment">/* 加上 position: relative */</span><span class="token selector">.box</span> <span class="token punctuation">&#123;</span>  <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>  <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>  <span class="token property">margin</span><span class="token punctuation">:</span> 50px auto<span class="token punctuation">;</span>  <span class="token property">transition</span><span class="token punctuation">:</span> 0.5s<span class="token punctuation">;</span>  <span class="token property">background</span><span class="token punctuation">:</span> #ffa7de<span class="token punctuation">;</span>  <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">/* 設定偽元素的寬度為 0 ，position 為 absolute */</span><span class="token selector">.box:before</span> <span class="token punctuation">&#123;</span>  <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">;</span>  <span class="token property">width</span><span class="token punctuation">:</span> 0%<span class="token punctuation">;</span>  <span class="token property">height</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>  <span class="token property">background-color</span><span class="token punctuation">:</span> #ff5e33<span class="token punctuation">;</span>  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>  <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>  <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>  <span class="token property">transition</span><span class="token punctuation">:</span> all 0.3s linear<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.box:after</span> <span class="token punctuation">&#123;</span>  <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">;</span>  <span class="token property">width</span><span class="token punctuation">:</span> 0%<span class="token punctuation">;</span>  <span class="token property">height</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>  <span class="token property">background-color</span><span class="token punctuation">:</span> #ff5e33<span class="token punctuation">;</span>  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>  <span class="token property">bottom</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>  <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>  <span class="token property">transition</span><span class="token punctuation">:</span> all 0.3s linear<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">/* 設定偽元素在滑鼠移上去之後，寬度變為 100% */</span><span class="token selector">.box:hover::after</span> <span class="token punctuation">&#123;</span>  <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.box:hover::before</span> <span class="token punctuation">&#123;</span>  <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">/* 第二個方塊，滑鼠移上去之後，由下方的中間變出線條 */</span><span class="token selector">.box2</span> <span class="token punctuation">&#123;</span>  <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>  <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>  <span class="token property">margin</span><span class="token punctuation">:</span> 50px auto<span class="token punctuation">;</span>  <span class="token property">transition</span><span class="token punctuation">:</span> 0.5s<span class="token punctuation">;</span>  <span class="token property">background</span><span class="token punctuation">:</span> #ffa7de<span class="token punctuation">;</span>  <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.box2:after</span> <span class="token punctuation">&#123;</span>  <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">;</span>  <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>  <span class="token property">height</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>  <span class="token property">background-color</span><span class="token punctuation">:</span> #ff5e33<span class="token punctuation">;</span>  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>  <span class="token property">bottom</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>  <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>  <span class="token property">transition</span><span class="token punctuation">:</span> transform 0.5s ease<span class="token punctuation">;</span>  <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">scaleX</span><span class="token punctuation">(</span>0<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.box2:hover::after</span> <span class="token punctuation">&#123;</span>  <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">scaleX</span><span class="token punctuation">(</span>1<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><iframe height="300" style="width: 100%;" scrolling="no" title="hover: animation" src="https://codepen.io/popeye_ux/embed/gOjoWBL?default-tab=html%2Cresult" frameborder="no" loading="lazy" allowtransparency="true" allowfullscreen="true">  See the Pen <a href="https://codepen.io/popeye_ux/pen/gOjoWBL">  hover: animation</a> by POPEYE (<a href="https://codepen.io/popeye_ux">@popeye_ux</a>)  on <a href="https://codepen.io">CodePen</a>.</iframe>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;hover 是一種常見的網頁滑鼠互動，用法十分簡單，但是卻可以變化出各種形式。以下筆記幾種常見的用法：&lt;/p&gt;
&lt;h2 id=&quot;基本用法&quot;&gt;&lt;a href=&quot;#基本用法&quot; class=&quot;headerlink&quot; title=&quot;基本用法&quot;&gt;&lt;/a&gt;基本用法&lt;/h2&gt;&lt;p&gt;HTM</summary>
      
    
    
    
    <category term="CSS" scheme="https://popeye-ux.github.io/categories/CSS/"/>
    
    
    <category term="CSS, hover" scheme="https://popeye-ux.github.io/tags/CSS-hover/"/>
    
  </entry>
  
  <entry>
    <title>target 進階：頁籤切換顯示內容</title>
    <link href="https://popeye-ux.github.io/2023/01/20/cssTargetTab1/"/>
    <id>https://popeye-ux.github.io/2023/01/20/cssTargetTab1/</id>
    <published>2023-01-19T17:29:39.000Z</published>
    <updated>2023-02-11T17:14:32.775Z</updated>
    
    <content type="html"><![CDATA[<p>target 是一個虛擬類別選擇器，用途在於讓我們設定目標對象的樣式。</p><p>CSS 的寫法為：</p><figure><div class="code-wrapper"><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token selector">選擇器：target</span><span class="token punctuation">&#123;</span>.....<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></div></figure><p>也就是當有人點了<code>錨點為 hello 的 a 連結</code>，則透過 <code> #hello:target&#123;……..&#125;</code> 就可以改變 id 為 hello 的 HTML 元素樣式。</p><p>在這個範例中必須懂的知識點：</p><ul><li>選取 [ 擁有特定屬性 ]的選擇器<br><code> img[alt] &#123;……..&#125;</code> 為改變有 <code>alt</code> 屬性的圖片樣式。</li><li>選取對象A ~ 選取對象B：意指選到 A 後面所有同一層的 B</li><li>選取對象A &gt; 選取對象B：意指僅選到 A 的下一層的 B</li></ul><h2 id="第一步：設定-HTML-結構，「頁籤按鈕」與「內容」連動"><a href="#第一步：設定-HTML-結構，「頁籤按鈕」與「內容」連動" class="headerlink" title="第一步：設定 HTML 結構，「頁籤按鈕」與「內容」連動"></a>第一步：設定 HTML 結構，「頁籤按鈕」與「內容」連動</h2><ol><li>點選 <code>&lt;li&gt;&lt;a href=&quot;#tab-1&quot;&gt;Tab 1&lt;/a&gt;&lt;/li&gt;</code> 標籤來觸發 <code>&lt;span id=&quot;tab-1&quot;&gt;1&lt;/span&gt;</code></li><li><code>&lt;span id=&quot;tab-1&quot;&gt;1&lt;/span&gt;</code> 利用 <code>:target</code> 反過來改變 <code>&lt;li&gt;&lt;a href=&quot;#tab-1&quot;&gt;Tab 1&lt;/a&gt;&lt;/li&gt;</code>與 <code>&lt;div class=&quot;tab-content-1&quot;&gt;&lt;p&gt;內容-1&lt;/p&gt;&lt;/div&gt; 的樣式。</code></li></ol><p>HTML 結構如下：</p><figure><div class="code-wrapper"><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tab-1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tab-2<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tab-3<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tab-4<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tab<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>!–</span> <span class="token attr-name">頁籤按鈕</span> <span class="token attr-name">–</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#tab-1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Tab 1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#tab-2<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Tab 2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#tab-3<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Tab 3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#tab-4<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Tab 4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>!–</span> <span class="token attr-name">頁籤的內容區塊</span> <span class="token attr-name">–</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tab-content-1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>內容-1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tab-content-2<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>內容-2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tab-content-3<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>內容-3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tab-content-4<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>內容-4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><p>CSS 結構如下：</p><figure><div class="code-wrapper"><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token comment">/* span:target */</span><span class="token selector">#tab-1:target,#tab-2:target,#tab-3:target,#tab-4:target</span><span class="token punctuation">&#123;</span><span class="token property">border</span><span class="token punctuation">:</span> solid 1px red<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">/* /頁籤變換 選到 #tab-1 後面 #tab 後面 ul li a標籤屬性為 "#tab-x"的元素/ */</span><span class="token selector">#tab-1:target ~ #tab > ul li a[href$="#tab-1"],#tab-2:target ~ #tab > ul li a[href$="#tab-2"],#tab-3:target ~ #tab > ul li a[href$="#tab-3"],#tab-4:target ~ #tab > ul li a[href$="#tab-4"]</span> <span class="token punctuation">&#123;</span><span class="token property">border</span><span class="token punctuation">:</span> solid 1px blue<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">/* /頁籤內容顯示 / */</span><span class="token selector">#tab-1:target ~ #tab > div.tab-content-1,#tab-2:target ~ #tab > div.tab-content-2,#tab-3:target ~ #tab > div.tab-content-3,#tab-4:target ~ #tab > div.tab-content-4</span> <span class="token punctuation">&#123;</span><span class="token property">border</span><span class="token punctuation">:</span> solid 1px black<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">/* 頁籤的樣式設定 */</span><span class="token selector">#tab</span><span class="token punctuation">&#123;</span><span class="token property">width</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span><span class="token property">background</span><span class="token punctuation">:</span> lightblue<span class="token punctuation">;</span><span class="token property">border</span><span class="token punctuation">:</span> solid 4px pink<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">/* 頁籤ul */</span><span class="token selector">#tab>ul</span><span class="token punctuation">&#123;</span><span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span><span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span><span class="token property">padding</span><span class="token punctuation">:</span> 10px 20px 0 20px<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">#tab>ul>li</span><span class="token punctuation">&#123;</span><span class="token property">list-style-type</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">/* 設定頁籤內的樣式 */</span><span class="token selector">#tab>ul>li>a</span><span class="token punctuation">&#123;</span><span class="token property">text-decoration</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span><span class="token property">font-size</span><span class="token punctuation">:</span> 13px<span class="token punctuation">;</span><span class="token property">color</span><span class="token punctuation">:</span> #333<span class="token punctuation">;</span><span class="token property">float</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span><span class="token property">padding</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span><span class="token property">margin-left</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><iframe height="300" style="width: 100%;" scrolling="no" title="target 進階應用" src="https://codepen.io/popeye_ux/embed/dyjZqGe?default-tab=html%2Cresult" frameborder="no" loading="lazy" allowtransparency="true" allowfullscreen="true">  See the Pen <a href="https://codepen.io/popeye_ux/pen/dyjZqGe">  target 進階應用</a> by POPEYE (<a href="https://codepen.io/popeye_ux">@popeye_ux</a>)  on <a href="https://codepen.io">CodePen</a>.</iframe><h2 id="第二步：設定隱藏與切換顯示"><a href="#第二步：設定隱藏與切換顯示" class="headerlink" title="第二步：設定隱藏與切換顯示"></a>第二步：設定隱藏與切換顯示</h2><ol><li>設定所有內容區塊為隱藏。</li><li>設定初始的時候 <code>tab1</code> 為啟動狀態，而 內容-1 為顯示狀態。</li><li>設定點選其他標籤時切換內容</li></ol><figure><div class="code-wrapper"><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token comment">/* span:target */</span><span class="token selector">#tab-1:target,#tab-2:target,#tab-3:target,#tab-4:target</span><span class="token punctuation">&#123;</span><span class="token property">border</span><span class="token punctuation">:</span> solid 1px red<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">/* /頁籤變換 選到 #tab-1 後面 #tab 後面 ul li a標籤屬性為 "#tab-x"的元素/ */</span><span class="token selector">#tab-1:target ~ #tab > ul li a[href$="#tab-1"],#tab-2:target ~ #tab > ul li a[href$="#tab-2"],#tab-3:target ~ #tab > ul li a[href$="#tab-3"],#tab-4:target ~ #tab > ul li a[href$="#tab-4"]</span> <span class="token punctuation">&#123;</span><span class="token property">border</span><span class="token punctuation">:</span> solid 1px blue<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">/* /頁籤內容顯示 / */</span><span class="token selector">#tab-1:target ~ #tab > div.tab-content-1,#tab-2:target ~ #tab > div.tab-content-2,#tab-3:target ~ #tab > div.tab-content-3,#tab-4:target ~ #tab > div.tab-content-4</span> <span class="token punctuation">&#123;</span><span class="token property">border</span><span class="token punctuation">:</span> solid 1px black<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">#tab</span><span class="token punctuation">&#123;</span><span class="token property">width</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span><span class="token property">background</span><span class="token punctuation">:</span> lightblue<span class="token punctuation">;</span><span class="token property">border</span><span class="token punctuation">:</span> solid 4px pink<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">/* 頁籤ul */</span><span class="token selector">#tab>ul</span><span class="token punctuation">&#123;</span><span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span><span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span><span class="token property">padding</span><span class="token punctuation">:</span> 10px 20px 0 20px<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">#tab>ul>li</span><span class="token punctuation">&#123;</span><span class="token property">list-style-type</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">/* 設定頁籤內的樣式 */</span><span class="token selector">#tab>ul>li>a</span><span class="token punctuation">&#123;</span><span class="token property">text-decoration</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span><span class="token property">font-size</span><span class="token punctuation">:</span> 13px<span class="token punctuation">;</span><span class="token property">color</span><span class="token punctuation">:</span> #333<span class="token punctuation">;</span><span class="token property">float</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span><span class="token property">padding</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span><span class="token property">margin-left</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">/* 第二步由此開始 */</span><span class="token comment">/* /所有內容區塊隱藏起來/ */</span><span class="token selector">#tab>div</span> <span class="token punctuation">&#123;</span><span class="token property">clear</span><span class="token punctuation">:</span>both<span class="token punctuation">;</span><span class="token property">padding</span><span class="token punctuation">:</span>0 15px<span class="token punctuation">;</span><span class="token property">height</span><span class="token punctuation">:</span>0<span class="token punctuation">;</span><span class="token property">overflow</span><span class="token punctuation">:</span>hidden<span class="token punctuation">;</span><span class="token property">visibility</span><span class="token punctuation">:</span>hidden<span class="token punctuation">;</span><span class="token property">-webkit-transition</span><span class="token punctuation">:</span>all .4s ease-in-out<span class="token punctuation">;</span><span class="token property">-moz-transition</span><span class="token punctuation">:</span>all .4s ease-in-out<span class="token punctuation">;</span><span class="token property">-ms-transition</span><span class="token punctuation">:</span>all .4s ease-in-out<span class="token punctuation">;</span><span class="token property">-o-transition</span><span class="token punctuation">:</span>all .4s ease-in-out<span class="token punctuation">;</span><span class="token property">transition</span><span class="token punctuation">:</span>all .4s ease-in-out<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">/* /第一筆的底色，點擊tab1以外的標籤會變色/ */</span><span class="token selector">span:target ~ #tab > ul li:first-child a</span> <span class="token punctuation">&#123;</span><span class="token property">background</span><span class="token punctuation">:</span>red<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">/* :first-of-type 代表本節點為兄弟節點中第一個此類型節點。 點擊tab1以外其他標籤內容-1隱藏 */</span><span class="token selector">span:target ~ #tab > div:first-of-type</span> <span class="token punctuation">&#123;</span><span class="token property">visibility</span><span class="token punctuation">:</span>hidden<span class="token punctuation">;</span><span class="token property">height</span><span class="token punctuation">:</span>0px<span class="token punctuation">;</span>  <span class="token property">background</span><span class="token punctuation">:</span> purple<span class="token punctuation">;</span><span class="token property">padding</span><span class="token punctuation">:</span>0 15px<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">/* /頁籤:點擊變換&amp;第一筆還未點擊的初始化樣式/ */</span><span class="token comment">/* 下面的是點擊才會變色 */</span><span class="token selector">span ~ #tab > ul li:first-child a,#tab-1:target ~ #tab > ul li a[href$="#tab-1"],#tab-2:target ~ #tab > ul li a[href$="#tab-2"],#tab-3:target ~ #tab > ul li a[href$="#tab-3"],#tab-4:target ~ #tab > ul li a[href$="#tab-4"]</span> <span class="token punctuation">&#123;</span><span class="token property">background</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span><span class="token punctuation">&#125;</span> <span class="token comment">/* /頁籤內容顯示&amp;設定第一筆為顯示/ */</span><span class="token selector">span ~ #tab > div:first-of-type,#tab-1:target ~ #tab > div.tab-content-1,#tab-2:target ~ #tab > div.tab-content-2,#tab-3:target ~ #tab > div.tab-content-3,#tab-4:target ~ #tab > div.tab-content-4</span> <span class="token punctuation">&#123;</span><span class="token property">visibility</span><span class="token punctuation">:</span>visible<span class="token punctuation">;</span><span class="token property">height</span><span class="token punctuation">:</span>200px<span class="token punctuation">;</span><span class="token property">background</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><iframe height="300" style="width: 100%;" scrolling="no" title="target 進階應用2" src="https://codepen.io/popeye_ux/embed/WNKXaoO?default-tab=html%2Cresult" frameborder="no" loading="lazy" allowtransparency="true" allowfullscreen="true">  See the Pen <a href="https://codepen.io/popeye_ux/pen/WNKXaoO">  target 進階應用2</a> by POPEYE (<a href="https://codepen.io/popeye_ux">@popeye_ux</a>)  on <a href="https://codepen.io">CodePen</a>.</iframe><p>最後記得把 <code>&lt;span&gt;</code> 設為 <code>display:none</code></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;target 是一個虛擬類別選擇器，用途在於讓我們設定目標對象的樣式。&lt;/p&gt;
&lt;p&gt;CSS 的寫法為：&lt;/p&gt;
&lt;figure&gt;&lt;div class=&quot;code-wrapper&quot;&gt;&lt;pre class=&quot;line-numbers language-css&quot; data-la</summary>
      
    
    
    
    <category term="CSS" scheme="https://popeye-ux.github.io/categories/CSS/"/>
    
    
    <category term="CSS, target" scheme="https://popeye-ux.github.io/tags/CSS-target/"/>
    
  </entry>
  
  <entry>
    <title>用 target 選擇器改變其他 HTML 元素的樣式</title>
    <link href="https://popeye-ux.github.io/2023/01/19/cssTarget-1/"/>
    <id>https://popeye-ux.github.io/2023/01/19/cssTarget-1/</id>
    <published>2023-01-18T16:05:30.000Z</published>
    <updated>2023-01-19T17:09:26.505Z</updated>
    
    <content type="html"><![CDATA[<p>target 是一個虛擬類別選擇器，用途在於讓我們設定目標對象的樣式。</p><p>CSS 的寫法如下：</p><figure><div class="code-wrapper"><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token selector">.類別選擇器：target</span><span class="token punctuation">&#123;</span>.....<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></div></figure><h3 id="target-基礎應用"><a href="#target-基礎應用" class="headerlink" title="target 基礎應用"></a>target 基礎應用</h3><p>在這個範例中，我們藉由 <code>&lt;a href=&quot;#top&quot;&gt;</code> 來動態地操控 <code>id</code> 是 <code>top</code> 的 HTML 元素樣式。</p><figure><div class="code-wrapper"><pre class="line-numbers language-htmlmixed" data-language="htmlmixed"><code class="language-htmlmixed">&lt;a href&#x3D;&quot;#top&quot;&gt;上面變色&lt;&#x2F;a&gt;&lt;a href&#x3D;&quot;#&quot;&gt;不變色&lt;&#x2F;a&gt;&lt;a href&#x3D;&quot;#bottom&quot;&gt;下面變色&lt;&#x2F;a&gt;&lt;div class&#x3D;&quot;change&quot; id&#x3D;&quot;top&quot;&gt;上面變色&lt;&#x2F;div&gt;&lt;div class&#x3D;&quot;change&quot; id&#x3D;&quot;bottom&quot;&gt;下面變色&lt;&#x2F;div&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><p><code>&lt;a href=&quot;#top&quot;&gt;</code> 對應的 <code>target</code>  就是 id 為 <code>top</code> 的 HTML 元素。 </p><figure><div class="code-wrapper"><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token selector">.change:target</span><span class="token punctuation">&#123;</span>  <span class="token property">background</span><span class="token punctuation">:</span> orange<span class="token punctuation">;</span>  <span class="token property">width</span><span class="token punctuation">:</span>200px<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></div></figure><p>當我們點選其他連結的時候，連結對應 <code>id</code> 的元素也會改變樣式，同時其他元素的樣式會恢復原狀。</p><iframe height="300" style="width: 100%;" scrolling="no" title=":target" src="https://codepen.io/popeye_ux/embed/JjBOdNg?default-tab=html%2Cresult" frameborder="no" loading="lazy" allowtransparency="true" allowfullscreen="true">  See the Pen <a href="https://codepen.io/popeye_ux/pen/JjBOdNg">  :target</a> by POPEYE (<a href="https://codepen.io/popeye_ux">@popeye_ux</a>)  on <a href="https://codepen.io">CodePen</a>.</iframe><h3 id="target-進階應用：燈箱效果"><a href="#target-進階應用：燈箱效果" class="headerlink" title="target 進階應用：燈箱效果"></a>target 進階應用：燈箱效果</h3><p>利用 <code>&lt;a href=&quot;#example1&quot;&gt;</code> 來打開燈箱。</p><p>然後用 <code>&lt;a href=&quot;#&quot; class=&quot;close&quot;&gt;</code> 來關掉燈箱效果。</p><figure><div class="code-wrapper"><pre class="line-numbers language-htmlmixed" data-language="htmlmixed"><code class="language-htmlmixed">&lt;ul&gt;  &lt;li&gt;&lt;a href&#x3D;&quot;#example1&quot;&gt;打開燈箱 #1&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;  &lt;li&gt;&lt;a href&#x3D;&quot;#example2&quot;&gt;打開燈箱 #2&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;&lt;&#x2F;ul&gt;&lt;div class&#x3D;&quot;lightbox&quot; id&#x3D;&quot;example1&quot;&gt;  &lt;figure&gt;    &lt;!-- 關閉燈箱效果 --&gt;    &lt;a href&#x3D;&quot;#&quot; class&#x3D;&quot;close&quot;&gt;&lt;&#x2F;a&gt;    &lt;figcaption&gt;我是燈箱一&lt;&#x2F;figcaption&gt;  &lt;&#x2F;figure&gt;&lt;&#x2F;div&gt;&lt;div class&#x3D;&quot;lightbox&quot; id&#x3D;&quot;example2&quot;&gt;  &lt;figure&gt;    &lt;!-- 關閉燈箱效果 --&gt;    &lt;a href&#x3D;&quot;#&quot; class&#x3D;&quot;close&quot;&gt;&lt;&#x2F;a&gt;    &lt;figcaption&gt;我是燈箱二&lt;&#x2F;figcaption&gt;  &lt;&#x2F;figure&gt;&lt;&#x2F;div&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><figure><div class="code-wrapper"><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token comment">/* 先把燈箱設為 不顯示 */</span><span class="token selector">.lightbox</span> <span class="token punctuation">&#123;</span>  <span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">/* 利用 target 來打開燈箱 */</span><span class="token selector">.lightbox:target</span> <span class="token punctuation">&#123;</span>  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>  <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>  <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>  <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>  <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>  <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>  <span class="token property">justify-content</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">/* Lightbox content */</span><span class="token selector">.lightbox figcaption</span> <span class="token punctuation">&#123;</span>  <span class="token property">width</span><span class="token punctuation">:</span> 25rem<span class="token punctuation">;</span>  <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>  <span class="token property">padding</span><span class="token punctuation">:</span> 1.5em<span class="token punctuation">;</span>  <span class="token property">background-color</span><span class="token punctuation">:</span> lightblue<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">/* Close button */</span><span class="token selector">.lightbox .close</span> <span class="token punctuation">&#123;</span>  <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>  <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.lightbox .close::after</span> <span class="token punctuation">&#123;</span>  <span class="token property">right</span><span class="token punctuation">:</span> -1rem<span class="token punctuation">;</span>  <span class="token property">top</span><span class="token punctuation">:</span> -1rem<span class="token punctuation">;</span>  <span class="token property">width</span><span class="token punctuation">:</span> 2rem<span class="token punctuation">;</span>  <span class="token property">height</span><span class="token punctuation">:</span> 2rem<span class="token punctuation">;</span>  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>  <span class="token property">z-index</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>  <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>  <span class="token property">justify-content</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>  <span class="token property">background-color</span><span class="token punctuation">:</span> black<span class="token punctuation">;</span>  <span class="token property">border-radius</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>  <span class="token property">color</span><span class="token punctuation">:</span> white<span class="token punctuation">;</span>  <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">"×"</span><span class="token punctuation">;</span>  <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">/* Lightbox overlay */</span><span class="token selector">.lightbox .close::before</span> <span class="token punctuation">&#123;</span>  <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>  <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>  <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>  <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>  <span class="token property">position</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span>  <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span>0<span class="token punctuation">,</span>0<span class="token punctuation">,</span>.7<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">;</span>  <span class="token property">cursor</span><span class="token punctuation">:</span> default<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><iframe height="300" style="width: 100%;" scrolling="no" title="Pure-CSS lightbox" src="https://codepen.io/popeye_ux/embed/zYLPGXO?default-tab=html%2Cresult" frameborder="no" loading="lazy" allowtransparency="true" allowfullscreen="true">  See the Pen <a href="https://codepen.io/popeye_ux/pen/zYLPGXO">  Pure-CSS lightbox</a> by POPEYE (<a href="https://codepen.io/popeye_ux">@popeye_ux</a>)  on <a href="https://codepen.io">CodePen</a>.</iframe>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;target 是一個虛擬類別選擇器，用途在於讓我們設定目標對象的樣式。&lt;/p&gt;
&lt;p&gt;CSS 的寫法如下：&lt;/p&gt;
&lt;figure&gt;&lt;div class=&quot;code-wrapper&quot;&gt;&lt;pre class=&quot;line-numbers language-css&quot; data-l</summary>
      
    
    
    
    <category term="CSS" scheme="https://popeye-ux.github.io/categories/CSS/"/>
    
    
    <category term="CSS, target" scheme="https://popeye-ux.github.io/tags/CSS-target/"/>
    
  </entry>
  
  <entry>
    <title>computed 的簡單任務--只讀不寫</title>
    <link href="https://popeye-ux.github.io/2023/01/14/vue-computed-1/"/>
    <id>https://popeye-ux.github.io/2023/01/14/vue-computed-1/</id>
    <published>2023-01-14T10:59:55.000Z</published>
    <updated>2023-02-17T16:34:42.511Z</updated>
    
    <content type="html"><![CDATA[<h2 id="甚麼是-Computed"><a href="#甚麼是-Computed" class="headerlink" title="甚麼是 Computed"></a>甚麼是 Computed</h2><p>在 Vue 中有一個叫 <code>computed</code> 的神奇方法，它可以觀察在<code>data</code>的變數，一旦變數有了改變，就會去取變數來運算，產生一個新的值呈現在畫面上，而這個新的值不會寫回 Option API 的 <code>data</code> 中。</p><p>先來個簡單的計算，看看它神奇的地方：<br>Computed 去觀察 <code>num</code> 跟 <code>price</code> 這兩個資料，一但數值有變化，就算一個新的數值到畫面上。<br>HTML 這樣寫：</p><figure><div class="code-wrapper"><pre class="line-numbers language-htmlmixed" data-language="htmlmixed"><code class="language-htmlmixed">&lt;div id&#x3D;&quot;app&quot;&gt;  &lt;h3&gt;計算機&lt;&#x2F;h3&gt;  &lt;div&gt;    數量: &#123;&#123;num&#125;&#125; &lt;br&gt;    &lt;input type&#x3D;&quot;text&quot; v-model.num&#x3D;&quot;num&quot;&gt;  &lt;&#x2F;div&gt;  &lt;div&gt;    價格: &#123;&#123;price&#125;&#125; &lt;br&gt;    &lt;input type&#x3D;&quot;text&quot; v-model.num&#x3D;&quot;price&quot;&gt;  &lt;&#x2F;div&gt;  &lt;!--  &#123;&#123;&#125;&#125; 需要與 computed 內的函式同名  --&gt;  總價(表達式 num * price ) : &#123;&#123; total &#125;&#125; &lt;br&gt;&lt;&#x2F;div&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><p>JavaScript 這樣寫：</p><figure><div class="code-wrapper"><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token punctuation">&#123;</span>  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>      <span class="token literal-property property">message</span><span class="token operator">:</span><span class="token string">''</span><span class="token punctuation">,</span>      <span class="token literal-property property">num</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>      <span class="token literal-property property">price</span><span class="token operator">:</span><span class="token number">100</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token literal-property property">computed</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>    <span class="token comment">//函式需與在 HTML 中的觀察對象 &#123;&#123;&#125;&#125; 相同名稱</span>    <span class="token function">total</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token comment">//可以同時觀察多個對象，在這裡同時觀察 num 與 price</span>      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>num <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">.</span>price    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>Vue<span class="token punctuation">.</span><span class="token function">createApp</span><span class="token punctuation">(</span>app<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><iframe height="300" style="width: 100%;" scrolling="no" title="vue  " src="https://codepen.io/popeye_ux/embed/GRBEeRY?default-tab=html%2Cresult" frameborder="no" loading="lazy" allowtransparency="true" allowfullscreen="true">  See the Pen <a href="https://codepen.io/popeye_ux/pen/GRBEeRY">  vue  </a> by POPEYE (<a href="https://codepen.io/popeye_ux">@popeye_ux</a>)  on <a href="https://codepen.io">CodePen</a>.</iframe><h3 id="Computed-的特性："><a href="#Computed-的特性：" class="headerlink" title="Computed 的特性："></a>Computed 的特性：</h3><ul><li>在大部分情境中(Getter)，<strong>只讀不寫</strong>，一旦在 <code>data</code> 中，<code>Computed</code> 所觀察的對象有變化，就會進行運算，然後產生一個值渲染到畫面上，而這個新的值並不會寫回 <code>data</code>。</li><li>可以同時監聽多個變數，只要其中一個改變，就會重新運算。</li><li>沒有被 <code>Computed</code> 監聽的變數不會觸發 computed。 </li><li>computed 是一個物件。</li></ul><h2 id="Computed-和-利用兩對大括號渲染運算結果-的比較"><a href="#Computed-和-利用兩對大括號渲染運算結果-的比較" class="headerlink" title="Computed 和 利用兩對大括號渲染運算結果 的比較"></a>Computed 和 利用兩對大括號渲染運算結果 的比較</h2><p>當然也可以在 HTML 中加入 <code>&#123;&#123; 對應的資料名稱 &#125;&#125;</code> ，就可以讓畫面與資料連動，只是如果相同的資料要運用在多個地方就要反覆去寫相同的<code>&#123;&#123;運算式&#125;&#125;</code>。</p><p>HTML 這樣寫：</p><figure><div class="code-wrapper"><pre class="line-numbers language-htmlmixed" data-language="htmlmixed"><code class="language-htmlmixed">&lt;div id&#x3D;&quot;app&quot;&gt;  &lt;h3&gt;計算機&lt;&#x2F;h3&gt;   &lt;div&gt;      數量: &#123;&#123;num&#125;&#125; &lt;br&gt;    &lt;input type&#x3D;&quot;text&quot; v-model.num&#x3D;&quot;num1&quot;&gt;   &lt;&#x2F;div&gt;   &lt;div&gt;      價格: &#123;&#123;price&#125;&#125; &lt;br&gt;    &lt;input type&#x3D;&quot;text&quot; v-model.num&#x3D;&quot;price&quot;&gt;   &lt;&#x2F;div&gt;&lt;!--  &#123;&#123;&#125;&#125; 中可以放入表達式  --&gt;  總價(表達式 num1 * price ) &#123;&#123; num * price &#125;&#125; &lt;br&gt;&lt;&#x2F;div&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><p>JavaScript 這樣寫：</p><figure><div class="code-wrapper"><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token punctuation">&#123;</span>  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>      <span class="token literal-property property">num</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>      <span class="token literal-property property">price</span><span class="token operator">:</span><span class="token number">0</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span>Vue<span class="token punctuation">.</span><span class="token function">createApp</span><span class="token punctuation">(</span>app<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><iframe height="300" style="width: 100%;" scrolling="no" title="Vue methods 與  computed" src="https://codepen.io/popeye_ux/embed/jOpyVdm?default-tab=html%2Cresult" frameborder="no" loading="lazy" allowtransparency="true" allowfullscreen="true">  See the Pen <a href="https://codepen.io/popeye_ux/pen/jOpyVdm">  Vue methods 與  computed</a> by POPEYE (<a href="https://codepen.io/popeye_ux">@popeye_ux</a>)  on <a href="https://codepen.io">CodePen</a>.</iframe><h2 id="在-methods-中使用函式運算"><a href="#在-methods-中使用函式運算" class="headerlink" title="在 methods 中使用函式運算"></a>在 methods 中使用函式運算</h2><p>如果要重複運算相同的資料，<code>methods</code> 也可以做到，我們可以在 <code>methods</code> 中使用函式，將運算的過程封裝進去。</p><p>在 HTML 中只要寫 <code>&#123;&#123; 函式名稱() &#125;&#125;</code> 就可以了，methods 中的函式會去修改資料與同時將運算結果呈現在 HTML 中的 <code>&#123;&#123; 函式名稱() &#125;&#125;</code> 的位置。</p><p>在這裡承前題，但是加入一個折扣的<code>&lt;input&gt;</code>輸入框，也在資料中新增一個 <code>discount</code> 的屬性，計算處理上也加上「乘以折扣」的程序。 </p><figure><div class="code-wrapper"><pre class="line-numbers language-htmlmixed" data-language="htmlmixed"><code class="language-htmlmixed">&lt;div id&#x3D;&quot;app&quot;&gt;  &lt;h3&gt;計算機&lt;&#x2F;h3&gt;   &lt;div&gt;      數量: &#123;&#123;num&#125;&#125; &lt;br&gt;    &lt;input type&#x3D;&quot;text&quot; v-model.num&#x3D;&quot;num&quot;&gt;   &lt;&#x2F;div&gt;   &lt;div&gt;      價格: &#123;&#123;price&#125;&#125; &lt;br&gt;    &lt;input type&#x3D;&quot;text&quot; v-model.num&#x3D;&quot;price&quot;&gt;   &lt;&#x2F;div&gt;  &lt;div&gt;      折扣: &#123;&#123;discount&#125;&#125; %&lt;br&gt;    &lt;input type&#x3D;&quot;text&quot; v-model.num&#x3D;&quot;discount&quot;&gt;   &lt;&#x2F;div&gt;&lt;!--  &#123;&#123;&#125;&#125; 中可以放入表達式  --&gt;  總價(表達式 num1 * price ) &#123;&#123; num * price * discount&#x2F;100 &#125;&#125; &lt;br&gt;  總價( methods ) &#123;&#123;totalMethod()&#125;&#125;  &lt;&#x2F;div&gt;&lt;&#x2F;div&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><figure><div class="code-wrapper"><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token punctuation">&#123;</span>  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>      <span class="token literal-property property">discount</span><span class="token operator">:</span><span class="token number">100</span><span class="token punctuation">,</span>      <span class="token literal-property property">num</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>      <span class="token literal-property property">price</span><span class="token operator">:</span><span class="token number">0</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token literal-property property">methods</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>    <span class="token function">totalMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'methods'</span><span class="token punctuation">)</span>      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>num <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">.</span>price<span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">.</span>discount<span class="token operator">/</span><span class="token number">100</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>Vue<span class="token punctuation">.</span><span class="token function">createApp</span><span class="token punctuation">(</span>app<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><iframe height="300" style="width: 100%;" scrolling="no" title="Vue methods 與  computed" src="https://codepen.io/popeye_ux/embed/BaPpQOo?default-tab=html%2Cresult" frameborder="no" loading="lazy" allowtransparency="true" allowfullscreen="true">  See the Pen <a href="https://codepen.io/popeye_ux/pen/BaPpQOo">  Vue methods 與  computed</a> by POPEYE (<a href="https://codepen.io/popeye_ux">@popeye_ux</a>)  on <a href="https://codepen.io">CodePen</a>.</iframe><h2 id="Methods-是急驚風，Computed-是慢郎中"><a href="#Methods-是急驚風，Computed-是慢郎中" class="headerlink" title="Methods 是急驚風，Computed 是慢郎中"></a>Methods 是急驚風，Computed 是慢郎中</h2><p>承上題，我們加入一個不相干的 <code>message</code> 屬性，與畫面上 message 輸入框連動：</p><figure><div class="code-wrapper"><pre class="line-numbers language-htmlmixed" data-language="htmlmixed"><code class="language-htmlmixed">&lt;div id&#x3D;&quot;app&quot;&gt;  &lt;h3&gt;計算機&lt;&#x2F;h3&gt;   message: &lt;br&gt;  &lt;input type&#x3D;&quot;text&quot; v-model&#x3D;&quot;message&quot;&gt;  &lt;div&gt;      數量: &#123;&#123;num&#125;&#125; &lt;br&gt;    &lt;input type&#x3D;&quot;text&quot; v-model.num&#x3D;&quot;num&quot;&gt;   &lt;&#x2F;div&gt;   &lt;div&gt;      價格: &#123;&#123;price&#125;&#125; &lt;br&gt;    &lt;input type&#x3D;&quot;text&quot; v-model.num&#x3D;&quot;price&quot;&gt;   &lt;&#x2F;div&gt;&lt;!--  &#123;&#123;&#125;&#125; 中可以放入表達式  --&gt;  總價(表達式 num1 * price ) &#123;&#123; num * price &#125;&#125; &lt;br&gt;&lt;!-- methods 中的函式   --&gt;  總價( methods ) &#123;&#123;totalMethod()&#125;&#125;   總價( computed ) &#123;&#123;totalComputed&#125;&#125; &lt;&#x2F;div&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><figure><div class="code-wrapper"><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token punctuation">&#123;</span>  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>      <span class="token literal-property property">message</span><span class="token operator">:</span><span class="token string">''</span><span class="token punctuation">,</span>      <span class="token literal-property property">num</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>      <span class="token literal-property property">price</span><span class="token operator">:</span><span class="token number">0</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token literal-property property">methods</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>    <span class="token function">totalMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'methods'</span><span class="token punctuation">)</span>      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>num <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">.</span>price<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token literal-property property">computed</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>    <span class="token function">totalComputed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'computed'</span><span class="token punctuation">)</span>      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>num <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">.</span>price<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>Vue<span class="token punctuation">.</span><span class="token function">createApp</span><span class="token punctuation">(</span>app<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><p>當我們改變 <code>this.num</code> 與 <code>this.price</code> 會同時觸發 <code>console.log(&#39;methods&#39;)</code> 與 <code>console.log(&#39;computed&#39;)</code>，但是我們會發現在 message 輸入框中更新 data 的時候，<br><code>console.log(&#39;methods&#39;)</code> 也會被觸發，但是 <code>console.log(&#39;computed&#39;)</code> 卻沒有反應，這是因為 <code>this.message</code> 不是 <code>totalComputed()</code> 的觀察對象。</p><p>而 methods 只要 <code>data</code> 中的資料有任何風吹草動，他都會觸發。</p><p>我們可以說 <strong>Methods 是急驚風，而 Computed 則是天塌下來，只要我家沒事，都不理會。</strong></p><p>computed 與 methods 的差別：</p><ul><li>computed 只有在自己觀察的值有變動時才會觸發，而 methods 則是所有的資料有變動時都會觸發。</li><li>computed 運作的結果只會呈現在畫面中，不會寫回資料(data)，除非有加上 setter()，才會改變資料的內容。</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;甚麼是-Computed&quot;&gt;&lt;a href=&quot;#甚麼是-Computed&quot; class=&quot;headerlink&quot; title=&quot;甚麼是 Computed&quot;&gt;&lt;/a&gt;甚麼是 Computed&lt;/h2&gt;&lt;p&gt;在 Vue 中有一個叫 &lt;code&gt;computed&lt;/co</summary>
      
    
    
    
    <category term="Vue3" scheme="https://popeye-ux.github.io/categories/Vue3/"/>
    
    
    <category term="Vue, Computeds" scheme="https://popeye-ux.github.io/tags/Vue-Computeds/"/>
    
  </entry>
  
  <entry>
    <title>v-model 與 v-for 起使用的注意事項</title>
    <link href="https://popeye-ux.github.io/2023/01/07/v-modelAndV-for/"/>
    <id>https://popeye-ux.github.io/2023/01/07/v-modelAndV-for/</id>
    <published>2023-01-07T13:43:05.000Z</published>
    <updated>2023-02-11T17:14:44.534Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Vue-指令與表單應用"><a href="#Vue-指令與表單應用" class="headerlink" title="Vue 指令與表單應用"></a>Vue 指令與表單應用</h1><p>Vue3 的指令可以節省許多原生 JS 要寫的 DOM 元素綁定與事件監聽的語法，Vue 指令方便歸方便，但是如果有些地方沒有注意，表單就有渲染不出來的困擾，以下整理一下初入手 Vue 指令與表單應用要注意的事情。</p><h2 id="checkbox-的雙向綁定與渲染"><a href="#checkbox-的雙向綁定與渲染" class="headerlink" title="checkbox 的雙向綁定與渲染"></a>checkbox 的雙向綁定與渲染</h2><p>在使用 Vue 來做表單渲染與表單選項的雙向綁定時，要注意 <strong>v-model 的雙向綁定</strong> 與 <strong>v-for 的表單選項渲染</strong> 是兩件不同的工作，以 checkbox為例，在資料上面要有 2 個陣列分別對應 v-for 與 v-model：</p><ul><li>要準備一個<strong>放入所有選項的陣列</strong>，讓 <strong>v-for</strong> 渲染在表單上，讓每個 checkbox 的 value 都可以 v-bind 到陣列的值。</li><li>因為 checkbox 可以複選，所以 <strong>v-model 要綁定到一個空陣列</strong>，把勾選的項目放入陣列中雙向綁定，讓資料與畫面連動。</li><li>v-for 要用 v-bind 綁定 key 值，不然會出現 選項 與 勾選 不連動的靈異事件。</li></ul><figure><div class="code-wrapper"><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token punctuation">&#123;</span>  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>      <span class="token literal-property property">heroInfo</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// v-model 要綁以下空陣列         </span>        <span class="token literal-property property">loveHero</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>      <span class="token comment">// v-for 要綁以下陣列</span>      <span class="token literal-property property">heros</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"鋼鐵人"</span><span class="token punctuation">,</span> <span class="token string">"美國隊長"</span><span class="token punctuation">,</span> <span class="token string">"雷神索爾"</span><span class="token punctuation">,</span> <span class="token string">"綠巨人浩克"</span><span class="token punctuation">]</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>Vue<span class="token punctuation">.</span><span class="token function">createApp</span><span class="token punctuation">(</span>app<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">"#app"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><p>同時使用 v-for 與 v-model 的時候，要注意兩者下的位置，以 checkbox 為例：</p><ul><li><strong>v-for 要下在外層</strong>，不能下在 <code>&lt;input&gt;</code> 標籤裡面，放在 <code>&lt;input&gt;</code> 會沒有作用。</li><li>v-model 則要放在 <code>&lt;input&gt;</code>s 上面，value 要用 v-bind 去綁 v-for 的 item。</li></ul><figure><div class="code-wrapper"><pre class="line-numbers language-htmls" data-language="htmls"><code class="language-htmls">&lt;div id&#x3D;&quot;app&quot;&gt;  &lt;form class&#x3D;&quot;container p-2&quot;&gt;    &lt;h3&gt;超級英雄調查&lt;&#x2F;h3&gt;&lt;!-- v-for 要綁在外層的 div     --&gt;    &lt;div class&#x3D;&quot;form-check&quot; v-for&#x3D;&quot;(item,index) in heros&quot;&gt;&lt;!-- v-model 則要綁在 input 上， input 的 value 則要用 v-bind 綁在 v-for 的 item上面 --&gt;      &lt;input class&#x3D;&quot;form-check-input&quot; type&#x3D;&quot;checkbox&quot; :value&#x3D;&quot;item&quot; :id&#x3D;&quot;item&quot; :key&#x3D;&quot;index + item&quot; v-model&#x3D;&quot;heroInfo.loveHero&quot;&gt;      &lt;label class&#x3D;&quot;form-check-label&quot; :for&#x3D;&quot;item&quot;&gt;        &#123;&#123; item &#125;&#125;      &lt;&#x2F;label&gt;    &lt;&#x2F;div&gt;    &lt;hr&gt;    &lt;ul&gt;      &lt;li&gt;英雄愛好: &#123;&#123; heroInfo.loveHero &#125;&#125;&lt;&#x2F;li&gt;    &lt;&#x2F;ul&gt;  &lt;&#x2F;form&gt;&lt;&#x2F;div&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><iframe height="300" style="width: 100%;" scrolling="no" title="v-for 與 v-model 放的位置" src="https://codepen.io/popeye_ux/embed/JjBbgdK?default-tab=html%2Cresult" frameborder="no" loading="lazy" allowtransparency="true" allowfullscreen="true">  See the Pen <a href="https://codepen.io/popeye_ux/pen/JjBbgdK">  v-for 與 v-model 放的位置</a> by POPEYE (<a href="https://codepen.io/popeye_ux">@popeye_ux</a>)  on <a href="https://codepen.io">CodePen</a>.</iframe><h2 id="select-下拉選單的-v-for-渲染與-v-model-綁定"><a href="#select-下拉選單的-v-for-渲染與-v-model-綁定" class="headerlink" title="select 下拉選單的 v-for 渲染與 v-model 綁定"></a>select 下拉選單的 v-for 渲染與 v-model 綁定</h2><p>select 下拉選單 v-model 雙向綁定 與 v-for 選項渲染要注意的事項：</p><ul><li><strong>v-model 要放在 select 標籤上</strong>，綁定 data 中的空字串。</li><li><strong>v-for 則要放在 option 標籤上</strong>， value 要 v-bind 到 v-for 的 item 上面。item 的名稱可以自訂。<br>v-for 一樣要對應到 所有選項的空陣列。</li></ul><figure><div class="code-wrapper"><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token punctuation">&#123;</span>  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>      <span class="token literal-property property">herolInfo</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>                <span class="token literal-property property">favoriteHero</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>              <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>      <span class="token literal-property property">heros</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'鋼鐵人'</span><span class="token punctuation">,</span> <span class="token string">'美國隊長'</span><span class="token punctuation">,</span><span class="token string">'綠巨人浩克'</span><span class="token punctuation">,</span><span class="token string">'雷神索爾'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>Vue<span class="token punctuation">.</span><span class="token function">createApp</span><span class="token punctuation">(</span>app<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><figure><div class="code-wrapper"><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>app<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>container p-2<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>mb-3<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>favoritePet<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>mb-2<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>選擇英雄<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>favoriteHero<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>favoriteHero<span class="token punctuation">"</span></span>  <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>herolInfo.favoriteHero<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token attr-name">disabled</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>disabled<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>請選擇英雄<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">:value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item<span class="token punctuation">"</span></span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(item,index) in heros<span class="token punctuation">"</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>index + item<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>我是&#123;&#123; item &#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">></span></span>           <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>選擇英雄: &#123;&#123; herolInfo.favoriteHero &#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>s<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;Vue-指令與表單應用&quot;&gt;&lt;a href=&quot;#Vue-指令與表單應用&quot; class=&quot;headerlink&quot; title=&quot;Vue 指令與表單應用&quot;&gt;&lt;/a&gt;Vue 指令與表單應用&lt;/h1&gt;&lt;p&gt;Vue3 的指令可以節省許多原生 JS 要寫的 DOM 元素綁定與事</summary>
      
    
    
    
    <category term="Vue3" scheme="https://popeye-ux.github.io/categories/Vue3/"/>
    
    
    <category term="Vue, Vue3, JavaScript" scheme="https://popeye-ux.github.io/tags/Vue-Vue3-JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>VS Code 樣板字面值 HTML 補全</title>
    <link href="https://popeye-ux.github.io/2022/10/22/vscodeJSHtmlComplete/"/>
    <id>https://popeye-ux.github.io/2022/10/22/vscodeJSHtmlComplete/</id>
    <published>2022-10-21T23:57:40.000Z</published>
    <updated>2022-10-22T00:01:57.414Z</updated>
    
    <content type="html"><![CDATA[<p>一般在寫 HTML 時可以使用 emmet 來幫忙補全 HTML 標籤，但是在 JavaScript 中使用樣版字面值來寫 HTML 就沒有 emmet 可以用，每次寫 HTML 標籤都要自己手打，既不方便也容易出錯。</p><p>後來發現在 settings.json 檔中加入幾行 emmet 設定，就可以在寫 JS 樣版字面值時取得 HTML 標籤補全的功能。</p><h3 id="請按左下角的齒輪，選擇「設定」："><a href="#請按左下角的齒輪，選擇「設定」：" class="headerlink" title="請按左下角的齒輪，選擇「設定」："></a>請按左下角的齒輪，選擇「設定」：</h3><p><img src="https://i.imgur.com/qy6Z5wr.png"></p><h3 id="然後選擇右上角的小圖，進入-settings-json"><a href="#然後選擇右上角的小圖，進入-settings-json" class="headerlink" title="然後選擇右上角的小圖，進入 settings.json"></a>然後選擇右上角的小圖，進入 settings.json</h3><p><img src="https://i.imgur.com/q7WUjMr.png"></p><h3 id="在結尾補上這一段-emmet-設定："><a href="#在結尾補上這一段-emmet-設定：" class="headerlink" title="在結尾補上這一段 emmet 設定："></a>在結尾補上這一段 emmet 設定：</h3><p><img src="https://i.imgur.com/Jxz43N7.png"></p><figure><div class="code-wrapper"><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token comment">// 樣版字面值 HTML 補全開始</span><span class="token string-property property">"emmet.triggerExpansionOnTab"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><span class="token string-property property">"emmet.showAbbreviationSuggestions"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><span class="token string-property property">"emmet.showExpandedAbbreviation"</span><span class="token operator">:</span> <span class="token string">"always"</span><span class="token punctuation">,</span><span class="token string-property property">"emmet.includeLanguages"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token string-property property">"javascript"</span><span class="token operator">:</span> <span class="token string">"html"</span><span class="token punctuation">&#125;</span><span class="token comment">// 樣版字面值 HTML 補全結束</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;一般在寫 HTML 時可以使用 emmet 來幫忙補全 HTML 標籤，但是在 JavaScript 中使用樣版字面值來寫 HTML 就沒有 emmet 可以用，每次寫 HTML 標籤都要自己手打，既不方便也容易出錯。&lt;/p&gt;
&lt;p&gt;後來發現在 settings.json </summary>
      
    
    
    
    <category term="VS Code" scheme="https://popeye-ux.github.io/categories/VS-Code/"/>
    
    
    <category term="VS Code,樣板自面值,HTML補全" scheme="https://popeye-ux.github.io/tags/VS-Code-%E6%A8%A3%E6%9D%BF%E8%87%AA%E9%9D%A2%E5%80%BC-HTML%E8%A3%9C%E5%85%A8/"/>
    
  </entry>
  
  <entry>
    <title>箭頭函式的this</title>
    <link href="https://popeye-ux.github.io/2022/10/19/thisInArrowFunction/"/>
    <id>https://popeye-ux.github.io/2022/10/19/thisInArrowFunction/</id>
    <published>2022-10-18T16:01:11.000Z</published>
    <updated>2022-10-18T16:07:25.931Z</updated>
    
    <content type="html"><![CDATA[<h1 id="箭頭函式的this"><a href="#箭頭函式的this" class="headerlink" title="箭頭函式的this"></a>箭頭函式的this</h1><p>在 JavaScript 中遇到 this ，有 2 件事情要注意：</p><ul><li>this 代表的是 function 執行時所屬的物件，而不是 function 本身。</li><li>沒有特別指定 this 的情況下，this 預設綁定( Default Binding )「全域物件」，也就是 window。</li></ul><h2 id="物件調用與-Simple-Call"><a href="#物件調用與-Simple-Call" class="headerlink" title="物件調用與 Simple Call"></a>物件調用與 Simple Call</h2><p>先來看看 simple call 跟物件調用的狀況：</p><figure><div class="code-wrapper"><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token keyword">var</span> universe <span class="token operator">=</span> <span class="token string">'漫威宇宙'</span><span class="token punctuation">;</span><span class="token comment">// 用 var 才會是全域變數</span><span class="token keyword">function</span> <span class="token function">callHero</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>universe<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">const</span> ironMan <span class="token operator">=</span> <span class="token punctuation">&#123;</span>  <span class="token literal-property property">universe</span> <span class="token operator">:</span> <span class="token string">'鋼鐵人宇宙'</span><span class="token punctuation">,</span>  callHero<span class="token punctuation">&#125;</span>ironMan<span class="token punctuation">.</span><span class="token function">callHero</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// this 指向調用 callHero() 的 ironMan</span><span class="token keyword">var</span> spiderMan <span class="token operator">=</span> <span class="token punctuation">&#123;</span>  <span class="token literal-property property">universe</span> <span class="token operator">:</span> <span class="token string">'蜘蛛人宇宙'</span><span class="token punctuation">,</span>  callHero<span class="token punctuation">,</span>  <span class="token function">stranger</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token function">callHero</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// simple call</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>spiderMan<span class="token punctuation">.</span><span class="token function">callHero</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 蜘蛛人宇宙，調用 callHero() 的是 spiderMan 這個物件</span><span class="token comment">// 所以 this 指向 spiderMan</span>spiderMan<span class="token punctuation">.</span><span class="token function">stranger</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 漫威宇宙，因為調用 callHero() 的是 stranger()這個函式</span><span class="token comment">// 所以 this 指向全域，也就是 window</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><iframe height="300" style="width: 100%;" scrolling="no" title="Untitled" src="https://codepen.io/popeye_ux/embed/GRdagrG?default-tab=html%2Cresult" frameborder="no" loading="lazy" allowtransparency="true" allowfullscreen="true">  See the Pen <a href="https://codepen.io/popeye_ux/pen/GRdagrG">  Untitled</a> by POPEYE (<a href="https://codepen.io/popeye_ux">@popeye_ux</a>)  on <a href="https://codepen.io">CodePen</a>.</iframe><h2 id="箭頭函式的-this"><a href="#箭頭函式的-this" class="headerlink" title="箭頭函式的 this"></a>箭頭函式的 this</h2><p>當 this 出現在箭頭函式中，因為箭頭函式沒有自己的 this ，所以會指向外層。</p><p>一樣設一個全域變數與一個 callHero()函式。</p><figure><div class="code-wrapper"><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token keyword">var</span> universe <span class="token operator">=</span> <span class="token string">'漫威宇宙'</span><span class="token punctuation">;</span><span class="token comment">// 用 var 才會指向全域</span><span class="token keyword">function</span> <span class="token function">callHero</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>universe<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">var</span> spiderMan <span class="token operator">=</span> <span class="token punctuation">&#123;</span>  <span class="token literal-property property">universe</span> <span class="token operator">:</span> <span class="token string">'蜘蛛人宇宙'</span><span class="token punctuation">,</span>  callHero<span class="token punctuation">,</span>  <span class="token function-variable function">stranger</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>universe<span class="token punctuation">)</span>  <span class="token punctuation">&#125;</span>  <span class="token comment">// 箭頭函式沒有自己的 this ，所以指向外層，也就是全域  </span><span class="token punctuation">&#125;</span>spiderMan<span class="token punctuation">.</span><span class="token function">callHero</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//蜘蛛人宇宙</span>spiderMan<span class="token punctuation">.</span><span class="token function">stranger</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//漫威宇宙</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><iframe height="300" style="width: 100%;" scrolling="no" title="this arrow function" src="https://codepen.io/popeye_ux/embed/jOxoMLg?default-tab=html%2Cresult" frameborder="no" loading="lazy" allowtransparency="true" allowfullscreen="true">  See the Pen <a href="https://codepen.io/popeye_ux/pen/jOxoMLg">  this arrow function</a> by POPEYE (<a href="https://codepen.io/popeye_ux">@popeye_ux</a>)  on <a href="https://codepen.io">CodePen</a>.</iframe><h2 id="callBack-function-中的-this"><a href="#callBack-function-中的-this" class="headerlink" title="callBack function 中的 this"></a>callBack function 中的 this</h2><figure><div class="code-wrapper"><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token keyword">var</span> universe <span class="token operator">=</span> <span class="token string">'漫威宇宙'</span><span class="token punctuation">;</span><span class="token comment">// 用 var 才會指向全域</span><span class="token keyword">function</span> <span class="token function">callHero</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>universe<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">const</span> spiderMan <span class="token operator">=</span> <span class="token punctuation">&#123;</span>  <span class="token literal-property property">universe</span> <span class="token operator">:</span> <span class="token string">'蛛蛛人宇宙'</span><span class="token punctuation">,</span>  <span class="token function-variable function">callHero</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'1'</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>universe<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 1 蜘蛛人宇宙</span>    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'2'</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>universe<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">// 2 漫威宇宙</span>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'3'</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">// 3 window</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>spiderMan<span class="token punctuation">.</span><span class="token function">callHero</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><iframe height="300" style="width: 100%;" scrolling="no" title="callBack this 1" src="https://codepen.io/popeye_ux/embed/abGrpGo?default-tab=html%2Cresult" frameborder="no" loading="lazy" allowtransparency="true" allowfullscreen="true">  See the Pen <a href="https://codepen.io/popeye_ux/pen/abGrpGo">  callBack this 1</a> by POPEYE (<a href="https://codepen.io/popeye_ux">@popeye_ux</a>)  on <a href="https://codepen.io">CodePen</a>.</iframe><hr><p>但是 callBack function 被包在一個物件屬性的函式 callHero 中，當 <code>spiderMan.callHero()</code>，也就是spiderMan 調用 callHero()的時候，setTimeout 是被 callHero 這個函式所調用，這時 this 指向全域的 window。</p><p>同樣的例子，在 setTimeout() 中改用箭頭函式，則 this 會指向外層，也就是調用他的物件– spiderMan 這個物件。</p><figure><div class="code-wrapper"><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token keyword">var</span> universe <span class="token operator">=</span> <span class="token string">'漫威宇宙'</span><span class="token punctuation">;</span><span class="token comment">// 用 var 才會指向全域</span><span class="token keyword">function</span> <span class="token function">callHero</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>universe<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">const</span> spiderMan <span class="token operator">=</span> <span class="token punctuation">&#123;</span>  <span class="token literal-property property">universe</span> <span class="token operator">:</span> <span class="token string">'蛛蛛人宇宙'</span><span class="token punctuation">,</span>  <span class="token function-variable function">callHero</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'1'</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>universe<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 1 蜘蛛人宇宙</span>    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'2'</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>universe<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">// 2 蛛蛛人宇宙</span>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'3'</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">// 3 &#123;universe: '蛛蛛人宇宙', callHero: ƒ&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>spiderMan<span class="token punctuation">.</span><span class="token function">callHero</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><iframe height="300" style="width: 100%;" scrolling="no" title="callBack this 1" src="https://codepen.io/popeye_ux/embed/MWGdpgM?default-tab=html%2Cresult" frameborder="no" loading="lazy" allowtransparency="true" allowfullscreen="true">  See the Pen <a href="https://codepen.io/popeye_ux/pen/MWGdpgM">  callBack this 1</a> by POPEYE (<a href="https://codepen.io/popeye_ux">@popeye_ux</a>)  on <a href="https://codepen.io">CodePen</a>.</iframe>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;箭頭函式的this&quot;&gt;&lt;a href=&quot;#箭頭函式的this&quot; class=&quot;headerlink&quot; title=&quot;箭頭函式的this&quot;&gt;&lt;/a&gt;箭頭函式的this&lt;/h1&gt;&lt;p&gt;在 JavaScript 中遇到 this ，有 2 件事情要注意：&lt;/p&gt;
&lt;ul</summary>
      
    
    
    
    <category term="JavaScript" scheme="https://popeye-ux.github.io/categories/JavaScript/"/>
    
    
    <category term="JavaScript,this,箭頭函式" scheme="https://popeye-ux.github.io/tags/JavaScript-this-%E7%AE%AD%E9%A0%AD%E5%87%BD%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>getAttributeSetAttribute</title>
    <link href="https://popeye-ux.github.io/2022/07/06/getAttributeSetAttribute/"/>
    <id>https://popeye-ux.github.io/2022/07/06/getAttributeSetAttribute/</id>
    <published>2022-07-06T15:27:46.000Z</published>
    <updated>2022-07-06T00:34:30.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://i.imgur.com/TKSzURm.jpg"><br>Hi,我是POPEYE，今天要來談談 getAttribute 與 setAttribute 。</p><p>getAttribute 與 setAttribute 是兩個我比較容易混淆的 JS 方法，所以我花了一點工夫來研究一下這兩個方法如何使用。</p><p>首先要了解這兩種方法是存取與操作 HTML 標籤屬性的方法，都必須要透過<strong>選取到某個 HTML DOM 節點來操作</strong>，所以寫法上一定是這樣子：</p><figure><div class="code-wrapper"><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx">element<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'屬性名稱'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>element<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'屬性名稱'</span><span class="token punctuation">,</span><span class="token string">'屬性值'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//屬性名稱為 id 、 class 、 href、 data-** ……等等</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></div></figure><h2 id="getAttribute"><a href="#getAttribute" class="headerlink" title="getAttribute"></a>getAttribute</h2><p>getAttribute 用來取得 HTML 標籤的屬性值，如果指定的屬性不存在，則會回傳 null 或 “”。</p><figure><div class="code-wrapper"><pre class="line-numbers language-htmlmixed" data-language="htmlmixed"><code class="language-htmlmixed">&lt;h2 class&#x3D;&quot;title&quot; id&#x3D;&quot;quiet&quot; data-band&#x3D;&quot;Mayday&quot; name&#x3D;&quot;好好&quot;&gt;    最安靜的時刻，回憶總是最喧囂&lt;&#x2F;h2&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></div></figure><figure><div class="code-wrapper"><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token comment">//JavaScript</span><span class="token keyword">const</span> quiet <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.title'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>quiet<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'class'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// "title"</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>quiet<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'id'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//"quiet"</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>quiet<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'data-band'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//"Mayday"</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>quiet<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//"好好"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><p>所以我們可以把 HTML 節點的屬性值取出，拿來組字串之後，再塞回本來的節點去。</p><figure><div class="code-wrapper"><pre class="line-numbers language-htmlmixed" data-language="htmlmixed"><code class="language-htmlmixed">&lt;h2 class&#x3D;&quot;title&quot; id&#x3D;&quot;quiet&quot; data-band&#x3D;&quot;Mayday&quot; name&#x3D;&quot;好好&quot;&gt;    最安靜的時刻，回憶總是最喧囂&lt;&#x2F;h2&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></div></figure><figure><div class="code-wrapper"><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token comment">//JavaScript</span><span class="token keyword">const</span> quiet <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.title'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">let</span> str <span class="token operator">=</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">我最喜歡的歌詞是《</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>quiet<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'data-band'</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">》唱的《</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>quiet<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'data-song'</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">》，裡面這一句「</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>quiet<span class="token punctuation">.</span>textContent<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">」</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>quiet<span class="token punctuation">.</span>textContent <span class="token operator">=</span> str<span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>quiet<span class="token punctuation">.</span>textContent<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//"我最喜歡的歌詞是《Mayday》唱的《null》，裡面這一句「最安靜的時刻，回憶總是最喧囂」"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><p>本來 <code>&lt;h2&gt;</code> 標籤中 「最安靜的時刻，回憶總是最喧囂」 ，被改成 「我最喜歡的歌詞是《Mayday》唱的《null》，裡面這一句「最安靜的時刻，回憶總是最喧囂」」囉！！！</p><h2 id="setAttribute"><a href="#setAttribute" class="headerlink" title="setAttribute"></a>setAttribute</h2><p>setAttribute 的功用在於修改 HTML 節的的屬性。</p><figure><div class="code-wrapper"><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx">element<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'屬性名稱'</span><span class="token punctuation">,</span><span class="token string">'屬性值'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//屬性名稱為 id 、 class 、 href、 data-** ……等等</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></div></figure><p>不囉嗦！來看一下範例：</p><figure><div class="code-wrapper"><pre class="line-numbers language-htmlmixed" data-language="htmlmixed"><code class="language-htmlmixed">&lt;h2 class&#x3D;&quot;title2&quot; data-song&#x3D;&quot;好好&quot; data-band&#x3D;&quot;Mayday&quot;&gt;    最喧囂的時刻，寂寞包圍著孤島&lt;&#x2F;h2&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></div></figure><figure><div class="code-wrapper"><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token selector">.blue</span> <span class="token punctuation">&#123;</span>  <span class="token property">color</span><span class="token punctuation">:</span> blue<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></div></figure><figure><div class="code-wrapper"><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token comment">//JavaScript</span><span class="token keyword">const</span> noise <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.title2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>noise<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"data-song"</span><span class="token punctuation">,</span><span class="token string">"瘋狂世界"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>noise<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'class'</span><span class="token punctuation">,</span><span class="token string">'blue'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//字的顏色也變成藍色了</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>noise<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'data-song'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//瘋狂世界"</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>noise<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'class'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//"blue"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><ul><li><a href="https://codepen.io/popeye_ux/pen/abLmggK">CODEPEN範例</a></li></ul><h2 id="getAttribute-與-setAttribute-的進階使用"><a href="#getAttribute-與-setAttribute-的進階使用" class="headerlink" title="getAttribute 與 setAttribute 的進階使用"></a>getAttribute 與 setAttribute 的進階使用</h2><p>除了用來操作屬性之外，在做事件監聽的時候，也可以利用 getAttribute 來做一些判斷：</p><figure><div class="code-wrapper"><pre class="line-numbers language-htmlmixed" data-language="htmlmixed"><code class="language-htmlmixed">&lt;ul class&#x3D;&quot;item&quot;&gt;  &lt;li class &#x3D;&quot;item1&quot;&gt;item1&lt;&#x2F;li&gt;  &lt;li class &#x3D;&quot;item2&quot;&gt;item2&lt;&#x2F;li&gt;  &lt;li class &#x3D;&quot;item3&quot;&gt;item3&lt;&#x2F;li&gt;  &lt;li class &#x3D;&quot;item4&quot;&gt;item4&lt;&#x2F;li&gt;  &lt;li class &#x3D;&quot;item5&quot;&gt;item5&lt;&#x2F;li&gt;&lt;&#x2F;ul&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><figure><div class="code-wrapper"><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token selector">.item</span><span class="token punctuation">&#123;</span>  <span class="token property">font-size</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span> <span class="token punctuation">&#125;</span><span class="token selector">.item1, .item2, .item3, .item4, .item5</span><span class="token punctuation">&#123;</span>  <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.blue</span><span class="token punctuation">&#123;</span>  <span class="token property">color</span> <span class="token punctuation">:</span> blue<span class="token punctuation">;</span>  <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><figure><div class="code-wrapper"><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token keyword">const</span> item <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.item'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>item<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>  <span class="token keyword">if</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'class'</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'item3'</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    e<span class="token punctuation">.</span>target<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'class'</span><span class="token punctuation">,</span><span class="token string">'blue'</span><span class="token punctuation">)</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><p>在這裡利用 <code>e.target.getAttribute(&#39;class&#39;)</code> 來判斷如果點擊到的 <code>class</code> 屬性如果是 <code>item3</code> ， 則把 e.target 的 class 屬性變成藍色的。</p><p>MDN 有把 getAttribute 與 setAttribute 這兩個節點方法可以操作的 HTML 屬性列出來，有需要時可以參考一下：</p><ul><li><a href="https://developer.mozilla.org/zh-TW/docs/Web/HTML/Attributes">MDN HTML attribute reference</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/TKSzURm.jpg&quot;&gt;&lt;br&gt;Hi,我是POPEYE，今天要來談談 getAttribute 與 setAttribute 。&lt;/p&gt;
&lt;p&gt;getAttribute 與 setAttribute 是兩個我比較</summary>
      
    
    
    
    <category term="JavaScript" scheme="https://popeye-ux.github.io/categories/JavaScript/"/>
    
    
    <category term="JavaScript, JS直播班" scheme="https://popeye-ux.github.io/tags/JavaScript-JS%E7%9B%B4%E6%92%AD%E7%8F%AD/"/>
    
  </entry>
  
  <entry>
    <title>C3.js基本使用方法</title>
    <link href="https://popeye-ux.github.io/2021/11/29/c3js/"/>
    <id>https://popeye-ux.github.io/2021/11/29/c3js/</id>
    <published>2021-11-29T15:38:31.000Z</published>
    <updated>2022-05-23T00:47:22.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://i.imgur.com/wprOc5M.jpg"></p><p>這一周六角學院 JS 直播班教的是 C3.js 這個畫圖表的套件。</p><p>對於一個畫圖表快二十年的人，看到這個套件感到很親切。不同於手工畫的圖表，C3.js可以透過程式把資料帶入，只要資料更新，圖表也同步更新。</p><p>其實我也使用過另外一套圖表套件 Chart.js，那是在前公司結束前，做了一個 COVID-19 的網頁，裡面圖表就是用 Chart.js 做的，那時還不會串 API ，也不會篩選資料，每天都用手動把資料更新，真的很傻B！</p><p>誠如老師講的，不用真的把文件整個看過才會用，基本上只要抓住一些設定的要點，就可以做出還不錯的圖表。以下就整理了一些我試過可行的設定，方便未來要用時，可以快速上手：</p><h2 id="導入方法"><a href="#導入方法" class="headerlink" title="導入方法"></a>導入方法</h2><p>在HTML中插入以下程式碼：</p><ul><li>CSS要放在自己寫的CSS之前。</li><li>透過CDN抓進來使用的 d3.js 與 c3.js 也要放在自己寫的 JS檔之前。</li></ul><figure><div class="code-wrapper"><pre class="line-numbers language-htmlmixed" data-language="htmlmixed"><code class="language-htmlmixed">&lt;link rel&#x3D;&quot;stylesheet&quot; href&#x3D;&quot;https:&#x2F;&#x2F;cdnjs.cloudflare.com&#x2F;ajax&#x2F;libs&#x2F;c3&#x2F;0.7.18&#x2F;c3.css&quot;&gt;&lt;script src&#x3D;&quot;https:&#x2F;&#x2F;cdnjs.cloudflare.com&#x2F;ajax&#x2F;libs&#x2F;d3&#x2F;5.16.0&#x2F;d3.js&quot;&gt;&lt;&#x2F;script&gt;&lt;script src&#x3D;&quot;https:&#x2F;&#x2F;cdnjs.cloudflare.com&#x2F;ajax&#x2F;libs&#x2F;c3&#x2F;0.7.18&#x2F;c3.js&quot;&gt;&lt;&#x2F;script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></div></figure><h2 id="曲線圖-Line-Chart"><a href="#曲線圖-Line-Chart" class="headerlink" title="曲線圖 Line Chart"></a>曲線圖 Line Chart</h2><p>基本上套件就是一個物件，而所有的圖表的資料與外觀都在 generate 這個屬性的函式參數裡面設定。而  generate 函式的參數也是一個物件。</p><p>可以透過 <code>bindto</code> 這個屬性把圖表綁定到 HTML 的 DOM 元素上。 </p><figure><div class="code-wrapper"><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token keyword">var</span> chart <span class="token operator">=</span> c3<span class="token punctuation">.</span><span class="token function">generate</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>  <span class="token literal-property property">bindto</span><span class="token operator">:</span> <span class="token string">".chart"</span><span class="token punctuation">,</span>  <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// x 是設定 x 軸刻度的格式與數據</span>    <span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token string">"date"</span><span class="token punctuation">,</span>    <span class="token literal-property property">columns</span><span class="token operator">:</span> <span class="token punctuation">[</span>      <span class="token comment">//"date" 綁定到 x 屬性的值"date" ，日期是字串格式</span>      <span class="token punctuation">[</span><span class="token string">"date"</span><span class="token punctuation">,</span> <span class="token string">"2021-11-21"</span><span class="token punctuation">,</span> <span class="token string">"2021-11-22"</span><span class="token punctuation">,</span> <span class="token string">"2021-11-23"</span><span class="token punctuation">,</span> <span class="token string">"2021-11-24"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>      <span class="token comment">//資料部分，可以透過 變數 帶入</span>      <span class="token punctuation">[</span><span class="token string">"data1"</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">]</span><span class="token punctuation">,</span>      <span class="token punctuation">[</span><span class="token string">"data2"</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">]</span>    <span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token comment">// 顯示線圖上面每一點的資料</span>    <span class="token comment">// labels: true</span>    <span class="token comment">// 每一點的資料顯示 $</span>    <span class="token literal-property property">labels</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>      <span class="token literal-property property">format</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>        <span class="token literal-property property">data1</span><span class="token operator">:</span> d3<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"$"</span><span class="token punctuation">)</span>      <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token comment">//設定一組色票讓data自己捉 線 的顏色</span>  <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token literal-property property">pattern</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"#ff9896"</span><span class="token punctuation">,</span> <span class="token string">"#9467bd"</span><span class="token punctuation">,</span> <span class="token string">"#c5b0d5"</span><span class="token punctuation">,</span> <span class="token string">"#8c564b"</span><span class="token punctuation">,</span> <span class="token string">"#c49c94"</span><span class="token punctuation">,</span> <span class="token string">"#e377c2"</span><span class="token punctuation">]</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token comment">// 設定顯示格線(虛線)</span>  <span class="token literal-property property">grid</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>      <span class="token literal-property property">show</span><span class="token operator">:</span> <span class="token boolean">true</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token literal-property property">y</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>      <span class="token literal-property property">show</span><span class="token operator">:</span> <span class="token boolean">true</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token comment">//整體尺寸 不設定的話，圖表可以自適應地伸縮</span>  <span class="token literal-property property">size</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">780</span><span class="token punctuation">,</span>    <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">400</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token comment">//padding 會壓縮線圖的大小</span>  <span class="token literal-property property">padding</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token literal-property property">top</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>    <span class="token comment">//right設太小，會讓最右側刻度的日期被遮住</span>    <span class="token literal-property property">right</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>    <span class="token literal-property property">bottom</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>    <span class="token literal-property property">left</span><span class="token operator">:</span> <span class="token number">100</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token comment">//設定坐標軸格式</span>  <span class="token literal-property property">axis</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>      <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">"timeseries"</span><span class="token punctuation">,</span>      <span class="token comment">//刻度</span>      <span class="token literal-property property">tick</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>        <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>        <span class="token literal-property property">format</span><span class="token operator">:</span> <span class="token string">"%Y-%m-%d"</span><span class="token punctuation">,</span>        <span class="token comment">// outer 拿掉圖表最右側多出來的刻度</span>        <span class="token literal-property property">outer</span><span class="token operator">:</span> <span class="token boolean">false</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>      <span class="token comment">// 設定x軸說明 或是 數據 的單位</span>      <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>        <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">"日期"</span><span class="token punctuation">,</span>        <span class="token comment">//label 橫式的位置有以下幾種</span>        <span class="token comment">//inner-right [default],inner-center,inner-left,outer-right,outer-center,outer-left</span>        <span class="token literal-property property">position</span><span class="token operator">:</span> <span class="token string">"outer-center"</span>      <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token literal-property property">y</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>      <span class="token literal-property property">show</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>      <span class="token literal-property property">tick</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>        <span class="token comment">//label 的位置有以下幾種</span>        <span class="token comment">//inner-right [default],inner-center,inner-left,outer-right,outer-center,outer-left</span>        <span class="token literal-property property">position</span><span class="token operator">:</span> <span class="token string">"inner-center"</span><span class="token punctuation">,</span>        <span class="token comment">// Y軸 數字前面加上 $ 字號</span>        <span class="token literal-property property">format</span><span class="token operator">:</span> d3<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"$,"</span><span class="token punctuation">)</span>        <span class="token comment">//format: function (d) &#123; return "$" + d; &#125;</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>      <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>        <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">"價格"</span><span class="token punctuation">,</span>        <span class="token comment">// inner-right : default, inner-center, inner-left, outer-right, outer-center, outer-left</span>        <span class="token literal-property property">position</span><span class="token operator">:</span> <span class="token string">"outer-middle"</span>      <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token comment">//設定圖例</span>  <span class="token literal-property property">legend</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token literal-property property">show</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>    <span class="token comment">//圖例的位置只有 'right' 與 'bottom'</span>    <span class="token literal-property property">position</span><span class="token operator">:</span> <span class="token string">"bottom"</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token comment">//圖表的標題</span>  <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">"好心指數"</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><p>CSS設定的部分：</p><figure><div class="code-wrapper"><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token selector">// CSS.c3-title</span> <span class="token punctuation">&#123;</span>  <span class="token property">font-size</span><span class="token punctuation">:</span> 32px<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.c3-axis-y text</span> <span class="token punctuation">&#123;</span>  <span class="token property">fill</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>  <span class="token property">font-size</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.c3-axis-x text</span> <span class="token punctuation">&#123;</span>  <span class="token property">font-size</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span>  <span class="token property">fill</span><span class="token punctuation">:</span> green<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.c3-axis-y text</span> <span class="token punctuation">&#123;</span>  <span class="token property">font-size</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>  <span class="token property">fill</span><span class="token punctuation">:</span> green<span class="token punctuation">;</span>  <span class="token property">letter-spacing</span><span class="token punctuation">:</span> 2px<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.c3-axis-y .c3-axis-y-label</span> <span class="token punctuation">&#123;</span>  <span class="token property">font-size</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>  <span class="token property">fill</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.c3-line</span> <span class="token punctuation">&#123;</span>  <span class="token property">stroke-width</span><span class="token punctuation">:</span> 3px<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.c3-circle</span> <span class="token punctuation">&#123;</span>  <span class="token property">fill</span><span class="token punctuation">:</span> blue <span class="token important">!important</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><p><a href="https://codepen.io/popeye_ux/pen/WNEqNPO">Line Chart 範例</a></p><h2 id="Bar-Chart-長條圖"><a href="#Bar-Chart-長條圖" class="headerlink" title="Bar Chart 長條圖"></a>Bar Chart 長條圖</h2><p>Bar Chart 的設定大同小異，差別在於 axis 可以設定 <code>rotated: false</code> , 坐標軸翻轉，由垂直轉為水平。</p><figure><div class="code-wrapper"><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token keyword">var</span> chart <span class="token operator">=</span> c3<span class="token punctuation">.</span><span class="token function">generate</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>  <span class="token literal-property property">bindto</span><span class="token operator">:</span> <span class="token string">".chart"</span><span class="token punctuation">,</span>  <span class="token comment">//是bind，不是bid</span>  <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token string">"x"</span><span class="token punctuation">,</span>    <span class="token literal-property property">columns</span><span class="token operator">:</span> <span class="token punctuation">[</span>      <span class="token punctuation">[</span>        <span class="token string">"x"</span><span class="token punctuation">,</span>        <span class="token string">"2013-01-01"</span><span class="token punctuation">,</span>        <span class="token string">"2013-01-02"</span><span class="token punctuation">,</span>        <span class="token string">"2013-01-03"</span><span class="token punctuation">,</span>        <span class="token string">"2013-01-04"</span><span class="token punctuation">,</span>        <span class="token string">"2013-01-05"</span>      <span class="token punctuation">]</span><span class="token punctuation">,</span>      <span class="token punctuation">[</span><span class="token string">"data1"</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">,</span> <span class="token number">150</span><span class="token punctuation">]</span><span class="token punctuation">,</span>      <span class="token punctuation">[</span><span class="token string">"data2"</span><span class="token punctuation">,</span> <span class="token number">130</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">140</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">150</span><span class="token punctuation">]</span>    <span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token comment">//type 設定圖表類型</span>    <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">"bar"</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token literal-property property">bar</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token comment">//設定長條圖每一條寬度</span>    <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>      <span class="token literal-property property">ratio</span><span class="token operator">:</span> <span class="token number">0.5</span> <span class="token comment">// this makes bar width 50% of length between ticks</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// or</span>    <span class="token comment">//width: 100 // this makes bar width 100px</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token comment">//設定一組色票讓data自己捉</span>  <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token literal-property property">pattern</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"#ff9896"</span><span class="token punctuation">,</span> <span class="token string">"#9467bd"</span><span class="token punctuation">,</span> <span class="token string">"#c5b0d5"</span><span class="token punctuation">,</span> <span class="token string">"#8c564b"</span><span class="token punctuation">,</span> <span class="token string">"#c49c94"</span><span class="token punctuation">,</span> <span class="token string">"#e377c2"</span><span class="token punctuation">]</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token comment">// 設定顯示格線(虛線)</span>  <span class="token literal-property property">grid</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>      <span class="token literal-property property">show</span><span class="token operator">:</span> <span class="token boolean">true</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token literal-property property">y</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>      <span class="token literal-property property">show</span><span class="token operator">:</span> <span class="token boolean">true</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token comment">//整體尺寸 不設定的話，圖表可以自適應地伸縮</span>  <span class="token literal-property property">size</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">780</span><span class="token punctuation">,</span>    <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">400</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token literal-property property">padding</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token literal-property property">top</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>    <span class="token literal-property property">right</span><span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span>    <span class="token literal-property property">bottom</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>    <span class="token literal-property property">left</span><span class="token operator">:</span> <span class="token number">100</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token literal-property property">axis</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token comment">//rotated 設定坐標軸翻轉</span>    <span class="token literal-property property">rotated</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>    <span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>      <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">"category"</span><span class="token punctuation">,</span>      <span class="token comment">// 設定x軸說明 或是 數據 的單位</span>      <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>        <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">"日期"</span><span class="token punctuation">,</span>        <span class="token comment">//label 橫式的位置有以下幾種</span>        <span class="token comment">//inner-right [default],inner-center,inner-left,outer-right,outer-center,outer-left</span>        <span class="token literal-property property">position</span><span class="token operator">:</span> <span class="token string">"outer-center"</span>      <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token literal-property property">y</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>      <span class="token literal-property property">tick</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>        <span class="token literal-property property">position</span><span class="token operator">:</span> <span class="token string">"inner-center"</span><span class="token punctuation">,</span>        <span class="token comment">// Y軸 數字前面加上 $ 字號</span>        <span class="token literal-property property">format</span><span class="token operator">:</span> d3<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"$,"</span><span class="token punctuation">)</span>        <span class="token comment">//format: function (d) &#123; return "$" + d; &#125;</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>      <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>        <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">"價格"</span><span class="token punctuation">,</span>        <span class="token comment">// inner-right : default, inner-center, inner-left, outer-right, outer-center, outer-left</span>        <span class="token literal-property property">position</span><span class="token operator">:</span> <span class="token string">"outer-middle"</span>      <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token literal-property property">legend</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token literal-property property">show</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>    <span class="token comment">//圖例的位置 'bottom'</span>    <span class="token literal-property property">position</span><span class="token operator">:</span> <span class="token string">"bottom"</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token comment">//圖表的標題</span>  <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">"銷售金額"</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><p><a href="https://codepen.io/popeye_ux/pen/yLodYmK">Bar Chart 範例</a></p><h3 id="Pie-Chart-餅圖"><a href="#Pie-Chart-餅圖" class="headerlink" title="Pie Chart 餅圖"></a>Pie Chart 餅圖</h3><figure><div class="code-wrapper"><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token keyword">var</span> chart <span class="token operator">=</span> c3<span class="token punctuation">.</span><span class="token function">generate</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>  <span class="token literal-property property">bindto</span><span class="token operator">:</span> <span class="token string">".chart"</span><span class="token punctuation">,</span>  <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// iris data from R</span>    <span class="token literal-property property">columns</span><span class="token operator">:</span> <span class="token punctuation">[</span>      <span class="token punctuation">[</span><span class="token string">"iPhone"</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">]</span><span class="token punctuation">,</span>      <span class="token punctuation">[</span><span class="token string">"其他手機"</span><span class="token punctuation">,</span> <span class="token number">120</span><span class="token punctuation">]</span>    <span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">"pie"</span><span class="token punctuation">,</span>    <span class="token literal-property property">labels</span><span class="token operator">:</span> <span class="token boolean">true</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token comment">//設定一組色票讓data自己捉 線 的顏色</span>  <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token literal-property property">pattern</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"#ff9896"</span><span class="token punctuation">,</span> <span class="token string">"#9467bd"</span><span class="token punctuation">,</span> <span class="token string">"#c5b0d5"</span><span class="token punctuation">,</span> <span class="token string">"#8c564b"</span><span class="token punctuation">,</span> <span class="token string">"#c49c94"</span><span class="token punctuation">,</span> <span class="token string">"#e377c2"</span><span class="token punctuation">]</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token comment">//整體尺寸，本來置中，會往畫面左邊靠</span>  <span class="token literal-property property">size</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">780</span><span class="token punctuation">,</span>    <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">400</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token comment">//padding 會壓縮線圖的大小</span>  <span class="token literal-property property">padding</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token literal-property property">top</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>        <span class="token literal-property property">right</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>    <span class="token literal-property property">bottom</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>    <span class="token literal-property property">left</span><span class="token operator">:</span> <span class="token number">100</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token comment">//設定圖例</span>  <span class="token literal-property property">legend</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token literal-property property">show</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>    <span class="token comment">//圖例的位置只有 'right' 與 'bottom'</span>    <span class="token literal-property property">position</span><span class="token operator">:</span> <span class="token string">"bottom"</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token comment">//pie 及 donut 圖 label 設定的方式和其他圖不一樣，要注意</span>  <span class="token literal-property property">pie</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>      <span class="token literal-property property">show</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>      <span class="token function-variable function">format</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span> ratio<span class="token punctuation">,</span> id</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> d3<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"$"</span><span class="token punctuation">)</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token comment">//圖表的標題</span>  <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">"銷售金額比例"</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><p><a href="https://codepen.io/popeye_ux/pen/PoKrVGe">Pie Chart 範例</a></p><h2 id="Donut-Chart-甜甜圈圖"><a href="#Donut-Chart-甜甜圈圖" class="headerlink" title="Donut Chart 甜甜圈圖"></a>Donut Chart 甜甜圈圖</h2><figure><div class="code-wrapper"><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token keyword">var</span> chart <span class="token operator">=</span> c3<span class="token punctuation">.</span><span class="token function">generate</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>  <span class="token literal-property property">bindto</span><span class="token operator">:</span> <span class="token string">".chart"</span><span class="token punctuation">,</span>  <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// iris data from R</span>    <span class="token literal-property property">columns</span><span class="token operator">:</span> <span class="token punctuation">[</span>      <span class="token punctuation">[</span><span class="token string">"iPhone"</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">]</span><span class="token punctuation">,</span>      <span class="token punctuation">[</span><span class="token string">"其他手機"</span><span class="token punctuation">,</span> <span class="token number">120</span><span class="token punctuation">]</span>    <span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">"donut"</span><span class="token punctuation">,</span>    <span class="token literal-property property">labels</span><span class="token operator">:</span> <span class="token boolean">true</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token comment">//設定一組色票讓data自己捉 線 的顏色</span>  <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token literal-property property">pattern</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"#ff9896"</span><span class="token punctuation">,</span> <span class="token string">"#9467bd"</span><span class="token punctuation">,</span> <span class="token string">"#c5b0d5"</span><span class="token punctuation">,</span> <span class="token string">"#8c564b"</span><span class="token punctuation">,</span> <span class="token string">"#c49c94"</span><span class="token punctuation">,</span> <span class="token string">"#e377c2"</span><span class="token punctuation">]</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token comment">//整體尺寸，本來置中，會往畫面左邊靠</span>  <span class="token literal-property property">size</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">780</span><span class="token punctuation">,</span>    <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">400</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token comment">//padding 會壓縮線圖的大小</span>  <span class="token literal-property property">padding</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token literal-property property">top</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>    <span class="token comment">//right設太小，會讓最右側刻度的日期被遮住</span>    <span class="token literal-property property">right</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>    <span class="token literal-property property">bottom</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>    <span class="token literal-property property">left</span><span class="token operator">:</span> <span class="token number">100</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token comment">//設定圖例</span>  <span class="token literal-property property">legend</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token literal-property property">show</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>    <span class="token comment">//圖例的位置只有 'right' 與 'bottom'</span>    <span class="token literal-property property">position</span><span class="token operator">:</span> <span class="token string">"bottom"</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token comment">//pie 及 donut 圖 label 設定的方式和其他圖不一樣，要注意</span>  <span class="token literal-property property">donut</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">"地區"</span><span class="token punctuation">,</span>    <span class="token comment">//控制環的粗細</span>    <span class="token literal-property property">width</span><span class="token operator">:</span><span class="token number">80</span><span class="token punctuation">,</span>    <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>      <span class="token literal-property property">show</span><span class="token operator">:</span> <span class="token boolean">true</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token comment">//圖表的外部標題</span>  <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">"銷售金額比例"</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><p><a href="https://codepen.io/popeye_ux/pen/ExvBMPw">Donut Chart 範例</a></p><p>先整理以上這些基本設定，以後若有新發現在隨時更新！如果有錯誤的地方，也請不吝告訴我。感謝！</p><h3 id="參考資料"><a href="#參考資料" class="headerlink" title="參考資料"></a>參考資料</h3><ul><li><a href="https://vainolo.com/2019/10/14/learning-c3-js-lesson-3-line-charts/">Learning C3.js – Lesson 3 – Line Charts</a></li><li><a href="https://www.demo2s.com/javascript/javascript-c3-js-x-axis-label-text-position.html">Javascript C3.js X axis label text position</a></li><li><a href="https://codepen.io/travisluong/pen/eNeaMe?editors=1010">CodePen Home C3 Line Chart Demo</a></li><li><a href="https://vainolo.com/2019/10/25/learning-c3-js-lesson-4-bar-charts/">Learning C3.js – Lesson 4 – Bar Charts</a></li><li><a href="https://hackmd.io/@sylviekuo/B1Jr5wNgD">js學習60天-c3.js筆記</a></li><li><a href="https://hsuchihting.github.io/javascript/20200715/3292510004/">JS 筆記 - C3.js 基本認識</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/wprOc5M.jpg&quot;&gt;&lt;/p&gt;
&lt;p&gt;這一周六角學院 JS 直播班教的是 C3.js 這個畫圖表的套件。&lt;/p&gt;
&lt;p&gt;對於一個畫圖表快二十年的人，看到這個套件感到很親切。不同於手工畫的圖表，C3.js可以透過</summary>
      
    
    
    
    <category term="JavaScript" scheme="https://popeye-ux.github.io/categories/JavaScript/"/>
    
    
    <category term="JavaScript, JS直播班, C3.js" scheme="https://popeye-ux.github.io/tags/JavaScript-JS%E7%9B%B4%E6%92%AD%E7%8F%AD-C3-js/"/>
    
  </entry>
  
  <entry>
    <title>表單取值的誤區</title>
    <link href="https://popeye-ux.github.io/2021/11/28/formValueMistake/"/>
    <id>https://popeye-ux.github.io/2021/11/28/formValueMistake/</id>
    <published>2021-11-28T09:24:39.000Z</published>
    <updated>2022-07-06T00:34:24.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://i.imgur.com/5g9rhAh.jpg"></p><h2 id="誤區一：忘記將表單中取出的「數字」由字串轉為數字"><a href="#誤區一：忘記將表單中取出的「數字」由字串轉為數字" class="headerlink" title="誤區一：忘記將表單中取出的「數字」由字串轉為數字"></a>誤區一：忘記將表單中取出的「數字」由字串轉為數字</h2><p>從 <code>input</code> 中取出的值為「字串」，就算 <code>type=number</code> 取出來的值也是字串，不是數字。</p><p>在JS直播班第五周的作業，我就犯了這樣的錯誤。</p><figure><div class="code-wrapper"><pre class="line-numbers language-htmlmixed" data-language="htmlmixed"><code class="language-htmlmixed">&lt;input type&#x3D;&quot;number&quot; id&#x3D;&quot;targetInput&quot; value&#x3D;&#39;123&#39;&gt;&lt;button id&#x3D;&quot;btn&quot;&gt;觸發按鈕&lt;&#x2F;button&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></div></figure><p>原本的 <code>el.value</code> 顯示為 <code>string</code>，要透過 <code>parseInt</code>之後才會轉為數字。</p><figure><div class="code-wrapper"><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token keyword">let</span> el <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"#targetInput"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">let</span> btn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"#btn"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>btn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>el<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//"123" 甚麼都不輸入的話，輸出預設值</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> el<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//"string"</span>  <span class="token keyword">let</span> newValue <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>el<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> newValue<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//"number"</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><h2 id="誤區二：-value-getAttribute-39-value-39-兩者大不同"><a href="#誤區二：-value-getAttribute-39-value-39-兩者大不同" class="headerlink" title="誤區二：.value, .getAttribute(&#39;value&#39;) 兩者大不同"></a>誤區二：<code>.value</code>, <code>.getAttribute(&#39;value&#39;)</code> 兩者大不同</h2><p>這一點是我之前沒有思考過的問題。</p><p>在這個例子中，當我們做表單取值的時候，必須把 id 為 <code>&quot;targetInput&quot;</code>的表單元素綁訂到 <code>el</code> 這個變數上。然後利用 <code>el.value</code>去取值。</p><figure><div class="code-wrapper"><pre class="line-numbers language-htmlmixed" data-language="htmlmixed"><code class="language-htmlmixed">&lt;input type&#x3D;&quot;text&quot; id&#x3D;&quot;targetInput&quot; value&#x3D;&quot;123&quot;&gt;&lt;button id&#x3D;&quot;firstBtn&quot;&gt;觸發按鈕&lt;&#x2F;button&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></div></figure><figure><div class="code-wrapper"><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token keyword">let</span> el <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#targetInput'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">let</span> firstBtn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#firstBtn'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">el.value: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>el<span class="token punctuation">.</span>value<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>firstBtn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>  <span class="token comment">//輸入框填入任何值都會被 "任意填入的值" 取代</span>    el<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">"任意填入的值"</span><span class="token punctuation">;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">el.value: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>el<span class="token punctuation">.</span>value<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//"任意填入的值"</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><p>但是使用 <code>.getAttribute(&#39;value&#39;)</code> 也能取到 <code>input</code> 元素 <code>value</code> 屬性的值，那 <code>.value</code> 和 <code>.getAttribute(&#39;value&#39;)</code> 有甚麼差別呢？</p><figure><div class="code-wrapper"><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token keyword">let</span> el <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"#targetInput"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">let</span> firstBtn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"#firstBtn"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">el.value: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>el<span class="token punctuation">.</span>value<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>firstBtn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token comment">//輸入框填入任何值都會被 "任意填入的值" 取代</span>  el<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">"任意填入的值"</span><span class="token punctuation">;</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">el.value: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>el<span class="token punctuation">.</span>value<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//"el.value: 任意填入的值"</span>  <span class="token keyword">let</span> getValue <span class="token operator">=</span> el<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"value"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//getAttribute 取到的是 input 的預設值 ，而非 user 輸入的值</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>getValue<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//"123"</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><p><code>el.value</code> 會去捉取表單輸入的值，如果沒有輸入的話，就會去捉預設值。而 <code>.getAttribute(&#39;value&#39;)</code> 則不管使用者輸入甚麼，都會去捉預設值，而要改變預設值的話必須使用 <code>el.setAttribute(&#39;value&#39;, &#39;456&#39;)</code>。</p><figure><div class="code-wrapper"><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token keyword">let</span> el <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"#targetInput"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">let</span> firstBtn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"#firstBtn"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">el.value: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>el<span class="token punctuation">.</span>value<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>firstBtn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token comment">//輸入框填入任何值都會被 "任意填入的值" 取代</span>  el<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">"任意填入的值"</span><span class="token punctuation">;</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">el.value: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>el<span class="token punctuation">.</span>value<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//"el.value: 任意填入的值"</span>  el<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'value'</span><span class="token punctuation">,</span> <span class="token string">'456'</span><span class="token punctuation">)</span>  <span class="token keyword">let</span> getValue <span class="token operator">=</span> el<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"value"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//getAttribute 取到的是 input 的預設值 ，而非 user 輸入的值</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>getValue<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// "456"</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><p>所以結論是表單取值不能使用 <code>el.getAttribute(&quot;value&quot;)</code>。</p><p>六角學院助教的提醒：</p><ul><li>el.value 對應的是 input 欄位目前「輸入的值」</li><li>el.getAttribute(‘value’) 對應的是 input 欄位的「預設屬性值」</li><li>修改 el.value 並不會影響 input 標籤的 value 預設屬性，使用 setAttribute() 才會。</li></ul><p>真的每天都要花時間做每日任務，常常會發現自己不懂的地方。</p><h2 id="誤區三：-el-value-不等於-e-target-value"><a href="#誤區三：-el-value-不等於-e-target-value" class="headerlink" title="誤區三： el.value 不等於 e.target.value"></a>誤區三： el.value 不等於 e.target.value</h2><p>今天看每日任務的時候有一瞬間被混淆了。</p><p><code>e.target.value</code> 的 <code>e</code> 是事件監聽的事件物件，例如滑鼠點擊按鈕時會產生一個事件物件，<code>e.target.value</code> 是點擊事件所帶的資訊。</p><p><code>el.value</code> 則是我們綁定表單元素，當輸入資訊時就會夾帶在 <code>value</code> 上。<br>兩者並不相同。</p><p><a href="https://codepen.io/popeye_ux/pen/mdMzvZp">今天的每日任務</a> 。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/5g9rhAh.jpg&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;誤區一：忘記將表單中取出的「數字」由字串轉為數字&quot;&gt;&lt;a href=&quot;#誤區一：忘記將表單中取出的「數字」由字串轉為數字&quot; class=&quot;headerlink&quot; </summary>
      
    
    
    
    <category term="JavaScript" scheme="https://popeye-ux.github.io/categories/JavaScript/"/>
    
    
    <category term="JavaScript, JS直播班" scheme="https://popeye-ux.github.io/tags/JavaScript-JS%E7%9B%B4%E6%92%AD%E7%8F%AD/"/>
    
  </entry>
  
  <entry>
    <title>JS直播班 作業檢討--旅遊套票作業</title>
    <link href="https://popeye-ux.github.io/2021/11/27/travelticket/"/>
    <id>https://popeye-ux.github.io/2021/11/27/travelticket/</id>
    <published>2021-11-27T07:40:21.000Z</published>
    <updated>2022-05-01T16:49:36.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://i.imgur.com/9DdScYX.jpg"></p><p>這是六角學院JS直播班第五周作業的檢討。</p><p>作業有現成的 HTML 與 CSS模板，是一個旅遊促銷套票的網站，可以新增套票會同步渲染到畫面上。</p><span id="more"></span><p><a href="https://codepen.io/popeye_ux/pen/PoKQMyL">我的作業CODE PEN</a></p><p>這也是我第一次抓資料渲染到網頁上，有些笨拙，也有些地方思慮不周，更有些地方根本沒有注意到就犯錯了。</p><p>所以我後來又去看了同學的作業，針對自己沒做好的地方改進，以下就是我的檢討：</p><h2 id="Level-2-把資料渲染到畫面上"><a href="#Level-2-把資料渲染到畫面上" class="headerlink" title="Level 2 把資料渲染到畫面上"></a>Level 2 把資料渲染到畫面上</h2><p>原本我是用字串累加，之後再innerHTML到綁定的DOM元素上：</p><figure><div class="code-wrapper"><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">renderScene</span><span class="token punctuation">(</span><span class="token parameter">datas</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">let</span> info <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>  datas<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    info <span class="token operator">+=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;li  class="ticketCard">&lt;div class="ticketCard-img">      &lt;a href="#">        &lt;img src="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>item<span class="token punctuation">.</span>imgUrl<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">" alt="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>item<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">">      &lt;/a>      &lt;div class="ticketCard-region"></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>item<span class="token punctuation">.</span>area<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">&lt;/div>      &lt;div class="ticketCard-rank"></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>item<span class="token punctuation">.</span>rate<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">&lt;/div>    &lt;/div>    &lt;div class="ticketCard-content">      &lt;div>        &lt;h3>          &lt;a href="#" class="ticketCard-name"></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>item<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">&lt;/a>        &lt;/h3>        &lt;p class="ticketCard-description">        </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>item<span class="token punctuation">.</span>description<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">        &lt;/p>      &lt;/div>      &lt;div class="ticketCard-info">        &lt;p class="ticketCard-num">          &lt;span>&lt;i class="fas fa-exclamation-circle">&lt;/i>&lt;/span>          剩下最後 &lt;span id="ticketCard-num"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>item<span class="token punctuation">.</span>group<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string"> &lt;/span> 組        &lt;/p>        &lt;p class="ticketCard-price">          TWD &lt;span id="ticketCard-price"></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>item<span class="token punctuation">.</span>price<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">&lt;/span>        &lt;/p>      &lt;/div>    &lt;/div>  &lt;/li></span><span class="token template-punctuation string">`</span></span>  <span class="token punctuation">&#125;</span>  <span class="token punctuation">)</span>  ticketInfo<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> info<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><p>後來看到同學更好的作法：</p><ul><li>把要渲染到畫面上的卡片，單獨做成一個函式，回傳( return ) HTML 碼的字串。</li><li>再用陣列 reduce 的方法，把卡片渲染出來。</li></ul><figure><div class="code-wrapper"><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">cardTemplate</span><span class="token punctuation">(</span><span class="token parameter">dataObj</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">    &lt;li class="ticketCard">        &lt;div class="ticketCard-img">          &lt;a href="#">            &lt;img src="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>dataObj<span class="token punctuation">.</span>imgUrl<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">" alt="圖片">          &lt;/a>          &lt;div class="ticketCard-region"></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>dataObj<span class="token punctuation">.</span>area<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">&lt;/div>          &lt;div class="ticketCard-rank"></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>dataObj<span class="token punctuation">.</span>rate<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">&lt;/div>        &lt;/div>        &lt;div class="ticketCard-content">          &lt;div>            &lt;h3>              &lt;a href="#" class="ticketCard-name"></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>dataObj<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">&lt;/a>            &lt;/h3>            &lt;p class="ticketCard-description">              </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>dataObj<span class="token punctuation">.</span>description<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">            &lt;/p>          &lt;/div>          &lt;div class="ticketCard-info">            &lt;p class="ticketCard-num">              &lt;span>&lt;i class="fas fa-exclamation-circle">&lt;/i>&lt;/span>              剩下最後 &lt;span id="ticketCard-num"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>dataObj<span class="token punctuation">.</span>group<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string"> &lt;/span> 組            &lt;/p>            &lt;p class="ticketCard-price">              TWD &lt;span id="ticketCard-price">$ </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>dataObj<span class="token punctuation">.</span>price<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">&lt;/span>            &lt;/p>          &lt;/div>        &lt;/div>      &lt;/li>    </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><p>用陣列的reduce方法累加，把版型組起來。</p><figure><div class="code-wrapper"><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">render</span><span class="token punctuation">(</span><span class="token parameter">newData <span class="token operator">=</span> data</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  ticketCardArea<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> newData<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">accumulator<span class="token punctuation">,</span> currentValue</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newData<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> accumulator <span class="token operator">+</span> <span class="token function">cardTemp</span><span class="token punctuation">(</span>currentValue<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><ul><li>初始值設為 ‘’ 空字串，傳入累加器 prev 。</li><li>第二個參數則帶入 ticketData 陣列裡的物件，讓它們傳入 cardTemplate 這個函式去累加。</li></ul><p>這種方法把版型的資料跟組版的方法分開，我覺得更有邏輯。</p><p>版型在網頁一載進來時，data陣列中的資料就要渲染在卡片上，所以要在 JS 程式碼中先呼叫 render 函式。</p><figure><div class="code-wrapper"><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure><h2 id="LEVEL-3-利用表單新增票卡"><a href="#LEVEL-3-利用表單新增票卡" class="headerlink" title="LEVEL 3 利用表單新增票卡"></a>LEVEL 3 利用表單新增票卡</h2><p>這部分我的錯誤比較多：</p><ul><li>成功新增套票後，所有的輸入欄位可以做清空。</li><li>套票組數欄位輸入值新增進去會呈現 undefined，程式碼第 108 行在抓取 HTML 元素時有誤，應該是抓取組數欄位的 input 標籤 id 元素。</li><li>ticketObj 物件變數缺少了 rate 套票星級屬性。</li><li>金額、組數、星級的 type 都需要為 Number，建議可以在程式碼第 124~126 行做轉型。</li></ul><figure><div class="code-wrapper"><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token comment">//新增套票邏輯</span><span class="token comment">//綁定表單輸入框的元素</span><span class="token keyword">const</span> ticketName <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#ticketName'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">const</span> ticketImgUrl <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#ticketImgUrl'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">const</span> ticketRegion <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#ticketRegion'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">const</span> ticketPrice <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#ticketPrice'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">const</span> ticketNum <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#ticketNum'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">const</span> ticketRate <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#ticketRate'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">const</span> ticketDescription <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#ticketDescription'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//綁掉輸送按鈕</span><span class="token keyword">const</span> addBtn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.addTicket-btn'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//對按鈕做事件監聽</span>addBtn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>ticketName<span class="token punctuation">.</span>value <span class="token operator">===</span> <span class="token string">''</span> <span class="token operator">||</span> ticketImgUrl<span class="token punctuation">.</span>value <span class="token operator">===</span> <span class="token string">''</span> <span class="token operator">||</span> ticketRegion<span class="token punctuation">.</span>value <span class="token operator">===</span> <span class="token string">''</span> <span class="token operator">||</span> ticketDescription<span class="token punctuation">.</span>value <span class="token operator">===</span> <span class="token string">''</span> <span class="token operator">||</span> ticketDescription<span class="token punctuation">.</span>value <span class="token operator">===</span> <span class="token string">''</span> <span class="token operator">||</span> ticketNum<span class="token punctuation">.</span>value <span class="token operator">===</span> <span class="token string">''</span> <span class="token operator">||</span> ticketPrice<span class="token punctuation">.</span>value <span class="token operator">===</span> <span class="token string">''</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'有些資訊沒有填寫！！！'</span><span class="token punctuation">)</span>  <span class="token punctuation">&#125;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>ticketDescription<span class="token punctuation">.</span>value<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'套票描述的字數超過 100 字！！！'</span><span class="token punctuation">)</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">if</span><span class="token punctuation">(</span>ticketRate<span class="token punctuation">.</span>value <span class="token operator">></span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'套票星級要在 10 (含10) 以下！！！'</span><span class="token punctuation">)</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">let</span> ticketObj <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>  ticketObj<span class="token punctuation">.</span>id <span class="token operator">=</span> data<span class="token punctuation">.</span>length<span class="token punctuation">;</span>  ticketObj<span class="token punctuation">.</span>name <span class="token operator">=</span> ticketName<span class="token punctuation">.</span>value<span class="token punctuation">;</span>  ticketObj<span class="token punctuation">.</span>imgUrl <span class="token operator">=</span> ticketImgUrl<span class="token punctuation">.</span>value<span class="token punctuation">;</span>  ticketObj<span class="token punctuation">.</span>area <span class="token operator">=</span> ticketRegion<span class="token punctuation">.</span>value<span class="token punctuation">;</span>  ticketObj<span class="token punctuation">.</span>description <span class="token operator">=</span> ticketDescription<span class="token punctuation">.</span>value<span class="token punctuation">;</span>  ticketObj<span class="token punctuation">.</span>group <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span>ticketNum<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>  ticketObj<span class="token punctuation">.</span>price <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span>ticketPrice<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>  ticketObj<span class="token punctuation">.</span>rate <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span>ticketRate<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>  data<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>ticketObj<span class="token punctuation">)</span><span class="token punctuation">;</span>  data<span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token function">renderScene</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> form <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.addTicket-form'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  form<span class="token punctuation">.</span><span class="token function">reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><p>為了要捉到表單的資料，我綁定了許多輸入框的DOM元素，結果還少捉了一個，真的是眼花了。</p><p>後來發現同學的方法非常聰明，監聽整個 <code>&lt;form&gt;</code> 元素，而不是一個一個的輸入框，然後用陣列的展開運算子(…)，把每個輸入框的元素轉為一個一個物件，再用 foreEach() 去取輸入的值，這樣就大功告成了，不用再一一去綁定輸入框的DOM元素來取值。</p><figure><div class="code-wrapper"><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">addData</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">const</span> formArray <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>e<span class="token punctuation">.</span>target<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token comment">//展開運算子(...) 會把每個輸入框變成一個物件，捉進陣列</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>formArray<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//最後一個物件是 submit 按鈕，所以要把它去除掉</span>    formArray<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">&#123;</span>      <span class="token literal-property property">id</span><span class="token operator">:</span> ticketData<span class="token punctuation">.</span>length<span class="token punctuation">,</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    <span class="token comment">//必須去HTML改name的內容，讓它對應到資料的物件</span>    formArray<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>      obj<span class="token punctuation">[</span>item<span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> item<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//把數字的字串轉為數字</span>    obj<span class="token punctuation">.</span>group <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>group<span class="token punctuation">)</span><span class="token punctuation">;</span>    obj<span class="token punctuation">.</span>price <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>price<span class="token punctuation">)</span><span class="token punctuation">;</span>    obj<span class="token punctuation">.</span>rate <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>rate<span class="token punctuation">)</span>    <span class="token comment">//表單驗證</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>description<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>      <span class="token keyword">return</span> <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'套票描述的字數超過 100 字！！！'</span><span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>obj<span class="token punctuation">.</span>description <span class="token operator">===</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>      <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'套票描述沒有填'</span><span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>rate <span class="token operator">></span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>      <span class="token keyword">return</span> <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'套票星級要在 10 (含10) 以下！！！'</span><span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span>    ticketData<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    regionSearch<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>    formEl<span class="token punctuation">.</span><span class="token function">reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><h2 id="LEVEL3-城市選單：選擇城市-變換網頁內容"><a href="#LEVEL3-城市選單：選擇城市-變換網頁內容" class="headerlink" title="LEVEL3 城市選單：選擇城市 變換網頁內容"></a>LEVEL3 城市選單：選擇城市 變換網頁內容</h2><p>這個部分，我目前的程度寫出來是這樣子：</p><figure><div class="code-wrapper"><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token comment">//選取城市，渲染出符合城市條件的卡片</span><span class="token keyword">function</span> <span class="token function">selectCity</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>     <span class="token comment">// ''空字串布林值為 false，利用!反轉變成 true</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value <span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token function">render</span><span class="token punctuation">(</span>ticketData<span class="token punctuation">)</span>      searchResultText<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">本次搜尋共 </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>ticketData<span class="token punctuation">.</span>length<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string"> 筆資料</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">let</span> selectedCity <span class="token operator">=</span> ticketData<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value <span class="token operator">===</span> item<span class="token punctuation">.</span>area<span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>selectedCity<span class="token punctuation">)</span><span class="token punctuation">;</span>      searchResultText<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">本次搜尋共 </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>selectedCity<span class="token punctuation">.</span>length<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string"> 筆資料</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>      <span class="token function">render</span><span class="token punctuation">(</span>selectedCity<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure><p>但是我也有看到同學利用「三元運算子」寫出很簡短的程式碼：</p><figure><div class="code-wrapper"><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">selectCity</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">const</span> filterStr <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">;</span>    filterStr <span class="token operator">===</span> <span class="token string">''</span> <span class="token operator">?</span> <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">render</span><span class="token punctuation">(</span>ticketData<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=></span> item<span class="token punctuation">.</span>area <span class="token operator">===</span> filterStr<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></div></figure><p>他山之石可以攻錯，如果可以學習別人好的地方，來讓自己進步，就可以讓自己離目標更近一點。</p><p><a href="https://codepen.io/popeye_ux/pen/VwzExxo">修改過後的作業</a></p><h3 id="參考資料"><a href="#參考資料" class="headerlink" title="參考資料"></a>參考資料</h3><ul><li><a href="https://developer.mozilla.org/zh-TW/docs/Web/JavaScript/Reference/Operators/Spread_syntax">MDN Spread syntax (…)</a></li></ul>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/9DdScYX.jpg&quot;&gt;&lt;/p&gt;
&lt;p&gt;這是六角學院JS直播班第五周作業的檢討。&lt;/p&gt;
&lt;p&gt;作業有現成的 HTML 與 CSS模板，是一個旅遊促銷套票的網站，可以新增套票會同步渲染到畫面上。&lt;/p&gt;</summary>
    
    
    
    <category term="JavaScript" scheme="https://popeye-ux.github.io/categories/JavaScript/"/>
    
    
    <category term="JavaScript, JS直播班, array" scheme="https://popeye-ux.github.io/tags/JavaScript-JS%E7%9B%B4%E6%92%AD%E7%8F%AD-array/"/>
    
  </entry>
  
</feed>
